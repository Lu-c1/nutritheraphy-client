window._bannerflow.registerModule('000000B8100730',(Color,inClient)=>{const preloadAssets=[{type:'image',id:0,url:'https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/75241d94-981c-4a3d-a499-3466f83f98e9.png'},{type:'image',id:1,url:'https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/7de119d9-5ff4-4914-bb3b-6fe340bd550a.png'},{type:'image',id:2,url:'https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/fd99968e-74c8-412b-85f0-8ae9ea45cbd0.svg'},{type:'font',id:3,style:{id:"6113af64d53fae5fc8cb0988",src:"https://c.bannerflow.net/fs/api/v2/font?u=https%3A%2F%2Ffontmanagerstorage.blob.core.windows.net%2Ffontmanagerfonts%2F59c910d931ae9c0318638256%2Fb8d39551-68ea-4ae7-9f0e-5ab5c1261bdd.woff&t=05ADFIRY",weight:700,style:"normal",fontFamilyId:"6113af69d53fae5fc8cb098d"}},{type:'font',id:4,style:{id:"6113af64d53fae5fc8cb0987",src:"https://c.bannerflow.net/fs/api/v2/font?u=https%3A%2F%2Ffontmanagerstorage.blob.core.windows.net%2Ffontmanagerfonts%2F59c910d931ae9c0318638256%2F63565b7a-3d57-473d-8aa5-528f9c57fb18.woff&t=%20%21%25%2a-ACEGHILNORSTUVY%C2%A1%C3%93",weight:600,style:"normal",fontFamilyId:"6113af69d53fae5fc8cb098d"}},{type:'image',id:5,url:'https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/7b51f064-cf80-42f5-8742-399b1e95fc65.png'}];const env={FONTSERVICE_API_ORIGIN:'https://c.bannerflow.net/fs',IMAGE_OPTIMIZER_ORIGIN:'https://c.bannerflow.net/io',IN_PRODUCTION:true,FEEDS_STORAGE_ORIGIN:'https://c.bannerflow.net/sfeeds'};const creativeData={kind:'creative',width:160,height:600,loops:1,startTime:0,stopTime:undefined,preloadImage:{frames:[]},fill:Color.parse('rgba(255,255,255,1)'),elements:[{kind:'rectangle',id:'ab6a853f-b5c9-400b-8ca0-23a121f28229',time:0,hidden:false,duration:6.9,animations:[],states:[],actions:[],x:0,y:0,width:160,height:600,fill:Color.parse('rgba(153,193,192,1)'),radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1},{kind:'image',id:'2e2a3931-d7f8-450c-b46f-1a8ea7d5d39a',time:0,hidden:false,duration:6.9,animations:[],states:[],actions:[],x:0,y:0,width:160,height:600,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,fitOption:"cover",fitPositionX:0,fitPositionY:0,imageAsset:{id:"258294",url:"https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/75241d94-981c-4a3d-a499-3466f83f98e9.png",width:1600,height:900},quality:85},{kind:'widget',id:'a29f0049-3989-4509-a948-5b4d607d6d92',time:0,hidden:false,duration:6.93,animations:[{id:'2457e630-9bc0-43d6-901b-fa0a173da948',name:'Animation',type:'keyframe',timingFunction:'easeInOutCubic',settings:{},keyframes:[{id:"8f468389-1c13-46c4-8e73-799c21861228",stateId:"6b335ac7-7e3d-47ac-b76e-d3bf9c6fee36",time:0,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"0600f251-9625-49ef-bf89-cf9effef4fdc",stateId:"146731e1-d4bc-409d-963e-e8580e89d076",time:0.8788246615769553,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"8bc3686a-a57d-4b56-a96c-df84bf14d3fc",stateId:"ad31bcd1-387a-45b6-a135-af4fe9499341",time:1.5899788285109382,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"df13cdbf-f039-4140-b178-1609cb68c6ea",stateId:"ce2064db-15cf-4d1b-a33f-00518010e2a3",time:1.983137229742734,timingFunction:"easeInOutCubic",value:undefined,duration:0}]},],states:[{id:'6b335ac7-7e3d-47ac-b76e-d3bf9c6fee36',x:0,y:0,},{id:'146731e1-d4bc-409d-963e-e8580e89d076',x:0,y:0,},{id:'ad31bcd1-387a-45b6-a135-af4fe9499341',x:-5,y:-52,scaleX:0.6,scaleY:0.6,},{id:'ce2064db-15cf-4d1b-a33f-00518010e2a3',x:-30,y:-51,scaleX:0.6,scaleY:0.6,},],actions:[],x:716,y:105,width:85,height:75,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,html:"PGRpdiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGlkPSJpbnN0cnVjdGlvbnMiPgogICAgICAgICAgICA8c3Ryb25nPlZpZGVvIHBsYXllcjwvc3Ryb25nPjxicj5FbnRlciBhIFVSTCBpbiB0aGUgVVJMIHByb3BlcnR5IG9yIHNlbGVjdCBmZWVkIHdpdGggdmlkZW8gVVJMLgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InBsYXktcGF1c2Utb3ZlcmxheSIgY2xhc3M9InNob3ctcGxheSI+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9InBhdXNlIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjQwcHgiIGhlaWdodD0iNjQwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJMYXllcl8xIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjgwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4gCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9Ik01NDYuMjczLDkzLjcyNkM0ODUuODM0LDMzLjI4Niw0MDUuNDc2LDAsMzIwLDBDMjM0LjUyNSwwLDE1NC4xNjYsMzMuMjg2LDkzLjcyNiw5My43MjZTMCwyMzQuNTI1LDAsMzIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQzYwNi43MTQsNDg1LjgzNSw2NDAsNDA1LjQ3Niw2NDAsMzIwUzYwNi43MTQsMTU0LjE2Niw1NDYuMjczLDkzLjcyNnogTTMyMCw1ODJDMTc1LjUzMyw1ODIsNTgsNDY0LjQ2Nyw1OCwzMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNTgsMTc1LjUzMywxNzUuNTMzLDU4LDMyMCw1OGMxNDQuNDY3LDAsMjYyLDExNy41MzMsMjYyLDI2MkM1ODIsNDY0LjQ2Nyw0NjQuNDY3LDU4MiwzMjAsNTgyeiIgLz4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzPSIyNDMuMjg5LDMyMCAyNDMuMjg5LDE4OC42OTggMzU3LDI1NC4zNSA0NzAuNzExLDMyMCAzNTcsMzg1LjY1MSAyNDMuMjg5LDQ1MS4zMDIiIC8+CiAgICAgICAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjM3NSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzIiCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyBjbGFzcz0icGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjY0MHB4IiBoZWlnaHQ9IjY0MHB4IiB2aWV3Qm94PSIwIDAgNjQwIDY0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQwIDY0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iLTgwIgogICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iIzAwMDAwMCIKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iODAwIgogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNjA2LjcxNCw0ODUuODM1LDY0MCw0MDUuNDc2LDY0MCwzMjBTNjA2LjcxNCwxNTQuMTY2LDU0Ni4yNzMsOTMuNzI2eiBNMzIwLDU4MkMxNzUuNTMzLDU4Miw1OCw0NjQuNDY3LDU4LDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyIiAvPgogICAgICAgICAgICAgICAgICAgIDxnIGRpc3BsYXk9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSIzNzUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0iaW5saW5lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI1Mi40ODYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9IjE5Mi44NTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJpbmxpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMiIgCiAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIj48L2c+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InZpZGVvLWNvbnRyb2xzIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBsYXliYWNrIiBjbGFzcz0iaXNQYXVzZWQiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGF1c2UiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzEiPjxyZWN0IHg9Ii04MCIgeT0iLTgwIiBkaXNwbGF5PSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz48Zz48cmVjdCB4PSIzNzUiIHk9IjE5Mi44NTQiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI1Mi40ODYiIGhlaWdodD0iMjU0LjI5MSIvPjxyZWN0IHg9IjIxNSIgeT0iMTkyLjg1NCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+PHJlY3QgeD0iLTgwIiB5PSItODAiIGRpc3BsYXk9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyICIvPjxnIGRpc3BsYXk9Im5vbmUiPjxyZWN0IHg9IjM3NSIgeT0iMTkyLjg1NCIgZGlzcGxheT0iaW5saW5lIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTIuNDg2IiBoZWlnaHQ9IjI1NC4yOTEiLz48cmVjdCB4PSIyMTUiIHk9IjE5Mi44NTQiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJwcm9ncmVzcy10aW1lciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImJ1ZmZlckJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0idGltZUJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ2b2x1bWUtaWNvbiIgY2xhc3M9InVubXV0ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNNTMxIDQwNXYtMWMyNCAtMjcgMzYgLTU4IDM2IC05MHMtMTIgLTY0IC0zNiAtODljLTE1IC0xNSAtMzMgLTExIC00NCAxcy0xNiAzMCAtMSA0NWMyNSAyNCAyNSA2NCAwIDg4Yy0xNSAxNSAtMTAgMzMgMSA0NXMyOSAxNiA0NCAxek02MTkgNDkydi0zYzUxIC01MSA3NCAtMTEwIDc0IC0xNzhzLTIzIC0xMjcgLTc0IC0xNzggYy0xMyAtMTUgLTMyIC0xMSAtNDMgMHMtMTYgMzAgLTEgNDVjMzggMzkgNTUgODMgNTUgMTM0cy0xNyA5NSAtNTUgMTM0Yy0xNSAxNSAtMTAgMzQgMSA0NXMzMCAxNCA0MyAxek03MDkgNTc5djRjNzQgLTc4IDExMCAtMTY2IDExMCAtMjY4cy0zNiAtMTkwIC0xMTAgLTI2OGMtMTUgLTE1IC0zMyAtMTEgLTQ0IDBzLTE2IDMwIC0xIDQ1YzY0IDY0IDkzIDEzNyA5MyAyMjFzLTI5IDE1NyAtOTMgMjIxYy0xNSAxNSAtMTAgMzQgMSA0NSBzMjkgMTUgNDQgMHoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJtdXRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTg1MSA0MTBsLTk1IC05NWw5NSAtOTRsLTYzIC02M2wtOTUgOTRsLTk0IC05NGwtNjMgNjNsOTQgOTRsLTk0IDk1bDYzIDYzbDk0IC05NWw5NSA5NXoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUtY29udHJvbGxlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS12YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4iPgogICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDE3OTIgMTc5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0MTEgNTQxbC0zNTUgMzU1IDM1NSAzNTUgMTQ0LTE0NHEyOS0zMSA3MC0xNCAzOSAxNyAzOSA1OXY0NDhxMCAyNi0xOSA0NXQtNDUgMTloLTQ0OHEtNDIgMC01OS00MC0xNy0zOSAxNC02OWwxNDQtMTQ0LTM1NS0zNTUtMzU1IDM1NSAxNDQgMTQ0cTMxIDMwIDE0IDY5LTE3IDQwLTU5IDQwaC00NDhxLTI2IDAtNDUtMTl0LTE5LTQ1di00NDhxMC00MiA0MC01OSAzOS0xNyA2OSAxNGwxNDQgMTQ0IDM1NS0zNTUtMzU1LTM1NS0xNDQgMTQ0cS0xOSAxOS00NSAxOS0xMiAwLTI0LTUtNDAtMTctNDAtNTl2LTQ0OHEwLTI2IDE5LTQ1dDQ1LTE5aDQ0OHE0MiAwIDU5IDQwIDE3IDM5LTE0IDY5bC0xNDQgMTQ0IDM1NSAzNTUgMzU1LTM1NS0xNDQtMTQ0cS0zMS0zMC0xNC02OSAxNy00MCA1OS00MGg0NDhxMjYgMCA0NSAxOXQxOSA0NXY0NDhxMCA0Mi0zOSA1OS0xMyA1LTI1IDUtMjYgMC00NS0xOXoiIGZpbGw9IiNmZmYiLz4KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwb3N0ZXIiPjwvZGl2PgogICAgICAgIDxzcGFuIGlkPSJ2b2x1bWVUb2dnbGUiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0idW5tdXRlZCI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTUzMSA0MDV2LTFjMjQgLTI3IDM2IC01OCAzNiAtOTBzLTEyIC02NCAtMzYgLTg5Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMXMtMTYgMzAgLTEgNDVjMjUgMjQgMjUgNjQgMCA4OGMtMTUgMTUgLTEwIDMzIDEgNDVzMjkgMTYgNDQgMXpNNjE5IDQ5MnYtM2M1MSAtNTEgNzQgLTExMCA3NCAtMTc4cy0yMyAtMTI3IC03NCAtMTc4IGMtMTMgLTE1IC0zMiAtMTEgLTQzIDBzLTE2IDMwIC0xIDQ1YzM4IDM5IDU1IDgzIDU1IDEzNHMtMTcgOTUgLTU1IDEzNGMtMTUgMTUgLTEwIDM0IDEgNDVzMzAgMTQgNDMgMXpNNzA5IDU3OXY0Yzc0IC03OCAxMTAgLTE2NiAxMTAgLTI2OHMtMzYgLTE5MCAtMTEwIC0yNjhjLTE1IC0xNSAtMzMgLTExIC00NCAwcy0xNiAzMCAtMSA0NWM2NCA2NCA5MyAxMzcgOTMgMjIxcy0yOSAxNTcgLTkzIDIyMWMtMTUgMTUgLTEwIDM0IDEgNDUgczI5IDE1IDQ0IDB6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0ibXV0ZWQiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek04NTEgNDEwbC05NSAtOTVsOTUgLTk0bC02MyAtNjNsLTk1IDk0bC05NCAtOTRsLTYzIDYzbDk0IDk0bC05NCA5NWw2MyA2M2w5NCAtOTVsOTUgOTV6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8taG9sZGVyIj48L2Rpdj4KICAgIDwvZGl2Pg==",css:"KiB7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KaHRtbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQojY29udGFpbmVyIHsKICBvcGFjaXR5OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBmb250LWZhbWlseTogJ0hlbHZldGljYScsICdBcmlhbCcsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxNnB4Owp9Ci52aWRlby1ob2xkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogcG9pbnRlcjsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3ZlciB7CiAgd2lkdGg6IGF1dG87CiAgbGVmdDogNTAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyLXggewogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMTAwJTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3Zlci15IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KI3Bvc3RlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsKICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgei1pbmRleDogMTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwp9CiNwb3N0ZXIuY292ZXIgewogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmltYWdlR2VuZXJhdG9yTW9kZSAjcGxheS1wYXVzZS1vdmVybGF5LAouaW1hZ2VHZW5lcmF0b3JNb2RlICN2aWRlby1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNjb250YWluZXI6aG92ZXIgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNjb250YWluZXIuaXNQYXVzZWQgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgewogIGRpc3BsYXk6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAyOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAxOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5LnNob3cgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuaGlkZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wYXVzZSAucGF1c2UgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wbGF5IC5wbGF5IHsKICBkaXNwbGF5OiBibG9jazsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogNDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDAuNTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC41KTsKICBzdHJva2U6IHJnYmEoMCwwLDAsMC43KTsKICBzdHJva2Utd2lkdGg6IDFweDsKICBwYWRkaW5nOiAycHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgc3ZnICogewogIGZpbGw6IGluaGVyaXQ7Cn0KI3BsYXktcGF1c2Utb3ZlcmxheSBzdmc6aG92ZXIgewogIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKfQojdmlkZW8tY29udHJvbHMgewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41KTsKICBjb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwcHg7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKICBkaXNwbGF5OiBub25lOwogIHotaW5kZXg6IDM7Cn0KI3ZpZGVvLWNvbnRyb2xzLnNob3cgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7Cn0KI3ZpZGVvLWNvbnRyb2xzID5kaXY6bm90KCNwcm9ncmVzcykgewogIGZsb2F0OiBsZWZ0OwogIHdpZHRoOiAyNXB4OwogIGhlaWdodDogMzBweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQojdmlkZW8tY29udHJvbHMgPmRpdjpiZWZvcmUgewogIGNvbnRlbnQ6ICcnOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQojdmlkZW8tY29udHJvbHMgc3ZnIHsKICB3aWR0aDogMjVweDsKICBoZWlnaHQ6IDI1cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZpbGw6ICNmZmY7Cn0KI3BsYXliYWNrIHsKICB3aWR0aDogMzBweCAhaW1wb3J0YW50Owp9CiNwbGF5YmFjay5pc1BhdXNlZCAuaWNvbi1wbGF5IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KI3BsYXliYWNrLmlzUGxheWluZyAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CiNwbGF5YmFjayAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogbm9uZTsKfQojcGxheWJhY2sgLmljb24tcGxheSB7CiAgZGlzcGxheTogbm9uZTsKfQojcHJvZ3Jlc3MtYmFyIHsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7CiAgLW1zLWZsZXgtcGFjazogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtZmxleDogNTsKICAtbXMtZmxleC1wb3NpdGl2ZTogNTsKICBmbGV4LWdyb3c6IDU7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzLXRpbWVyIHsKICB3aWR0aDogODdweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxMXB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyBzcGFuIHsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3Byb2dyZXNzLWJhciAjcHJvZ3Jlc3MgI3RpbWVCYXIgewogIHotaW5kZXg6IDEwOwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuMXM7CiAgdHJhbnNpdGlvbjogd2lkdGggMC4xczsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyAjYnVmZmVyQmFyIHsKICB6LWluZGV4OiA1OwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKfQojdm9sdW1lIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtbXMtZmxleC1wb3NpdGl2ZTogMTsKICBmbGV4LWdyb3c6IDE7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LW9yaWVudDogaG9yaXpvbnRhbDsKICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsKICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdzsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIG1hcmdpbi1yaWdodDogNXB4Owp9CiN2b2x1bWUubW9iaWxlLXZvbHVtZSB7CiAgLXdlYmtpdC1ib3gtZmxleDogMDsKICAtbXMtZmxleC1wb3NpdGl2ZTogMDsKICBmbGV4LWdyb3c6IDA7Cn0KI3ZvbHVtZSAjdm9sdW1lLXZhbHVlIHsKICB6LWluZGV4OiAxMDsKICB3aWR0aDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7CiAgaGVpZ2h0OiAxMDAlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAwLjJzOwogIHRyYW5zaXRpb246IHdpZHRoIDAuMnM7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojdm9sdW1lICN2b2x1bWUtaWNvbiB7CiAgd2lkdGg6IDI1cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWNvbnRyb2xsZXIgewogIHdpZHRoOiA4MCU7CiAgaGVpZ2h0OiA3cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC40KTsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uIHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWljb24ubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lICN2b2x1bWUtaWNvbi51bm11dGVkIHN2Zy51bm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojZnVsbHNjcmVlbiB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQojZnVsbHNjcmVlbiBzdmcgewogIHdpZHRoOiAxNHB4OwogIG1hcmdpbi1yaWdodDogM3B4Owp9CiN2b2x1bWVUb2dnbGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA0OwogIHdpZHRoOiAxMCU7CiAgaGVpZ2h0OiAxMCU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CiN2b2x1bWVUb2dnbGUubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lVG9nZ2xlLnVubXV0ZWQgc3ZnLnVubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWVUb2dnbGUgc3ZnIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogbm9uZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgZmlsbDogI2ZmZjsKfQojdm9sdW1lVG9nZ2xlIHN2ZyAqIHsKICBmaWxsOiBpbmhlcml0Owp9CkBtZWRpYSAobWF4LXdpZHRoOiAyOTBweCkgewogICNwcm9ncmVzcy10aW1lciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KfQpAbWVkaWEgKG1heC13aWR0aDogMjAwcHgpIHsKICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1pY29uIHsKICAgIHdpZHRoOiBhdXRvOwogIH0KICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1jb250cm9sbGVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CiNpbnN0cnVjdGlvbnMgewogIGJhY2tncm91bmQ6ICMzNjM2MzY7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA5OTsKICBjb2xvcjogI2Y3ZjdmNzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdmVydGljYWwtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxNXB4OwogIGRpc3BsYXk6IG5vbmU7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOwogIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZm9udC1zaXplOiAwLjlyZW07Cn0KI2luc3RydWN0aW9ucyBzdHJvbmcgewogIGZvbnQtc2l6ZTogMS4xcmVtOwp9CiNpbnN0cnVjdGlvbnMuc2hvdyB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXN0YXJ0LXBsYXliYWNrLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQp2aWRlbzo6LWludGVybmFsLW1lZGlhLWNvbnRyb2xzLWRvd25sb2FkLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1lbmNsb3N1cmUgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KdmlkZW86Oi13ZWJraXQtbWVkaWEtY29udHJvbHMtcGFuZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgKyAzMHB4KTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqLwp9",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgfSk7DQp9Ow0KV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gdHJ1ZTsNCnZhciB2aWRlbzsNCnZhciBmaXJzdFBsYXlUaHJvdWdoID0gdHJ1ZTsNCnZhciB2aWRlb0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taG9sZGVyJyk7DQp2YXIgdmlkZW9TZXR0aW5ncyA9IHt9Ow0KdmFyIGhhc1N0b3BwZWQgPSBmYWxzZTsNCnZhciBtdXRlZFN0YXRlID0gdHJ1ZTsNCnZhciB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCnZhciBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zJyk7DQp2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOw0KdmFyIGZlZWQsIGZlZWRVcmwsIGZlZWRJdGVyYXRpb25JbmRleDsNCi8qDQoqKiBCYW5uZXJmbG93IGV2ZW50cw0KKi8NCmxldCBvbkxvYWRlZFByb21pc2VSZXNvbHZlcjsNCmlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgIFdpZGdldC5pc0xvYWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KICAgIH0pOw0KfQ0KdHJ5IHsNCiAgICBzZXRTZXR0aW5ncygpOw0KICAgIGNyZWF0ZVZpZGVvKCk7DQp9DQpjYXRjaCAoZSkgew0KICAgIC8vIGNvbnNvbGUuZXJyb3IoZS5zdGFjayk7IA0KfQ0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TZWVrLCB0aW1lID0+IHsNCiAgICAvLyBpZih2aWRlbyAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2NyZWF0aXZlJykgeyANCiAgICAvLyAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lICsgdGltZSAtIFdpZGdldC50aW1lKSk7DQogICAgLy8gfQ0KICAgIGlmICh2aWRlbykgew0KICAgICAgICB2aWRlby5zZWVrVG8oTWF0aC5hYnModmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgKyB0aW1lIC0gV2lkZ2V0LnRpbWUpKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGxheSwgdGltZSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbykgew0KICAgICAgICAgICAgdmlkZW8ucG9zdGVyLnN0eWxlLnNldFByb3BlcnR5KCJkaXNwbGF5IiwgIm5vbmUiLCAiaW1wb3J0YW50Iik7DQogICAgICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnICYmICh0aW1lID49IFdpZGdldC50aW1lICYmIHRpbWUgPCBXaWRnZXQuZHVyYXRpb24pKSB7DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsNCiAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LCAwKTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgdGltZSA9PiB7DQogICAgaWYgKHZpZGVvKSB7DQogICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHRpbWUgLSBXaWRnZXQudGltZSkpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuUmVzaXplLCAoKSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgdmlkZW8uc2V0RmlsbE9wdGlvbigpOw0KICAgICAgICB9DQogICAgfSwgMCk7DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5Qcm9wZXJ0eUNoYW5nZWQsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICB2aWRlb0VsZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gV2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzICsgJyUnOw0KICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRJbmRleCAtIDE7DQogICAgdHJ5IHsNCiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkICYmIFdpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmlkKSB7DQogICAgICAgICAgICBmZWVkID0geWllbGQgV2lkZ2V0LnByb3BlcnRpZXMuZHluYW1pY0NvbnRlbnQubG9hZCgpOw0KICAgICAgICAgICAgaWYgKGZlZWQgJiYgZmVlZC5kYXRhICYmIGZlZWQuZGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBmZWVkID0gZmVlZC5kYXRhOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChlKSB7IH0NCiAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJzsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICBmZWVkVXJsID0gZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0udmFsdWU7DQogICAgfQ0KICAgIGluc3RydWN0aW9ucy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgaWYgKCFXaWRnZXQucHJvcGVydGllcy51cmwgfHwgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgIWZlZWRVcmwpKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHVybCA9IFdpZGdldC5wcm9wZXJ0aWVzLnVybDsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHVybCA9IGZlZWRVcmw7DQogICAgfQ0KICAgIHNldFNldHRpbmdzKCk7DQogICAgaWYgKCF2aWRlbykgew0KICAgICAgICBjcmVhdGVWaWRlbygpOw0KICAgIH0NCiAgICBpZiAodXJsID09IHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS51cmwpIHsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICB9DQogICAgaWYgKHZpZGVvICYmIHVybCAhPT0gdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLnVybCkgew0KICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAodXJsKSk7DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQp9KSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuQW5pbWF0aW9uU3RhcnQsICgpID0+IHsNCiAgICBpZiAodmlkZW8gJiYgIWhhc1N0b3BwZWQpIHsNCiAgICAgICAgaWYgKHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS5hdXRvcGxheSkgew0KICAgICAgICAgICAgaWYgKGZpcnN0UGxheVRocm91Z2ggJiYgVGltZWxpbmUuaXNQbGF5aW5nKSB7DQogICAgICAgICAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLmxvb3BXaXRoQmFubmVyIHx8IGZpcnN0UGxheVRocm91Z2gpIHsNCiAgICAgICAgICAgICAgICAgICAgdmlkZW8uc2Vla1RvKFdpZGdldC5wcm9wZXJ0aWVzLnN0YXJ0VGltZSk7DQogICAgICAgICAgICAgICAgICAgIGZpcnN0UGxheVRocm91Z2ggPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgICAgICAgICBmaXJzdFBsYXlUaHJvdWdoID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSAmJiAhdmlkZW8udmlkZW8ucGF1c2VkKSB7DQogICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSkgew0KICAgICAgICAgICAgaWYgKFRpbWVsaW5lLmlzUGxheWluZykgew0KICAgICAgICAgICAgICAgIHZpZGVvLnNlZWtUbyhXaWRnZXQucHJvcGVydGllcy5zdGFydFRpbWUpOw0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdpbWFnZScpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKHZpZGVvICYmICF2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsNCiAgICAgICAgaWYgKFRpbWVsaW5lLmR1cmF0aW9uICE9PSBXaWRnZXQuZHVyYXRpb24pIHsNCiAgICAgICAgICAgIHZpZGVvLnRvZ2dsZU11dGUobXV0ZWRTdGF0ZSk7DQogICAgICAgIH0NCiAgICB9DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5BbmltYXRpb25FbmQsICgpID0+IHsNCiAgICBpZiAoVGltZWxpbmUuZHVyYXRpb24gIT09IFdpZGdldC5kdXJhdGlvbikgew0KICAgICAgICBtdXRlZFN0YXRlID0gdmlkZW8udmlkZW8ubXV0ZWQ7DQogICAgICAgIHZpZGVvLnRvZ2dsZU11dGUodHJ1ZSk7DQogICAgfQ0KICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMuc3RhdGljSW5kZXggJiYgV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCkgew0KICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleCArIDFdICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4ICsgMV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZEl0ZXJhdGlvbkluZGV4Kys7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBmZWVkSXRlcmF0aW9uSW5kZXggPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZFVybCA9IGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XVtXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGRdLnZhbHVlOw0KICAgICAgICAgICAgc2V0U2V0dGluZ3MoKTsNCiAgICAgICAgICAgIHZpZGVvLmxvYWRWaWRlbyhzdHJpcChmZWVkVXJsKSk7DQogICAgICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuU2hvd1ByZWxvYWRJbWFnZSwgKCkgPT4gew0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJibG9jayIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgfQ0KICAgIH0sIDApOw0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50Lkxvb3AsICgpID0+IHsNCiAgICBpZiAoaGFzU3RvcHBlZCkgew0KICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5KSB7DQogICAgICAgIC8vIHZpZGVvLnJlc3RhcnQoKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU3RvcCwgKCkgPT4gew0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuc3RvcFdpdGhDcmVhdGl2ZSkgew0KICAgICAgICB2aWRlby5zdG9wKCk7DQogICAgICAgIGhhc1N0b3BwZWQgPSB0cnVlOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgfQ0KfSk7DQpmdW5jdGlvbiBjcmVhdGVWaWRlbygpIHsNCiAgICBpZiAoIXZpZGVvKSB7DQogICAgICAgIHZpZGVvID0gbmV3IEJGVmlkZW8odmlkZW9FbGVtLCB2aWRlb1NldHRpbmdzLCBWaWRlb1RyYWNraW5nKTsNCiAgICB9DQp9DQpmdW5jdGlvbiBzZXRTZXR0aW5ncygpIHsNCiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHNldHRpbmdzID0gV2lkZ2V0LnByb3BlcnRpZXM7DQogICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgdmlkZW9TZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgfQ0KICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoV2lkZ2V0LnByb3BlcnRpZXMudXJsKTsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoZmVlZFVybCk7DQogICAgfQ0KICAgIGxldCBwb3N0ZXI7DQogICAgbGV0IGZhbGxiYWNrSW1hZ2U7DQogICAgaWYgKHZpZGVvU2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgIHBvc3RlciA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLnBvc3Rlcik7DQogICAgfQ0KICAgIGlmICh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgZmFsbGJhY2tJbWFnZSA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpOw0KICAgIH0NCiAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IHBvc3RlcjsNCiAgICB2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgPSBmYWxsYmFja0ltYWdlOw0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJykgew0KICAgICAgICB2aWRlb1NldHRpbmdzLmNvbnRyb2xzID0gZmFsc2U7DQogICAgICAgIHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lID0gdmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgPD0gMSA/IDEgOiB2aWRlb1NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgdmlkZW9TZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOw0KICAgICAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IG51bGw7DQogICAgfQ0KfQ0KZnVuY3Rpb24gZ2V0T3B0aW1hbEltYWdlKHNyYykgew0KICAgIHJldHVybiBXaWRnZXQuZ2V0T3B0aW1pemVkSW1hZ2VVcmwoc3JjLCB7IHdpZHRoOiBXaWRnZXQud2lkdGgsIGhlaWdodDogV2lkZ2V0LmhlaWdodCwgZml0T3B0aW9uOiBXaWRnZXQucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbC50b0xvd2VyQ2FzZSgpIH0pOw0KfQ0KZnVuY3Rpb24gc3RyaXAocykgew0KICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKTsNCiAgICB0bXAuaW5uZXJIVE1MID0gczsNCiAgICByZXR1cm4gdG1wLnRleHRDb250ZW50IHx8IHRtcC5pbm5lclRleHQgfHwgIiI7DQp9DQpmdW5jdGlvbiBjb3B5KGEpIHsNCiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7DQp9DQpmdW5jdGlvbiBCRlZpZGVvKGVsZW0sIG9wdGlvbnMsIFZpZGVvVHJhY2tpbmcpIHsNCiAgICB2YXIgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhvcHRpb25zKTsNCiAgICB2YXIgX3ZpZGVvOw0KICAgIHZhciBzZWxmID0gdGhpczsNCiAgICB2YXIgZWxCeUlkID0gZnVuY3Rpb24gKHNlbCkgew0KICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsKTsNCiAgICB9Ow0KICAgIHZhciBldmVudFF1ZXVlID0gW107DQogICAgdmFyIGRldmljZUluZm8gPSBnZXREZXZpY2VJbmZvKCk7DQogICAgdmFyIHBsYXlQcm9taXNlOw0KICAgIHZhciBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICB2YXIgdmlkZW9UcmFja2luZzsNCiAgICB2YXIgZGVmYXVsdFZpZGVvVHlwZXMgPSBbDQogICAgICAgIHsNCiAgICAgICAgICAgIGV4dGVuc2lvbjogJ21wNCcsDQogICAgICAgICAgICB0eXBlOiAndmlkZW8vbXA0Jw0KICAgICAgICB9DQogICAgXTsNCiAgICB2YXIgdG90YWxQbGF5dGltZTsNCiAgICB2YXIgdm9sdW1lID0gMDsNCiAgICB2YXIgaGFzUGxheWVkID0gZmFsc2U7DQogICAgdmFyIHJlYWR5U3RhdGUgPSAwOw0KICAgIHZhciBwbGF5ZXIgPSBlbEJ5SWQoJ3ZpZGVvLXBsYXllcicpOw0KICAgIHZhciB2aWRlb0NvbnRhaW5lciA9IGVsQnlJZCgnY29udGFpbmVyJyk7DQogICAgdmFyIHBsYXlQYXVzZU92ZXJsYXkgPSBlbEJ5SWQoJ3BsYXktcGF1c2Utb3ZlcmxheScpOw0KICAgIHZhciBwb3N0ZXIgPSBlbEJ5SWQoJ3Bvc3RlcicpOw0KICAgIC8vIEluaXRpYWxpemUgVmlkZW8gY29udHJvbHMNCiAgICB2YXIgdmlkZW9Db250cm9scyA9IGVsQnlJZCgndmlkZW8tY29udHJvbHMnKTsNCiAgICB2YXIgcGxheWJhY2sgPSBlbEJ5SWQoJ3BsYXliYWNrJyk7DQogICAgdmFyIHZvbHVtZUNvbnRhaW5lciA9IGVsQnlJZCgndm9sdW1lJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2wgPSBlbEJ5SWQoJ3ZvbHVtZS1jb250cm9sbGVyJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xWYWx1ZSA9IGVsQnlJZCgndm9sdW1lLXZhbHVlJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xUb2dnbGUgPSBlbEJ5SWQoJ3ZvbHVtZS1pY29uJyk7DQogICAgdmFyIHByb2dyZXNzID0gZWxCeUlkKCdwcm9ncmVzcycpOw0KICAgIHZhciB2aWRlb0R1cmF0aW9uID0gZWxCeUlkKCdwcm9ncmVzcy10aW1lcicpOw0KICAgIHZhciBmdWxsc2NyZWVuID0gZWxCeUlkKCdmdWxsc2NyZWVuJyk7DQogICAgdmFyIHRpbWVCYXIgPSBlbEJ5SWQoJ3RpbWVCYXInKTsNCiAgICBwbGF5YmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVG9nZ2xlUGxheVBhdXNlKTsNCiAgICB2b2x1bWVDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uVm9sdW1lRHJhZyk7DQogICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVm9sdW1lVG9nZ2xlKTsNCiAgICBwcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblRpbWVTZWVrRHJhZyk7DQogICAgZnVsbHNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUZ1bGxzY3JlZW4pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNvbnRyb2xzTW91c2VVcCk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Db250cm9sc01vdXNlRG93bik7DQogICAgdmFyIHZvbHVtZVRvZ2dsZUJ1dHRvbiA9IGVsQnlJZCgndm9sdW1lVG9nZ2xlJyk7DQogICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Wb2x1bWVUb2dnbGUpOw0KICAgIHRyeSB7DQogICAgICAgIGlmIChwbGF5ZXIpIHsNCiAgICAgICAgICAgIHBsYXllci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBsYXllcik7DQogICAgICAgICAgICBfdmlkZW8gPSBudWxsOw0KICAgICAgICB9DQogICAgICAgIGlmICghX3NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgX3NldHRpbmdzLnVybCA9ICcnOw0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1cmwuJyk7DQogICAgICAgIH0NCiAgICAgICAgLy8gU2V0IHBvc3RlciBiZWZvcmUgbG9hZGluZyB2aWRlbw0KICAgICAgICBpZiAoX3NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5wb3N0ZXIgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgJiYgZGV2aWNlSW5mby5pc01vYmlsZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvID0gY3JlYXRlVmlkZW9FbGVtZW50KF9zZXR0aW5ncy51cmwpOw0KICAgICAgICBlbGVtLmFwcGVuZENoaWxkKF92aWRlbyk7DQogICAgICAgIC8vIEltbWVkaWF0ZWx5IHNldCBmaWxsIG9wdGlvbiB0byBhdm9pZCByZXNpemluZyB0byBiZSBzZWVuDQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICAgICAgaWYgKEFkLnBhcmFtZXRlcnMuaXNPbW5pUmVuZGVyKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBvbk1ldGFMb2FkZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvblZpZGVvRW5kZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIG9uVmlkZW9QbGF5KTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgb25WaWRlb1BhdXNlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsIG9uVm9sdW1lQ2hhbmdlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAvKg0KICAgICAgICAqIFdlIHVzZSBSQUYgaW5zdGVhZCBvZiBuYXRpdmUgdGltZXVwZGF0ZSBldmVudCBvbiB0aGUgbWVkaWEgQVBJIHRvDQogICAgICAgICogZ2V0IGEgbW9yZSBhY2N1cmF0ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSB2aWRlbw0KICAgICAgICAqLw0KICAgICAgICBjb25zdCB3ID0gd2luZG93Ow0KICAgICAgICB2YXIgcmFmID0gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB3LnJlcXVlc3RBbmltYXRpb25GcmFtZQ0KICAgICAgICAgICAgICAgIHx8IHcud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgZnVuY3Rpb24gKGNiKSB7IHNldFRpbWVvdXQoY2IsIDEwMDAgLyAzMCk7IH07DQogICAgICAgIH0pKCk7DQogICAgICAgIGZ1bmN0aW9uIHRpbWVVcGRhdGUoKSB7DQogICAgICAgICAgICBvblRpbWVVcGRhdGVkKCk7DQogICAgICAgICAgICByYWYodGltZVVwZGF0ZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOw0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7DQogICAgfQ0KICAgIGNhdGNoIChlKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZS5zdGFjayk7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFVwZGF0ZXMgdmlkZW8ncyBzZXR0aW5ncw0KICAgICAqIE9ubHkgc2V0dGluZ3MgdGhhdCBhcmUgcGFzc2VkIGFyZSBjaGFuZ2VkLCByZXN0IHJlbWFpbiBwZXJzaXN0ZW50DQogICAgICogQHBhcmFtICB7fSBzZXR0aW5ncw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldFZpZGVvU2V0dGluZ3Moc2V0dGluZ3MpIHsNCiAgICAgICAgLy8gTWVyZ2UgY3VycmVudCBzZXR0aW5ncyB3aXRoIHBvdGVudGlhbCBuZXcgc2V0dGluZ3MNCiAgICAgICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgICAgIF9zZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgICAgIH0NCiAgICAgICAgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhfc2V0dGluZ3MpOw0KICAgICAgICB2aWRlb1RyYWNraW5nID0gbmV3IFZpZGVvVHJhY2tpbmcoZ2V0VXJsTWV0YShfc2V0dGluZ3MudXJsKSk7DQogICAgICAgIHRvdGFsUGxheXRpbWUgPSAoX3NldHRpbmdzLnN0YXJ0VGltZSA+PSAxICYmIF9zZXR0aW5ncy5lbmRUaW1lID49IDEpDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5lbmRUaW1lIC0gX3NldHRpbmdzLnN0YXJ0VGltZQ0KICAgICAgICAgICAgOiBfdmlkZW8uZHVyYXRpb24gLSBfc2V0dGluZ3Muc3RhcnRUaW1lOw0KICAgICAgICBpZiAoX3NldHRpbmdzLmxvb3BXaXRoQmFubmVyKSB7DQogICAgICAgICAgICBpZiAoV2lkZ2V0LmR1cmF0aW9uID4gX3ZpZGVvLmR1cmF0aW9uKSB7DQogICAgICAgICAgICAgICAgdG90YWxQbGF5dGltZSA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRvdGFsUGxheXRpbWUgPSBXaWRnZXQuZHVyYXRpb247DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIE9ubHkgc2V0IGF1dG9wbGF5IHRvIHRydWUgaWYgdGhlIGRldmljZSBzdXBwb3J0cyBwbGF5c0lubGluZSBhdHRyaWJ1dGUgYW5kIGlzIG1vYmlsZSwNCiAgICAgICAgICogYXV0b3BsYXlpbmcgaXMgb3RoZXJ3aXNlIGhhbmRsZWQgZnJvbSBvbkNhblBsYXkgdG8gZW5zdXJlIHRoYXQgdGhlIHZpZGVvIGlzIHJlYWR5IGZvciBwbGF5YmFjay4NCiAgICAgICAgICogVGhpcyBpcyB0byBwcm9wZXJseSBzaG93L2hpZGUgdGhlIHBvc3RlciB3aGlsc3QgdmlkZW8gaXMgYnVmZmVyaW5nDQogICAgICAgICAqLw0KICAgICAgICBfdmlkZW8uYXV0b3BsYXkgPSBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZQ0KICAgICAgICAgICAgPyBfc2V0dGluZ3MuYXV0b3BsYXkNCiAgICAgICAgICAgIDogZmFsc2U7DQogICAgICAgIF92aWRlby5jb250cm9scyA9IGRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5jb250cm9scw0KICAgICAgICAgICAgOiBmYWxzZTsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgc2V0Vm9sdW1lKF9zZXR0aW5ncy52b2x1bWUpOw0KICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIGF1dG9wbGF5IGFuZCB0aGVyZSdzIHZvbHVtZSB0aGVyZSdzIG5vIHBvaW50IGluIG11dGluZyB0aGUgdmlkZW8gYnkgZGVmYXVsdA0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3Mudm9sdW1lKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8ucGxheWJhY2tSYXRlID0gX3NldHRpbmdzLnBsYXliYWNrUmF0ZTsNCiAgICAgICAgLy8gVXBkYXRlIHBvc3RlciBpZiBjaGFuZ2VkDQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2ltYWdlJyAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLnBvc3RlciArICcpJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICAgICAgdXBkYXRlRE9NKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFByb3BlclVybCh1cmwpIHsNCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyhcclxufFxufFxyfFxzKS9nbSwgIiIpOw0KICAgICAgICBsZXQgdXJscyA9IHVybC5zcGxpdCgnLCcpOw0KICAgICAgICBpZiAoKHVybHMubGVuZ3RoID09PSAyICYmICF1cmwubWF0Y2goL1wuKHdlYm18bW92KS8pKSB8fCB1cmxzLmxlbmd0aCA+IDIpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh1cmxzLmxlbmd0aCA9PT0gMSAmJiAhdXJsLm1hdGNoKCcubXA0JykpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodXJscy5sZW5ndGggPT09IDIpIHsNCiAgICAgICAgICAgIGlmIChnZXREZXZpY2VJbmZvKCkuaXNTYWZhcmkpIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmxzWzBdLm1hdGNoKCcubW92JykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHVybCA9IHVybHNbMF0ubWF0Y2goJy53ZWJtJykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpbnN0cnVjdGlvbnMuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICByZXR1cm4gdXJsOw0KICAgIH0NCiAgICBmdW5jdGlvbiBjcmVhdGVWaWRlb0VsZW1lbnQodXJsKSB7DQogICAgICAgIHVybCA9IGdldFByb3BlclVybCh1cmwpOw0KICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHZhciB1ID0gZ2V0VXJsTWV0YSh1cmwpOw0KICAgICAgICBjb25zdCB2aWRlb1R5cGUgPSBnZXRWaWRlb1R5cGVBbmRVcGRhdGVTb3VyY2VVcmwodSk7DQogICAgICAgIHZhciB1cmxTcmMgPSB1LnNvdXJjZVVybDsNCiAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gdS5wYXJhbXM7DQogICAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgIHZpZGVvLmlkID0gJ3ZpZGVvLXBsYXllcic7DQogICAgICAgIHZpZGVvLnByZWxvYWQgPSAnbWV0YWRhdGEnOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICcnKTsNCiAgICAgICAgLy8gTXV0ZWQgaXMgc2V0IGhlcmUgaW5zdGVhZCBvZiBzZXRWaWRlb1NldHRpbmcgdG8gcHJldmVudCBpdCB0byBiZSBtdXRlZCB3aGVuIG5vdCB3YW50ZWQNCiAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlOw0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpIGluIHZpZGVvVHlwZSkgew0KICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW2ldLmV4dGVuc2lvbiArIHF1ZXJ5UGFyYW1zOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoInR5cGUiLCB2aWRlb1R5cGVbaV0udHlwZSk7DQogICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmlkZW87DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KSB7DQogICAgICAgIGxldCB2aWRlb1R5cGU7DQogICAgICAgIGlmICh1LmV4dC5tYXRjaCgvKHdlYm18bW92KS8pKSB7DQogICAgICAgICAgICBpZiAoZ2V0RGV2aWNlSW5mbygpLmlzU2FmYXJpKSB7DQogICAgICAgICAgICAgICAgdmlkZW9UeXBlID0gW3sNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogJ21vdicsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vcXVpY2t0aW1lJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZpZGVvVHlwZSA9IFt7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246ICd3ZWJtJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB2aWRlb1R5cGU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZpZGVvVHlwZXM7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdXBkYXRlRE9NKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIWRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlKSB7DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3RhcnRUaW1lID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdtb2JpbGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5jb250cm9scyAmJiAhX3NldHRpbmdzLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ICE9PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICB9DQogICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzBdLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnBsYXlQYXVzZUJ1dHRvblNpemUgKyAnJSc7DQogICAgICAgIHBsYXlQYXVzZU92ZXJsYXkucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUud2lkdGggPSBfc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSArICclJzsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5jb250cm9scyAmJiAhZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW9Db250cm9scy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2aWRlb0NvbnRyb2xzLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gX3NldHRpbmdzLnBsYXllckJhY2tncm91bmQ7DQogICAgICAgIF92aWRlby5zdHlsZS5maWx0ZXIgPSAnZ3JheXNjYWxlKCcgKyBfc2V0dGluZ3MuZ3JheVNjYWxlICsgJyUpJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLnRvcCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCArICclJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmxlZnQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ICsgJyUnOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uc3R5bGUud2lkdGggPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5xdWVyeVNlbGVjdG9yQWxsKCdzdmcnKVswXS5zdHlsZS5maWxsID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbkNvbG9yOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24ucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUuZmlsbCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSArPSAiaW1hZ2VHZW5lcmF0b3JNb2RlIjsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwwLDAsMCknOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICB9DQogICAgZnVuY3Rpb24gc2V0RmlsbE9wdGlvbigpIHsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5iYWNrZ3JvdW5kRmlsbCA9PT0gJ0NvdmVyJykgew0KICAgICAgICAgICAgcG9zdGVyLmNsYXNzTmFtZSA9ICdjb3Zlcic7DQogICAgICAgICAgICAoX3ZpZGVvLnZpZGVvSGVpZ2h0IC8gX3ZpZGVvLnZpZGVvV2lkdGgpIDw9ICh2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyB2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCkNCiAgICAgICAgICAgICAgICA/IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteCcNCiAgICAgICAgICAgICAgICA6IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwb3N0ZXIuY2xhc3NOYW1lID0gJyc7DQogICAgICAgICAgICBfdmlkZW8uY2xhc3NOYW1lID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5wb3N0ZXIpIHsNCiAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHJlc3RhcnRWaWRlbygpIHsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgLy8gaWYoX3NldHRpbmdzLmxvb3Apew0KICAgICAgICBwbGF5VmlkZW8oKTsNCiAgICAgICAgLy8gfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRSZWFkeVN0YXRlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnJlYWR5U3RhdGUgPiByZWFkeVN0YXRlKSB7DQogICAgICAgICAgICByZWFkeVN0YXRlID0gX3ZpZGVvLnJlYWR5U3RhdGU7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gcGxheVZpZGVvKGZvcmNlUGxheSkgew0KICAgICAgICAvKg0KICAgICAgICAgKiBDaGVjayBpZiB0aGUgdmlkZW8gaXMgcGxheWFibGUsIG90aGVyd2lzZSBhZGQgaXQgdG8gdGhlIGV2ZW50UXVldWUgd2hpY2gNCiAgICAgICAgICogdHJpZ2dlcnMgcGxheSBvbiBvbkNhblBsYXkgd2hpY2ggaXMgd2hlbiB2aWRlbyBpcyBwbGF5YWJsZQ0KICAgICAgICAgKi8NCiAgICAgICAgc2V0UmVhZHlTdGF0ZSgpOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkgfHwgaGFzUGxheWVkKSB7DQogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDE1MCk7DQogICAgICAgIGlmICgocmVhZHlTdGF0ZSA+PSAzICYmIF9zZXR0aW5ncy5hdXRvcGxheSkgfHwgaGFzUGxheWVkIHx8IGZvcmNlUGxheSkgew0KICAgICAgICAgICAgaWYgKF92aWRlby52b2x1bWUgPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSBfdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGRldmljZUluZm8uaXNNb2JpbGUgJiYgIWRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycgJiYgX3NldHRpbmdzLnBvc3RlciA/ICdibG9jaycgOiAnbm9uZSc7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiBfc2V0dGluZ3MucG9zdGVyID8gJ25vbmUnIDogJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmNvbnRyb2xzICYmICFfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGV2ZW50UXVldWUucHVzaCgncGxheScpOw0KICAgICAgICAgICAgaWYgKHZpZGVvVHJhY2tpbmcpIHsNCiAgICAgICAgICAgICAgICB2aWRlb1RyYWNraW5nLnN0YXJ0ZWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZWVrVG8ocykgew0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IHM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHBhdXNlVmlkZW8oKSB7DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkICYmICFwZW5kaW5nUGF1c2UpIHsNCiAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICBfdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgfQ0KICAgICAgICBwZW5kaW5nUGF1c2UgPSB0cnVlOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzdG9wVmlkZW8oKSB7DQogICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldFZvbHVtZSh2b2x1bWUpIHsNCiAgICAgICAgX3ZpZGVvLnZvbHVtZSA9IGRldmljZUluZm8uaXNNb2JpbGUgPyAwIDogdG9GcmFjdGlvbnModm9sdW1lKTsNCiAgICAgICAgLy8gQmFubmVyRmxvdy5yYWlzZUV2ZW50KCd2b2x1bWVDaGFuZ2VkJywgX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvZ2dsZU11dGUobXV0ZSkgew0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIF92aWRlby5tdXRlZCA9ICh0eXBlb2YgbXV0ZSA9PT0gJ2Jvb2xlYW4nKSA/IG11dGUgOiAhX3ZpZGVvLm11dGVkOw0KICAgICAgICAvLyBCYW5uZXJGbG93LnJhaXNlRXZlbnQoJ3ZvbHVtZUNoYW5nZWQnLCBfdmlkZW8ubXV0ZWQgPyAwIDogX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGxvYWRWaWRlbyh1cmwpIHsNCiAgICAgICAgdXJsID0gZ2V0UHJvcGVyVXJsKHVybCk7DQogICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdXJsID0gZ2V0QWRqdXN0ZWRVcmwodXJsKTsNCiAgICAgICAgdmFyIHUgPSBnZXRVcmxNZXRhKHVybCk7DQogICAgICAgIGNvbnN0IHZpZGVvVHlwZSA9IGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KTsNCiAgICAgICAgdmFyIHVybFNyYyA9IHUuc291cmNlVXJsOw0KICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB1LnBhcmFtczsNCiAgICAgICAgLy8gVXBkYXRlIHNvdXJjZXMNCiAgICAgICAgZm9yICh2YXIgdnQgaW4gdmlkZW9UeXBlKSB7DQogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NvdXJjZScpW3Z0XTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW3Z0XS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgY3VycmVudFZvbHVtZSA9IF92aWRlby52b2x1bWU7DQogICAgICAgIF92aWRlby5sb2FkKCk7DQogICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGF1c2VWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIHNldFZpZGVvU2V0dGluZ3MoeyB1cmw6IHVybCB9KTsNCiAgICAgICAgc2V0Vm9sdW1lKGN1cnJlbnRWb2x1bWUpOw0KICAgIH0NCiAgICBmdW5jdGlvbiB0b2dnbGVQbGF5UGF1c2VCdXR0b24oKSB7DQogICAgICAgIGlmIChfdmlkZW8ucGF1c2VkKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5wYXVzZWQgfHwgX3ZpZGVvLmVuZGVkKSB7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gZ2V0VXJsTWV0YSh1cmwpIHsNCiAgICAgICAgdmFyIG8gPSB7fTsNCiAgICAgICAgLy8gaWYoIXZhbGlkYXRlVXJsKHVybCkpew0KICAgICAgICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWQgbm90IHJlY2VpdmUgYSB2YWxpZCBVUkwuJyk7DQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKHVybCAmJiB1cmwubGVuZ3RoKSB7DQogICAgICAgICAgICBvLnVybCA9IHVybC5zcGxpdCgnPycpWzBdOw0KICAgICAgICAgICAgby5zb3VyY2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXS5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCIuIikpOw0KICAgICAgICAgICAgby5wYXJhbXMgPSB1cmwuaW5kZXhPZignPycpICE9IC0xID8gJz8nICsgdXJsLnNwbGl0KCc/JylbMV0gOiAnJzsNCiAgICAgICAgICAgIG8uZXh0ID0gdXJsLnNwbGl0KCc/JylbMF0uc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZigiLiIpICsgMSkgfHwgJyc7DQogICAgICAgICAgICBvLmZpbGVuYW1lID0gdXJsLm1hdGNoKC8oW14vXSskKS8sICcnKVswXS5zcGxpdCgnPycpWzBdOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBvOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV2ZW50IGhhbmRsZXJzDQogICAgKi8NCiAgICBmdW5jdGlvbiBvbk1ldGFMb2FkZWQoKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF9zZXR0aW5ncy5zdGFydFRpbWUgPSBfc2V0dGluZ3Muc3RhcnRUaW1lIDw9IF92aWRlby5kdXJhdGlvbiA/IF9zZXR0aW5ncy5zdGFydFRpbWUgOiAwOw0KICAgICAgICBzZXRWaWRlb1NldHRpbmdzKF9zZXR0aW5ncyk7DQogICAgICAgIHRpbWVVcGRhdGUoKTsNCiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gb25DYW5QbGF5KCkgew0KICAgICAgICBlbEJ5SWQoJ2luc3RydWN0aW9ucycpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgLy8gaWYoIWhhc1BsYXllZCAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICAvLyAgICAgVGltZWxpbmUucmVzdGFydCgpOw0KICAgICAgICAvLyB9DQogICAgICAgIGlmIChvbkxvYWRlZFByb21pc2VSZXNvbHZlcikgew0KICAgICAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIoKTsNCiAgICAgICAgfQ0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIGZvciAodmFyIGkgaW4gZXZlbnRRdWV1ZSkgew0KICAgICAgICAgICAgX3ZpZGVvW2V2ZW50UXVldWVbaV1dKCk7DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGV2ZW50UXVldWVbaV0gPT09ICdwbGF5JyAmJiBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlUGxheVBhdXNlQnV0dG9uKCk7DQogICAgICAgIGlmIChyZWFkeVN0YXRlID49IDMgfHwgIV92aWRlby5wYXVzZWQpIHsNCiAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVVcGRhdGVkKCkgew0KICAgICAgICBpZiAoIV92aWRlbykgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICghdGltZUJhci5zdHlsZS53aWR0aCkgew0KICAgICAgICAgICAgdGltZUJhci5zdHlsZS53aWR0aCA9IF92aWRlby5kdXJhdGlvbiArICclJzsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZCgoX3ZpZGVvLmN1cnJlbnRUaW1lIC8gX3ZpZGVvLmR1cmF0aW9uKSAqIDEwMCkgKyAnJSc7DQogICAgICAgIGlmICh2aWRlb0R1cmF0aW9uLmlubmVySFRNTC5zcGxpdCgnLycpWzBdLnRyaW0oKSAhPT0gZm9ybWF0VGltZShfdmlkZW8uY3VycmVudFRpbWUpKSB7DQogICAgICAgICAgICB2aWRlb0R1cmF0aW9uLmlubmVySFRNTCA9IGZvcm1hdFRpbWUoX3ZpZGVvLmN1cnJlbnRUaW1lKSArICcgLyAnICsgZm9ybWF0VGltZShfdmlkZW8uZHVyYXRpb24pOw0KICAgICAgICB9DQogICAgICAgIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuOTUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC45NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuY29tcGxldGVkKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gQ2hlY2sgaWYgcmVhY2hlZCB0aGlyZCBxdWFydGlsZSAoNzUlKQ0KICAgICAgICBlbHNlIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuNzUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC43NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcudHEoKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBDaGVjayBpZiByZWFjaGVkIG1pZHBvaW50ICg1MCUpDQogICAgICAgIGVsc2UgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC41MCAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjUwICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgdmlkZW9UcmFja2luZy5tcCgpOw0KICAgICAgICB9DQogICAgICAgIC8vIENoZWNrIGlmIHJlYWNoZWQgZmlyc3QgcXVhcnRpbGUgKDI1JSkNCiAgICAgICAgZWxzZSBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49IHRvdGFsUGxheXRpbWUgKiAwLjI1IC0gMSAmJiBfdmlkZW8uY3VycmVudFRpbWUgPD0gdG90YWxQbGF5dGltZSAqIDAuMjUgKyAxICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7DQogICAgICAgICAgICB2aWRlb1RyYWNraW5nLmZxKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSAoKF9zZXR0aW5ncy5lbmRUaW1lICYmIF9zZXR0aW5ncy5lbmRUaW1lIDwgX3ZpZGVvLmR1cmF0aW9uKSA/IF9zZXR0aW5ncy5lbmRUaW1lIDogX3ZpZGVvLmR1cmF0aW9uKSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgb25WaWRlb0VuZGVkKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25WaWRlb0VuZGVkKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5sb29wKSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXN0YXJ0VmlkZW8oKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGxheSgpIHsNCiAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGF1c2UoKSB7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZvbHVtZUNoYW5nZSgpIHsNCiAgICAgICAgdm9sdW1lQ29udHJvbFZhbHVlLnN0eWxlLndpZHRoID0gIV92aWRlby5tdXRlZCA/IF92aWRlby52b2x1bWUgKiAxMDAgKyAnJScgOiAnMCc7DQogICAgICAgIGlmIChfdmlkZW8udm9sdW1lID09PSAwIHx8IF92aWRlby5tdXRlZCkgew0KICAgICAgICAgICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5jbGFzc05hbWUgPSAnbXV0ZWQnOw0KICAgICAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9ICdtdXRlZCc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2b2x1bWVDb250cm9sVG9nZ2xlLmNsYXNzTmFtZSA9ICd1bm11dGVkJzsNCiAgICAgICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSAndW5tdXRlZCc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25DbGljayhldmVudCkgew0KICAgICAgICB2YXIgY2xpY2tPblBsYXlQYXVzZUJ1dHRvbiA9IGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldDsNCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBjbGlja09uUGxheVBhdXNlQnV0dG9uKSB7DQogICAgICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCkgew0KICAgICAgICAgICAgICAgIHRvZ2dsZU11dGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIHBsYXlWaWRlbyh0cnVlKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgQ3JlYXRpdmUub3BlbihldmVudCwgdW5kZWZpbmVkKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKg0KICAgICoqIFZpZGVvIGNvbnRyb2xzDQogICAgKi8NCiAgICB2YXIgdm9sdW1lRHJhZyA9IGZhbHNlOw0KICAgIHZhciB0aW1lRHJhZyA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIG9uVG9nZ2xlUGxheVBhdXNlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCB8fCBfdmlkZW8uZW5kZWQpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICAgICAgdXNlckluaXRpYXRlZFBhdXNlID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB2b2x1bWVEcmFnID0gdHJ1ZTsNCiAgICAgICAgdXBkYXRlVm9sdW1lKGUucGFnZVgpOw0KICAgIH0NCiAgICA7DQogICAgZnVuY3Rpb24gdXBkYXRlVm9sdW1lKHgpIHsNCiAgICAgICAgdmFyIG1heFZvbHVtZSA9IDE7DQogICAgICAgIHZhciBwb3NpdGlvbiA9IHggLSB2b2x1bWVDb250YWluZXIub2Zmc2V0TGVmdCAtIHZvbHVtZUNvbnRyb2wub2Zmc2V0TGVmdCAtIDI7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyB2b2x1bWVDb250cm9sLm9mZnNldFdpZHRoOw0KICAgICAgICBpZiAocGVyY2VudGFnZSA+IDEwMCkgew0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IDEwMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocGVyY2VudGFnZSA8IDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAwOw0KICAgICAgICB9DQogICAgICAgIHNldFZvbHVtZShtYXhWb2x1bWUgKiBwZXJjZW50YWdlIC8gMTAwKTsNCiAgICAgICAgdm9sdW1lID0gX3ZpZGVvLnZvbHVtZTsNCiAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgIG9uVm9sdW1lQ2hhbmdlKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lVG9nZ2xlKCkgew0KICAgICAgICBfdmlkZW8ubXV0ZWQgPSAhX3ZpZGVvLm11dGVkOw0KICAgICAgICBvblZvbHVtZUNoYW5nZSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVTZWVrRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB0aW1lRHJhZyA9IHRydWU7DQogICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNvbnRyb2xzTW91c2VVcChlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB2b2x1bWVEcmFnID0gZmFsc2U7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB0aW1lRHJhZyA9IGZhbHNlOw0KICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3NiYXIoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25Db250cm9sc01vdXNlRG93bihlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVQcm9ncmVzc2JhcihlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzc2Jhcih4KSB7DQogICAgICAgIHZhciBtYXhkdXJhdGlvbiA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgdmFyIHBvc2l0aW9uID0geCAtIHByb2dyZXNzLm9mZnNldExlZnQ7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyBwcm9ncmVzcy5vZmZzZXRXaWR0aDsNCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPiAxMDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAxMDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPCAwKSB7DQogICAgICAgICAgICBwZXJjZW50YWdlID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gcGVyY2VudGFnZSArICclJzsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gbWF4ZHVyYXRpb24gKiBwZXJjZW50YWdlIC8gMTAwOw0KICAgIH0NCiAgICBjb25zdCBkb2MgPSBkb2N1bWVudDsNCiAgICAvLyBGdWxsc2NyZWVuDQogICAgdmFyIGZ1bGxTY3JlZW5FbmFibGVkID0gISEoZG9jLmZ1bGxzY3JlZW5FbmFibGVkDQogICAgICAgIHx8IGRvYy5tb3pGdWxsU2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2MubXNGdWxsc2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2Mud2Via2l0U3VwcG9ydHNGdWxsc2NyZWVuDQogICAgICAgIHx8IGRvYy53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCk7DQogICAgaWYgKCFmdWxsU2NyZWVuRW5hYmxlZCkgew0KICAgICAgICBmdWxsc2NyZWVuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGhhbmRsZUZ1bGxzY3JlZW4oKSB7DQogICAgICAgIGlmIChpc0Z1bGxTY3JlZW4oKSkgew0KICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmIChkb2MubW96Q2FuY2VsRnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICBkb2MubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4pDQogICAgICAgICAgICAgICAgZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGRvYy5tc0V4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvYy5tc0V4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YShmYWxzZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZiAodmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4pDQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKQ0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmICh2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmlkZW9Db250YWluZXIubXNSZXF1ZXN0RnVsbHNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSh0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0Z1bGxTY3JlZW4oKSB7DQogICAgICAgIHJldHVybiAhIShkb2MuZnVsbFNjcmVlbiB8fCBkb2Mud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvYy5tb3pGdWxsU2NyZWVuIHx8IGRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldEZ1bGxzY3JlZW5EYXRhKHN0YXRlKSB7DQogICAgICAgIHZpZGVvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1mdWxsc2NyZWVuJywgJycgKyAhIXN0YXRlKTsNCiAgICAgICAgc3RhdGUgPyB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmdWxsc2NyZWVuJykgOiB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7DQogICAgfQ0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhKGRvYy5mdWxsU2NyZWVuIHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCkpOw0KICAgIH0pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhZG9jLndlYmtpdElzRnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISFkb2MubW96RnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSghIWRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCiAgICB9KTsNCiAgICAvKg0KICAgICoqIFV0aWxzDQogICAgKi8NCiAgICBmdW5jdGlvbiBnZXREZXZpY2VJbmZvKCkgew0KICAgICAgICB2YXIgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xTYW1zdW5nQnJvd3NlcnxpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgICAgIHZhciBpc0FuZHJvaWQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImFuZHJvaWQiKSA+IC0xOw0KICAgICAgICB2YXIgaXNTYW1zdW5nQnJvd3NlciA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhbXN1bmdCcm93c2VyL2kpIHx8IGZhbHNlOw0KICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOw0KICAgICAgICB2YXIgaXNJb3MgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NU1N0cmVhbSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG1hdGNoID0gKG5hdmlnYXRvci5hcHBWZXJzaW9uKS5tYXRjaCgvT1MgKFxkKylfKFxkKylfPyhcZCspPy8pLCB2ZXJzaW9uOw0KICAgICAgICAgICAgaWYgKG1hdGNoICE9PSB1bmRlZmluZWQgJiYgbWF0Y2ggIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gWw0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsxXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsyXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFszXSB8fCAwLCAxMCkNCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZlcnNpb24uam9pbignLicpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KSgpOw0KICAgICAgICB2YXIgY2FuUGxheUlubGluZSA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgICAgICB2Lm11dGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHYucGxheSgpOw0KICAgICAgICAgICAgcmV0dXJuICF2LnBhdXNlZCB8fCAoJ3BsYXlzSW5saW5lJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpKTsNCiAgICAgICAgfSkoKTsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlzTW9iaWxlOiBpc01vYmlsZSwNCiAgICAgICAgICAgIGlzQW5kcm9pZDogaXNBbmRyb2lkLA0KICAgICAgICAgICAgaXNTYW1zdW5nQnJvd3NlcjogaXNTYW1zdW5nQnJvd3NlciwNCiAgICAgICAgICAgIGlzU2FmYXJpOiBpc1NhZmFyaSwNCiAgICAgICAgICAgIGlzSW9zOiBpc0lvcywNCiAgICAgICAgICAgIGNhblBsYXlJbmxpbmU6IGNhblBsYXlJbmxpbmUNCiAgICAgICAgfTsNCiAgICB9DQogICAgZnVuY3Rpb24gZGVzZXJpYWxpemVTZXR0aW5ncyhzZXR0aW5ncykgew0KICAgICAgICB2YXIgcyA9IHt9Ow0KICAgICAgICAvLyBWaWRlbyBzZXR0aW5ncy9wcm9wZXJ0aWVzDQogICAgICAgIHMudXJsID0gc2V0dGluZ3MudXJsOw0KICAgICAgICBzLmF1dG9wbGF5ID0gc2V0dGluZ3MuYXV0b3BsYXk7DQogICAgICAgIHMubG9vcCA9IHNldHRpbmdzLmxvb3A7DQogICAgICAgIHMuY29udHJvbHMgPSBzZXR0aW5ncy5jb250cm9sczsNCiAgICAgICAgcy52b2x1bWUgPSBzZXR0aW5ncy52b2x1bWUgfHwgMDsNCiAgICAgICAgcy5zdGFydFRpbWUgPSBzZXR0aW5ncy5zdGFydFRpbWUgfHwgMDsNCiAgICAgICAgcy5lbmRUaW1lID0gc2V0dGluZ3MuZW5kVGltZTsNCiAgICAgICAgcy5wbGF5YmFja1JhdGUgPSAocGFyc2VGbG9hdChzZXR0aW5ncy5wbGF5YmFja1JhdGUpIHx8IDEpOw0KICAgICAgICBzLnBvc3RlciA9IGdldEFkanVzdGVkVXJsKHNldHRpbmdzLnBvc3RlciB8fCAnJyk7DQogICAgICAgIC8vIFNwZWNpYWwgc2V0dGluZ3MNCiAgICAgICAgcy5wbGF5ZXJCYWNrZ3JvdW5kID0gc2V0dGluZ3MucGxheWVyQmFja2dyb3VuZDsNCiAgICAgICAgcy5ncmF5U2NhbGUgPSBzZXR0aW5ncy5ncmF5U2NhbGU7DQogICAgICAgIHMubG9vcFdpdGhCYW5uZXIgPSBzZXR0aW5ncy5sb29wV2l0aEJhbm5lcjsNCiAgICAgICAgcy5zdG9wV2l0aENyZWF0aXZlID0gc2V0dGluZ3Muc3RvcFdpdGhDcmVhdGl2ZTsNCiAgICAgICAgcy5iYWNrZ3JvdW5kRmlsbCA9IHNldHRpbmdzLmJhY2tncm91bmRGaWxsOw0KICAgICAgICBzLmZhbGxiYWNrSW1hZ2UgPSBnZXRBZGp1c3RlZFVybChzZXR0aW5ncy5mYWxsYmFja0ltYWdlIHx8ICcnKTsNCiAgICAgICAgcy5wbGF5UGF1c2VCdXR0b25TaXplID0gc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSB8fCA0MDsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b24gPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b247DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemU7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3IgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uVG9wIHx8IDA7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0IHx8IDA7DQogICAgICAgIHJldHVybiBzOw0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0luTG9jYWxFbnZpcm9ubWVudCgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmICghd2luZG93KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHdpbmRvdy50b3AubG9jYXRpb24ucHJvdG9jb2wgPT09ICdmaWxlOicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHZhbGlkYXRlVXJsKHMpIHsNCiAgICAgICAgaWYgKCFpbkJmKCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAvXig/Oig/Omh0dHBzP3xmdHApOlwvXC8pPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKSkoPzo6XGR7Miw1fSk/KD86XC9cUyopPyQvLnRlc3Qocyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGluQmYoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBsZXQgdyA9IHdpbmRvdzsNCiAgICAgICAgICAgIC8vIEFzIGxvbmcgYXMgYSBwYXJlbnQgZXhpc3RzDQogICAgICAgICAgICB3aGlsZSAody5wYXJlbnQgJiYgdyAhPT0gdy5wYXJlbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICB3LnBhcmVudC5sb2NhdGlvbi5ocmVmOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXcucGFyZW50LmRvY3VtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB3ID0gdy5wYXJlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAhIXcubG9jYXRpb24ub3JpZ2luLm1hdGNoKC9iYW5uZXJmbG93fGxvY2FsaG9zdC8pIHx8ICEhd2luZG93LnRvcC5sb2NhdGlvbi5vcmlnaW4ubWF0Y2goL2Jhbm5lcmZsb3d8bG9jYWxob3N0Lyk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKF9hKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdG9GcmFjdGlvbnMobikgew0KICAgICAgICByZXR1cm4gbiA8IDEgPyBuDQogICAgICAgICAgICA6IG4gPiAxMDAgPyAxDQogICAgICAgICAgICAgICAgOiAhbiA/IDANCiAgICAgICAgICAgICAgICAgICAgOiBuIC8gMTAwOw0KICAgIH0NCiAgICBmdW5jdGlvbiBmb3JtYXRUaW1lKHQpIHsNCiAgICAgICAgcmV0dXJuIHQgPyAodCAtICh0ICU9IDYwKSkgLyA2MCArICg5LjUgPCB0ID8gJzonIDogJzowJykgKyBNYXRoLnJvdW5kKHQpIDogJzA6MDAnOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV4cG9zZQ0KICAgICovDQogICAgdGhpcy5zZXRWaWRlb1NldHRpbmdzID0gc2V0VmlkZW9TZXR0aW5nczsNCiAgICB0aGlzLmdldFZpZGVvU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfc2V0dGluZ3M7IH07DQogICAgdGhpcy5zZXRGaWxsT3B0aW9uID0gc2V0RmlsbE9wdGlvbjsNCiAgICB0aGlzLnBsYXkgPSBwbGF5VmlkZW87DQogICAgdGhpcy5yZXN0YXJ0ID0gcmVzdGFydFZpZGVvOw0KICAgIHRoaXMucGF1c2UgPSBwYXVzZVZpZGVvOw0KICAgIHRoaXMuc3RvcCA9IHN0b3BWaWRlbzsNCiAgICB0aGlzLmxvYWRWaWRlbyA9IGxvYWRWaWRlbzsNCiAgICB0aGlzLnNldFZvbHVtZSA9IHNldFZvbHVtZTsNCiAgICB0aGlzLnRvZ2dsZU11dGUgPSB0b2dnbGVNdXRlOw0KICAgIHRoaXMuc2Vla1RvID0gc2Vla1RvOw0KICAgIHRoaXMudmlkZW8gPSBfdmlkZW87DQogICAgdGhpcy5wb3N0ZXIgPSBwb3N0ZXI7DQp9DQpmdW5jdGlvbiBnZXRBZGp1c3RlZFVybCh0ZXh0KSB7DQogICAgbGV0IHVybCA9IHRleHQNCiAgICAgICAgLnJlcGxhY2UoL3ZpZGVvLmJhbm5lcmZsb3cuY29tL2csICdjLmJhbm5lcmZsb3cubmV0L2JmLXZpZGVvcycpDQogICAgICAgIC5yZXBsYWNlKC8oXHJcbnxcbnxccnxccykvZ20sICcnKTsNCiAgICBpZiAoQWQuY3VzdG9tRG9tYWluKSB7DQogICAgICAgIC8vIFJlbW92ZSBodHRwfHMgcmVwbGFjZW1lbnQgd2hlbiBBZC5jdXN0b21Eb21haW4gb25seSBnaXZlcyB0aGUgZG9tYWluDQogICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdjLmJhbm5lcmZsb3cubmV0JywgQWQuY3VzdG9tRG9tYWluLnJlcGxhY2UoLyhodHRwfGh0dHBzKTpcL1wvLywgJycpKTsNCiAgICB9DQogICAgcmV0dXJuIHVybDsNCn0NCmZ1bmN0aW9uIFZpZGVvVHJhY2tpbmcob3B0aW9ucykgew0KICAgIC8qDQogICAgKiogIFRoaXMgbWV0aG9kIGJ1YmJsZXMgdXAgZXZlbnRzIHRvIHRoZSBCYW5uZXIvQ3VzdG9tIHNjcmlwdA0KICAgICoqICBhbmQgaXMgdXNlZCB0byBzZW5kIHZpZGVvIHRyYWNraW5nIGV2ZW50cw0KICAgICovDQogICAgdmFyIHVybCA9IG9wdGlvbnMudXJsOw0KICAgIHZhciBmaWxlbmFtZSA9IG9wdGlvbnMuZmlsZW5hbWU7DQogICAgLy8gT25jZSBwZXIgdmlldyA9IE9QVg0KICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgaXNJbml0ID0gZmFsc2UsIC8vIE9QVg0KICAgIHN0YXJ0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgcmVhY2hlZEZRID0gZmFsc2UsIC8vIE9QVg0KICAgIHJlYWNoZWRNUCA9IGZhbHNlLCAvLyBPUFYNCiAgICByZWFjaGVkVFEgPSBmYWxzZTsgLy8gT1BWDQogICAgLy8gVmlkZW8gaW5pdGlhbGl6ZWQgDQogICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoaXNJbml0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBpc0luaXQgPSB0cnVlOw0KICAgIH07DQogICAgLy8gVmlkZW8gc3RhcnRlZCBvciBwbGF5aW5nIGZyb20gYmVnaW5uaW5nIGFnYWluDQogICAgdGhpcy5zdGFydGVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIGlmIChzdGFydGVkKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMCB9KTsNCiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBGaXJzdCBRdWFydGlsZQ0KICAgIHRoaXMuZnEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkRlEgfHwgIXN0YXJ0ZWQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC4yNSB9KTsNCiAgICAgICAgcmVhY2hlZEZRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIE1pZHBvaW50DQogICAgdGhpcy5tcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHJlYWNoZWRNUCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjUgfSk7DQogICAgICAgIHJlYWNoZWRNUCA9IHRydWU7DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBUaGlyZCBxdWFydGlsZQ0KICAgIHRoaXMudHEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkVFEpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC43NSB9KTsNCiAgICAgICAgcmVhY2hlZFRRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIGhhcyBjb21wbGV0ZWQNCiAgICB0aGlzLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKGhhc0NvbXBsZXRlZCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAxIH0pOw0KICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlOw0KICAgIH07DQp9DQppZiAoIUFycmF5LnByb3RvdHlwZS5maW5kKSB7DQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2ZpbmQnLCB7DQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAocHJlZGljYXRlKSB7DQogICAgICAgICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLg0KICAgICAgICAgICAgaWYgKHRoaXMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ0aGlzIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTsNCiAgICAgICAgICAgIC8vIDIuIExldCBsZW4gYmUgPyBUb0xlbmd0aCg/IEdldChPLCAibGVuZ3RoIikpLg0KICAgICAgICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwOw0KICAgICAgICAgICAgLy8gMy4gSWYgSXNDYWxsYWJsZShwcmVkaWNhdGUpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uDQogICAgICAgICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIDQuIElmIHRoaXNBcmcgd2FzIHN1cHBsaWVkLCBsZXQgVCBiZSB0aGlzQXJnOyBlbHNlIGxldCBUIGJlIHVuZGVmaW5lZC4NCiAgICAgICAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdOw0KICAgICAgICAgICAgLy8gNS4gTGV0IGsgYmUgMC4NCiAgICAgICAgICAgIHZhciBrID0gMDsNCiAgICAgICAgICAgIC8vIDYuIFJlcGVhdCwgd2hpbGUgayA8IGxlbg0KICAgICAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHsNCiAgICAgICAgICAgICAgICAvLyBhLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS4NCiAgICAgICAgICAgICAgICAvLyBiLiBMZXQga1ZhbHVlIGJlID8gR2V0KE8sIFBrKS4NCiAgICAgICAgICAgICAgICAvLyBjLiBMZXQgdGVzdFJlc3VsdCBiZSBUb0Jvb2xlYW4oPyBDYWxsKHByZWRpY2F0ZSwgVCwgwqsga1ZhbHVlLCBrLCBPIMK7KSkuDQogICAgICAgICAgICAgICAgLy8gZC4gSWYgdGVzdFJlc3VsdCBpcyB0cnVlLCByZXR1cm4ga1ZhbHVlLg0KICAgICAgICAgICAgICAgIHZhciBrVmFsdWUgPSBvW2tdOw0KICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCBrVmFsdWUsIGssIG8pKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBrVmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGUuIEluY3JlYXNlIGsgYnkgMS4NCiAgICAgICAgICAgICAgICBrKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyA3LiBSZXR1cm4gdW5kZWZpbmVkLg0KICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgfQ0KICAgIH0pOw0KfQ0K",customProperties:[{label:"Url",name:"url",unit:"text",value:"{\"text\":\"https://productsup.melia.com/production/letra_B_150px.mp4\",\"styles\":[{\"type\":\"word\",\"length\":57,\"position\":0,\"styleIds\":[]}]}",versionPropertyId:"83c98992-54cd-4340-923a-38d866d52767"},{label:"Use feed",name:"useFeed",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Feed",name:"dynamicContent",unit:"feed",value:"  1 1 loop  text",versionPropertyId:undefined},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"2f52f66b-c195-4f44-8eef-15a3441a6501"},{label:"Feed index",name:"feedIndex",unit:"number",value:1,versionPropertyId:undefined},{label:"Static index",name:"staticIndex",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Autoplay",name:"autoplay",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Controls",name:"controls",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop",name:"loop",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithBanner",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Volume toggle button",name:"volumeToggleButton",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Volume",name:"volume",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button color",name:"volumeToggleButtonColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Volume button size",name:"volumeToggleButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button left",name:"volumeToggleButtonPositionLeft",unit:"number",value:5,versionPropertyId:undefined},{label:"Volume button top",name:"volumeToggleButtonPositionTop",unit:"number",value:5,versionPropertyId:undefined},{label:"Play/Pause button size",name:"playPauseButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Start time",name:"startTime",unit:"number",value:0,versionPropertyId:undefined},{label:"End time",name:"endTime",unit:"number",value:0,versionPropertyId:undefined},{label:"Preload image",name:"fallbackImage",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Poster",name:"poster",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Fill",name:"backgroundFill",unit:"select",value:"W3sidmFsdWUiOiJDb3ZlciIsInNlbGVjdGVkIjp0cnVlfSx7InZhbHVlIjoiQ29udGFpbiIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Playback rate",name:"playbackRate",unit:"select",value:"W3sidmFsdWUiOiIxIiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiIwLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMC41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjAuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIxLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMS41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjEuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIyIiwic2VsZWN0ZWQiOmZhbHNlfV0=",versionPropertyId:undefined},{label:"Gray Scale",name:"grayScale",unit:"number",value:0,versionPropertyId:undefined},{label:"Player background",name:"playerBackground",unit:"color",value:"rgba(0,0,0,0)",versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Round corners",name:"roundCorners",unit:"number",value:0,versionPropertyId:undefined}],},{kind:'widget',id:'1ace47ec-b36e-4da4-888b-02bcf2574e97',time:0,hidden:false,duration:6.93,animations:[{id:'4e930cdf-17f5-4e9d-82f2-6ab2e232f740',name:'Animation',type:'keyframe',timingFunction:'easeInOutCubic',settings:{},keyframes:[{id:"481582b2-6277-4294-bfe5-99a9388595b4",stateId:"771b90cc-86eb-43a1-a201-33447287abe2",time:0,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"5f3cfebf-2588-4d25-87b1-0f9dc10bb1fe",stateId:"dd72689f-7145-4bee-ae7c-17ba1eb72dfc",time:0.8788246615769553,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"36322092-acbe-4355-84e1-6dbe8ecd513e",stateId:"145da568-c7b7-4e68-a059-9e9bfbbf1b18",time:1.5899788285109382,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"5b951ae9-eb68-44c7-8a58-04029e7a077d",stateId:"49bde9a0-63cc-48b8-bc82-e87bf0a2b4a2",time:1.983137229742734,timingFunction:"easeInOutCubic",value:undefined,duration:0}]},],states:[{id:'771b90cc-86eb-43a1-a201-33447287abe2',x:0,y:0,},{id:'dd72689f-7145-4bee-ae7c-17ba1eb72dfc',x:0,y:0,},{id:'145da568-c7b7-4e68-a059-9e9bfbbf1b18',x:-7,y:-87,scaleX:0.6,scaleY:0.6,},{id:'49bde9a0-63cc-48b8-bc82-e87bf0a2b4a2',x:-28,y:-88,scaleX:0.6,scaleY:0.6,},],actions:[],x:723,y:184,width:70,height:82,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,html:"PGRpdiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGlkPSJpbnN0cnVjdGlvbnMiPgogICAgICAgICAgICA8c3Ryb25nPlZpZGVvIHBsYXllcjwvc3Ryb25nPjxicj5FbnRlciBhIFVSTCBpbiB0aGUgVVJMIHByb3BlcnR5IG9yIHNlbGVjdCBmZWVkIHdpdGggdmlkZW8gVVJMLgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InBsYXktcGF1c2Utb3ZlcmxheSIgY2xhc3M9InNob3ctcGxheSI+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9InBhdXNlIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjQwcHgiIGhlaWdodD0iNjQwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJMYXllcl8xIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjgwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4gCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9Ik01NDYuMjczLDkzLjcyNkM0ODUuODM0LDMzLjI4Niw0MDUuNDc2LDAsMzIwLDBDMjM0LjUyNSwwLDE1NC4xNjYsMzMuMjg2LDkzLjcyNiw5My43MjZTMCwyMzQuNTI1LDAsMzIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQzYwNi43MTQsNDg1LjgzNSw2NDAsNDA1LjQ3Niw2NDAsMzIwUzYwNi43MTQsMTU0LjE2Niw1NDYuMjczLDkzLjcyNnogTTMyMCw1ODJDMTc1LjUzMyw1ODIsNTgsNDY0LjQ2Nyw1OCwzMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNTgsMTc1LjUzMywxNzUuNTMzLDU4LDMyMCw1OGMxNDQuNDY3LDAsMjYyLDExNy41MzMsMjYyLDI2MkM1ODIsNDY0LjQ2Nyw0NjQuNDY3LDU4MiwzMjAsNTgyeiIgLz4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzPSIyNDMuMjg5LDMyMCAyNDMuMjg5LDE4OC42OTggMzU3LDI1NC4zNSA0NzAuNzExLDMyMCAzNTcsMzg1LjY1MSAyNDMuMjg5LDQ1MS4zMDIiIC8+CiAgICAgICAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjM3NSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzIiCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyBjbGFzcz0icGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjY0MHB4IiBoZWlnaHQ9IjY0MHB4IiB2aWV3Qm94PSIwIDAgNjQwIDY0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQwIDY0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iLTgwIgogICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iIzAwMDAwMCIKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iODAwIgogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNjA2LjcxNCw0ODUuODM1LDY0MCw0MDUuNDc2LDY0MCwzMjBTNjA2LjcxNCwxNTQuMTY2LDU0Ni4yNzMsOTMuNzI2eiBNMzIwLDU4MkMxNzUuNTMzLDU4Miw1OCw0NjQuNDY3LDU4LDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyIiAvPgogICAgICAgICAgICAgICAgICAgIDxnIGRpc3BsYXk9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSIzNzUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0iaW5saW5lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI1Mi40ODYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9IjE5Mi44NTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJpbmxpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMiIgCiAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIj48L2c+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InZpZGVvLWNvbnRyb2xzIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBsYXliYWNrIiBjbGFzcz0iaXNQYXVzZWQiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGF1c2UiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzEiPjxyZWN0IHg9Ii04MCIgeT0iLTgwIiBkaXNwbGF5PSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz48Zz48cmVjdCB4PSIzNzUiIHk9IjE5Mi44NTQiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI1Mi40ODYiIGhlaWdodD0iMjU0LjI5MSIvPjxyZWN0IHg9IjIxNSIgeT0iMTkyLjg1NCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+PHJlY3QgeD0iLTgwIiB5PSItODAiIGRpc3BsYXk9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyICIvPjxnIGRpc3BsYXk9Im5vbmUiPjxyZWN0IHg9IjM3NSIgeT0iMTkyLjg1NCIgZGlzcGxheT0iaW5saW5lIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTIuNDg2IiBoZWlnaHQ9IjI1NC4yOTEiLz48cmVjdCB4PSIyMTUiIHk9IjE5Mi44NTQiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJwcm9ncmVzcy10aW1lciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImJ1ZmZlckJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0idGltZUJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ2b2x1bWUtaWNvbiIgY2xhc3M9InVubXV0ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNNTMxIDQwNXYtMWMyNCAtMjcgMzYgLTU4IDM2IC05MHMtMTIgLTY0IC0zNiAtODljLTE1IC0xNSAtMzMgLTExIC00NCAxcy0xNiAzMCAtMSA0NWMyNSAyNCAyNSA2NCAwIDg4Yy0xNSAxNSAtMTAgMzMgMSA0NXMyOSAxNiA0NCAxek02MTkgNDkydi0zYzUxIC01MSA3NCAtMTEwIDc0IC0xNzhzLTIzIC0xMjcgLTc0IC0xNzggYy0xMyAtMTUgLTMyIC0xMSAtNDMgMHMtMTYgMzAgLTEgNDVjMzggMzkgNTUgODMgNTUgMTM0cy0xNyA5NSAtNTUgMTM0Yy0xNSAxNSAtMTAgMzQgMSA0NXMzMCAxNCA0MyAxek03MDkgNTc5djRjNzQgLTc4IDExMCAtMTY2IDExMCAtMjY4cy0zNiAtMTkwIC0xMTAgLTI2OGMtMTUgLTE1IC0zMyAtMTEgLTQ0IDBzLTE2IDMwIC0xIDQ1YzY0IDY0IDkzIDEzNyA5MyAyMjFzLTI5IDE1NyAtOTMgMjIxYy0xNSAxNSAtMTAgMzQgMSA0NSBzMjkgMTUgNDQgMHoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJtdXRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTg1MSA0MTBsLTk1IC05NWw5NSAtOTRsLTYzIC02M2wtOTUgOTRsLTk0IC05NGwtNjMgNjNsOTQgOTRsLTk0IDk1bDYzIDYzbDk0IC05NWw5NSA5NXoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUtY29udHJvbGxlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS12YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4iPgogICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDE3OTIgMTc5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0MTEgNTQxbC0zNTUgMzU1IDM1NSAzNTUgMTQ0LTE0NHEyOS0zMSA3MC0xNCAzOSAxNyAzOSA1OXY0NDhxMCAyNi0xOSA0NXQtNDUgMTloLTQ0OHEtNDIgMC01OS00MC0xNy0zOSAxNC02OWwxNDQtMTQ0LTM1NS0zNTUtMzU1IDM1NSAxNDQgMTQ0cTMxIDMwIDE0IDY5LTE3IDQwLTU5IDQwaC00NDhxLTI2IDAtNDUtMTl0LTE5LTQ1di00NDhxMC00MiA0MC01OSAzOS0xNyA2OSAxNGwxNDQgMTQ0IDM1NS0zNTUtMzU1LTM1NS0xNDQgMTQ0cS0xOSAxOS00NSAxOS0xMiAwLTI0LTUtNDAtMTctNDAtNTl2LTQ0OHEwLTI2IDE5LTQ1dDQ1LTE5aDQ0OHE0MiAwIDU5IDQwIDE3IDM5LTE0IDY5bC0xNDQgMTQ0IDM1NSAzNTUgMzU1LTM1NS0xNDQtMTQ0cS0zMS0zMC0xNC02OSAxNy00MCA1OS00MGg0NDhxMjYgMCA0NSAxOXQxOSA0NXY0NDhxMCA0Mi0zOSA1OS0xMyA1LTI1IDUtMjYgMC00NS0xOXoiIGZpbGw9IiNmZmYiLz4KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwb3N0ZXIiPjwvZGl2PgogICAgICAgIDxzcGFuIGlkPSJ2b2x1bWVUb2dnbGUiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0idW5tdXRlZCI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTUzMSA0MDV2LTFjMjQgLTI3IDM2IC01OCAzNiAtOTBzLTEyIC02NCAtMzYgLTg5Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMXMtMTYgMzAgLTEgNDVjMjUgMjQgMjUgNjQgMCA4OGMtMTUgMTUgLTEwIDMzIDEgNDVzMjkgMTYgNDQgMXpNNjE5IDQ5MnYtM2M1MSAtNTEgNzQgLTExMCA3NCAtMTc4cy0yMyAtMTI3IC03NCAtMTc4IGMtMTMgLTE1IC0zMiAtMTEgLTQzIDBzLTE2IDMwIC0xIDQ1YzM4IDM5IDU1IDgzIDU1IDEzNHMtMTcgOTUgLTU1IDEzNGMtMTUgMTUgLTEwIDM0IDEgNDVzMzAgMTQgNDMgMXpNNzA5IDU3OXY0Yzc0IC03OCAxMTAgLTE2NiAxMTAgLTI2OHMtMzYgLTE5MCAtMTEwIC0yNjhjLTE1IC0xNSAtMzMgLTExIC00NCAwcy0xNiAzMCAtMSA0NWM2NCA2NCA5MyAxMzcgOTMgMjIxcy0yOSAxNTcgLTkzIDIyMWMtMTUgMTUgLTEwIDM0IDEgNDUgczI5IDE1IDQ0IDB6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0ibXV0ZWQiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek04NTEgNDEwbC05NSAtOTVsOTUgLTk0bC02MyAtNjNsLTk1IDk0bC05NCAtOTRsLTYzIDYzbDk0IDk0bC05NCA5NWw2MyA2M2w5NCAtOTVsOTUgOTV6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8taG9sZGVyIj48L2Rpdj4KICAgIDwvZGl2Pg==",css:"KiB7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KaHRtbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQojY29udGFpbmVyIHsKICBvcGFjaXR5OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBmb250LWZhbWlseTogJ0hlbHZldGljYScsICdBcmlhbCcsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxNnB4Owp9Ci52aWRlby1ob2xkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogcG9pbnRlcjsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3ZlciB7CiAgd2lkdGg6IGF1dG87CiAgbGVmdDogNTAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyLXggewogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMTAwJTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3Zlci15IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KI3Bvc3RlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsKICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgei1pbmRleDogMTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwp9CiNwb3N0ZXIuY292ZXIgewogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmltYWdlR2VuZXJhdG9yTW9kZSAjcGxheS1wYXVzZS1vdmVybGF5LAouaW1hZ2VHZW5lcmF0b3JNb2RlICN2aWRlby1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNjb250YWluZXI6aG92ZXIgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNjb250YWluZXIuaXNQYXVzZWQgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgewogIGRpc3BsYXk6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAyOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAxOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5LnNob3cgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuaGlkZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wYXVzZSAucGF1c2UgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wbGF5IC5wbGF5IHsKICBkaXNwbGF5OiBibG9jazsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogNDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDAuNTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC41KTsKICBzdHJva2U6IHJnYmEoMCwwLDAsMC43KTsKICBzdHJva2Utd2lkdGg6IDFweDsKICBwYWRkaW5nOiAycHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgc3ZnICogewogIGZpbGw6IGluaGVyaXQ7Cn0KI3BsYXktcGF1c2Utb3ZlcmxheSBzdmc6aG92ZXIgewogIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKfQojdmlkZW8tY29udHJvbHMgewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41KTsKICBjb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwcHg7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKICBkaXNwbGF5OiBub25lOwogIHotaW5kZXg6IDM7Cn0KI3ZpZGVvLWNvbnRyb2xzLnNob3cgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7Cn0KI3ZpZGVvLWNvbnRyb2xzID5kaXY6bm90KCNwcm9ncmVzcykgewogIGZsb2F0OiBsZWZ0OwogIHdpZHRoOiAyNXB4OwogIGhlaWdodDogMzBweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQojdmlkZW8tY29udHJvbHMgPmRpdjpiZWZvcmUgewogIGNvbnRlbnQ6ICcnOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQojdmlkZW8tY29udHJvbHMgc3ZnIHsKICB3aWR0aDogMjVweDsKICBoZWlnaHQ6IDI1cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZpbGw6ICNmZmY7Cn0KI3BsYXliYWNrIHsKICB3aWR0aDogMzBweCAhaW1wb3J0YW50Owp9CiNwbGF5YmFjay5pc1BhdXNlZCAuaWNvbi1wbGF5IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KI3BsYXliYWNrLmlzUGxheWluZyAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CiNwbGF5YmFjayAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogbm9uZTsKfQojcGxheWJhY2sgLmljb24tcGxheSB7CiAgZGlzcGxheTogbm9uZTsKfQojcHJvZ3Jlc3MtYmFyIHsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7CiAgLW1zLWZsZXgtcGFjazogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtZmxleDogNTsKICAtbXMtZmxleC1wb3NpdGl2ZTogNTsKICBmbGV4LWdyb3c6IDU7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzLXRpbWVyIHsKICB3aWR0aDogODdweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxMXB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyBzcGFuIHsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3Byb2dyZXNzLWJhciAjcHJvZ3Jlc3MgI3RpbWVCYXIgewogIHotaW5kZXg6IDEwOwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuMXM7CiAgdHJhbnNpdGlvbjogd2lkdGggMC4xczsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyAjYnVmZmVyQmFyIHsKICB6LWluZGV4OiA1OwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKfQojdm9sdW1lIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtbXMtZmxleC1wb3NpdGl2ZTogMTsKICBmbGV4LWdyb3c6IDE7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LW9yaWVudDogaG9yaXpvbnRhbDsKICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsKICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdzsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIG1hcmdpbi1yaWdodDogNXB4Owp9CiN2b2x1bWUubW9iaWxlLXZvbHVtZSB7CiAgLXdlYmtpdC1ib3gtZmxleDogMDsKICAtbXMtZmxleC1wb3NpdGl2ZTogMDsKICBmbGV4LWdyb3c6IDA7Cn0KI3ZvbHVtZSAjdm9sdW1lLXZhbHVlIHsKICB6LWluZGV4OiAxMDsKICB3aWR0aDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7CiAgaGVpZ2h0OiAxMDAlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAwLjJzOwogIHRyYW5zaXRpb246IHdpZHRoIDAuMnM7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojdm9sdW1lICN2b2x1bWUtaWNvbiB7CiAgd2lkdGg6IDI1cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWNvbnRyb2xsZXIgewogIHdpZHRoOiA4MCU7CiAgaGVpZ2h0OiA3cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC40KTsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uIHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWljb24ubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lICN2b2x1bWUtaWNvbi51bm11dGVkIHN2Zy51bm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojZnVsbHNjcmVlbiB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQojZnVsbHNjcmVlbiBzdmcgewogIHdpZHRoOiAxNHB4OwogIG1hcmdpbi1yaWdodDogM3B4Owp9CiN2b2x1bWVUb2dnbGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA0OwogIHdpZHRoOiAxMCU7CiAgaGVpZ2h0OiAxMCU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CiN2b2x1bWVUb2dnbGUubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lVG9nZ2xlLnVubXV0ZWQgc3ZnLnVubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWVUb2dnbGUgc3ZnIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogbm9uZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgZmlsbDogI2ZmZjsKfQojdm9sdW1lVG9nZ2xlIHN2ZyAqIHsKICBmaWxsOiBpbmhlcml0Owp9CkBtZWRpYSAobWF4LXdpZHRoOiAyOTBweCkgewogICNwcm9ncmVzcy10aW1lciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KfQpAbWVkaWEgKG1heC13aWR0aDogMjAwcHgpIHsKICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1pY29uIHsKICAgIHdpZHRoOiBhdXRvOwogIH0KICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1jb250cm9sbGVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CiNpbnN0cnVjdGlvbnMgewogIGJhY2tncm91bmQ6ICMzNjM2MzY7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA5OTsKICBjb2xvcjogI2Y3ZjdmNzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdmVydGljYWwtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxNXB4OwogIGRpc3BsYXk6IG5vbmU7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOwogIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZm9udC1zaXplOiAwLjlyZW07Cn0KI2luc3RydWN0aW9ucyBzdHJvbmcgewogIGZvbnQtc2l6ZTogMS4xcmVtOwp9CiNpbnN0cnVjdGlvbnMuc2hvdyB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXN0YXJ0LXBsYXliYWNrLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQp2aWRlbzo6LWludGVybmFsLW1lZGlhLWNvbnRyb2xzLWRvd25sb2FkLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1lbmNsb3N1cmUgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KdmlkZW86Oi13ZWJraXQtbWVkaWEtY29udHJvbHMtcGFuZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgKyAzMHB4KTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqLwp9",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgfSk7DQp9Ow0KV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gdHJ1ZTsNCnZhciB2aWRlbzsNCnZhciBmaXJzdFBsYXlUaHJvdWdoID0gdHJ1ZTsNCnZhciB2aWRlb0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taG9sZGVyJyk7DQp2YXIgdmlkZW9TZXR0aW5ncyA9IHt9Ow0KdmFyIGhhc1N0b3BwZWQgPSBmYWxzZTsNCnZhciBtdXRlZFN0YXRlID0gdHJ1ZTsNCnZhciB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCnZhciBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zJyk7DQp2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOw0KdmFyIGZlZWQsIGZlZWRVcmwsIGZlZWRJdGVyYXRpb25JbmRleDsNCi8qDQoqKiBCYW5uZXJmbG93IGV2ZW50cw0KKi8NCmxldCBvbkxvYWRlZFByb21pc2VSZXNvbHZlcjsNCmlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgIFdpZGdldC5pc0xvYWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KICAgIH0pOw0KfQ0KdHJ5IHsNCiAgICBzZXRTZXR0aW5ncygpOw0KICAgIGNyZWF0ZVZpZGVvKCk7DQp9DQpjYXRjaCAoZSkgew0KICAgIC8vIGNvbnNvbGUuZXJyb3IoZS5zdGFjayk7IA0KfQ0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TZWVrLCB0aW1lID0+IHsNCiAgICAvLyBpZih2aWRlbyAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2NyZWF0aXZlJykgeyANCiAgICAvLyAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lICsgdGltZSAtIFdpZGdldC50aW1lKSk7DQogICAgLy8gfQ0KICAgIGlmICh2aWRlbykgew0KICAgICAgICB2aWRlby5zZWVrVG8oTWF0aC5hYnModmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgKyB0aW1lIC0gV2lkZ2V0LnRpbWUpKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGxheSwgdGltZSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbykgew0KICAgICAgICAgICAgdmlkZW8ucG9zdGVyLnN0eWxlLnNldFByb3BlcnR5KCJkaXNwbGF5IiwgIm5vbmUiLCAiaW1wb3J0YW50Iik7DQogICAgICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnICYmICh0aW1lID49IFdpZGdldC50aW1lICYmIHRpbWUgPCBXaWRnZXQuZHVyYXRpb24pKSB7DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsNCiAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LCAwKTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgdGltZSA9PiB7DQogICAgaWYgKHZpZGVvKSB7DQogICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHRpbWUgLSBXaWRnZXQudGltZSkpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuUmVzaXplLCAoKSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgdmlkZW8uc2V0RmlsbE9wdGlvbigpOw0KICAgICAgICB9DQogICAgfSwgMCk7DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5Qcm9wZXJ0eUNoYW5nZWQsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICB2aWRlb0VsZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gV2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzICsgJyUnOw0KICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRJbmRleCAtIDE7DQogICAgdHJ5IHsNCiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkICYmIFdpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmlkKSB7DQogICAgICAgICAgICBmZWVkID0geWllbGQgV2lkZ2V0LnByb3BlcnRpZXMuZHluYW1pY0NvbnRlbnQubG9hZCgpOw0KICAgICAgICAgICAgaWYgKGZlZWQgJiYgZmVlZC5kYXRhICYmIGZlZWQuZGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBmZWVkID0gZmVlZC5kYXRhOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChlKSB7IH0NCiAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJzsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICBmZWVkVXJsID0gZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0udmFsdWU7DQogICAgfQ0KICAgIGluc3RydWN0aW9ucy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgaWYgKCFXaWRnZXQucHJvcGVydGllcy51cmwgfHwgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgIWZlZWRVcmwpKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHVybCA9IFdpZGdldC5wcm9wZXJ0aWVzLnVybDsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHVybCA9IGZlZWRVcmw7DQogICAgfQ0KICAgIHNldFNldHRpbmdzKCk7DQogICAgaWYgKCF2aWRlbykgew0KICAgICAgICBjcmVhdGVWaWRlbygpOw0KICAgIH0NCiAgICBpZiAodXJsID09IHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS51cmwpIHsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICB9DQogICAgaWYgKHZpZGVvICYmIHVybCAhPT0gdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLnVybCkgew0KICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAodXJsKSk7DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQp9KSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuQW5pbWF0aW9uU3RhcnQsICgpID0+IHsNCiAgICBpZiAodmlkZW8gJiYgIWhhc1N0b3BwZWQpIHsNCiAgICAgICAgaWYgKHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS5hdXRvcGxheSkgew0KICAgICAgICAgICAgaWYgKGZpcnN0UGxheVRocm91Z2ggJiYgVGltZWxpbmUuaXNQbGF5aW5nKSB7DQogICAgICAgICAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLmxvb3BXaXRoQmFubmVyIHx8IGZpcnN0UGxheVRocm91Z2gpIHsNCiAgICAgICAgICAgICAgICAgICAgdmlkZW8uc2Vla1RvKFdpZGdldC5wcm9wZXJ0aWVzLnN0YXJ0VGltZSk7DQogICAgICAgICAgICAgICAgICAgIGZpcnN0UGxheVRocm91Z2ggPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgICAgICAgICBmaXJzdFBsYXlUaHJvdWdoID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSAmJiAhdmlkZW8udmlkZW8ucGF1c2VkKSB7DQogICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSkgew0KICAgICAgICAgICAgaWYgKFRpbWVsaW5lLmlzUGxheWluZykgew0KICAgICAgICAgICAgICAgIHZpZGVvLnNlZWtUbyhXaWRnZXQucHJvcGVydGllcy5zdGFydFRpbWUpOw0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdpbWFnZScpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKHZpZGVvICYmICF2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsNCiAgICAgICAgaWYgKFRpbWVsaW5lLmR1cmF0aW9uICE9PSBXaWRnZXQuZHVyYXRpb24pIHsNCiAgICAgICAgICAgIHZpZGVvLnRvZ2dsZU11dGUobXV0ZWRTdGF0ZSk7DQogICAgICAgIH0NCiAgICB9DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5BbmltYXRpb25FbmQsICgpID0+IHsNCiAgICBpZiAoVGltZWxpbmUuZHVyYXRpb24gIT09IFdpZGdldC5kdXJhdGlvbikgew0KICAgICAgICBtdXRlZFN0YXRlID0gdmlkZW8udmlkZW8ubXV0ZWQ7DQogICAgICAgIHZpZGVvLnRvZ2dsZU11dGUodHJ1ZSk7DQogICAgfQ0KICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMuc3RhdGljSW5kZXggJiYgV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCkgew0KICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleCArIDFdICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4ICsgMV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZEl0ZXJhdGlvbkluZGV4Kys7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBmZWVkSXRlcmF0aW9uSW5kZXggPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZFVybCA9IGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XVtXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGRdLnZhbHVlOw0KICAgICAgICAgICAgc2V0U2V0dGluZ3MoKTsNCiAgICAgICAgICAgIHZpZGVvLmxvYWRWaWRlbyhzdHJpcChmZWVkVXJsKSk7DQogICAgICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuU2hvd1ByZWxvYWRJbWFnZSwgKCkgPT4gew0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJibG9jayIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgfQ0KICAgIH0sIDApOw0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50Lkxvb3AsICgpID0+IHsNCiAgICBpZiAoaGFzU3RvcHBlZCkgew0KICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5KSB7DQogICAgICAgIC8vIHZpZGVvLnJlc3RhcnQoKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU3RvcCwgKCkgPT4gew0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuc3RvcFdpdGhDcmVhdGl2ZSkgew0KICAgICAgICB2aWRlby5zdG9wKCk7DQogICAgICAgIGhhc1N0b3BwZWQgPSB0cnVlOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgfQ0KfSk7DQpmdW5jdGlvbiBjcmVhdGVWaWRlbygpIHsNCiAgICBpZiAoIXZpZGVvKSB7DQogICAgICAgIHZpZGVvID0gbmV3IEJGVmlkZW8odmlkZW9FbGVtLCB2aWRlb1NldHRpbmdzLCBWaWRlb1RyYWNraW5nKTsNCiAgICB9DQp9DQpmdW5jdGlvbiBzZXRTZXR0aW5ncygpIHsNCiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHNldHRpbmdzID0gV2lkZ2V0LnByb3BlcnRpZXM7DQogICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgdmlkZW9TZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgfQ0KICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoV2lkZ2V0LnByb3BlcnRpZXMudXJsKTsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoZmVlZFVybCk7DQogICAgfQ0KICAgIGxldCBwb3N0ZXI7DQogICAgbGV0IGZhbGxiYWNrSW1hZ2U7DQogICAgaWYgKHZpZGVvU2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgIHBvc3RlciA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLnBvc3Rlcik7DQogICAgfQ0KICAgIGlmICh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgZmFsbGJhY2tJbWFnZSA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpOw0KICAgIH0NCiAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IHBvc3RlcjsNCiAgICB2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgPSBmYWxsYmFja0ltYWdlOw0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJykgew0KICAgICAgICB2aWRlb1NldHRpbmdzLmNvbnRyb2xzID0gZmFsc2U7DQogICAgICAgIHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lID0gdmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgPD0gMSA/IDEgOiB2aWRlb1NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgdmlkZW9TZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOw0KICAgICAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IG51bGw7DQogICAgfQ0KfQ0KZnVuY3Rpb24gZ2V0T3B0aW1hbEltYWdlKHNyYykgew0KICAgIHJldHVybiBXaWRnZXQuZ2V0T3B0aW1pemVkSW1hZ2VVcmwoc3JjLCB7IHdpZHRoOiBXaWRnZXQud2lkdGgsIGhlaWdodDogV2lkZ2V0LmhlaWdodCwgZml0T3B0aW9uOiBXaWRnZXQucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbC50b0xvd2VyQ2FzZSgpIH0pOw0KfQ0KZnVuY3Rpb24gc3RyaXAocykgew0KICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKTsNCiAgICB0bXAuaW5uZXJIVE1MID0gczsNCiAgICByZXR1cm4gdG1wLnRleHRDb250ZW50IHx8IHRtcC5pbm5lclRleHQgfHwgIiI7DQp9DQpmdW5jdGlvbiBjb3B5KGEpIHsNCiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7DQp9DQpmdW5jdGlvbiBCRlZpZGVvKGVsZW0sIG9wdGlvbnMsIFZpZGVvVHJhY2tpbmcpIHsNCiAgICB2YXIgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhvcHRpb25zKTsNCiAgICB2YXIgX3ZpZGVvOw0KICAgIHZhciBzZWxmID0gdGhpczsNCiAgICB2YXIgZWxCeUlkID0gZnVuY3Rpb24gKHNlbCkgew0KICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsKTsNCiAgICB9Ow0KICAgIHZhciBldmVudFF1ZXVlID0gW107DQogICAgdmFyIGRldmljZUluZm8gPSBnZXREZXZpY2VJbmZvKCk7DQogICAgdmFyIHBsYXlQcm9taXNlOw0KICAgIHZhciBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICB2YXIgdmlkZW9UcmFja2luZzsNCiAgICB2YXIgZGVmYXVsdFZpZGVvVHlwZXMgPSBbDQogICAgICAgIHsNCiAgICAgICAgICAgIGV4dGVuc2lvbjogJ21wNCcsDQogICAgICAgICAgICB0eXBlOiAndmlkZW8vbXA0Jw0KICAgICAgICB9DQogICAgXTsNCiAgICB2YXIgdG90YWxQbGF5dGltZTsNCiAgICB2YXIgdm9sdW1lID0gMDsNCiAgICB2YXIgaGFzUGxheWVkID0gZmFsc2U7DQogICAgdmFyIHJlYWR5U3RhdGUgPSAwOw0KICAgIHZhciBwbGF5ZXIgPSBlbEJ5SWQoJ3ZpZGVvLXBsYXllcicpOw0KICAgIHZhciB2aWRlb0NvbnRhaW5lciA9IGVsQnlJZCgnY29udGFpbmVyJyk7DQogICAgdmFyIHBsYXlQYXVzZU92ZXJsYXkgPSBlbEJ5SWQoJ3BsYXktcGF1c2Utb3ZlcmxheScpOw0KICAgIHZhciBwb3N0ZXIgPSBlbEJ5SWQoJ3Bvc3RlcicpOw0KICAgIC8vIEluaXRpYWxpemUgVmlkZW8gY29udHJvbHMNCiAgICB2YXIgdmlkZW9Db250cm9scyA9IGVsQnlJZCgndmlkZW8tY29udHJvbHMnKTsNCiAgICB2YXIgcGxheWJhY2sgPSBlbEJ5SWQoJ3BsYXliYWNrJyk7DQogICAgdmFyIHZvbHVtZUNvbnRhaW5lciA9IGVsQnlJZCgndm9sdW1lJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2wgPSBlbEJ5SWQoJ3ZvbHVtZS1jb250cm9sbGVyJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xWYWx1ZSA9IGVsQnlJZCgndm9sdW1lLXZhbHVlJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xUb2dnbGUgPSBlbEJ5SWQoJ3ZvbHVtZS1pY29uJyk7DQogICAgdmFyIHByb2dyZXNzID0gZWxCeUlkKCdwcm9ncmVzcycpOw0KICAgIHZhciB2aWRlb0R1cmF0aW9uID0gZWxCeUlkKCdwcm9ncmVzcy10aW1lcicpOw0KICAgIHZhciBmdWxsc2NyZWVuID0gZWxCeUlkKCdmdWxsc2NyZWVuJyk7DQogICAgdmFyIHRpbWVCYXIgPSBlbEJ5SWQoJ3RpbWVCYXInKTsNCiAgICBwbGF5YmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVG9nZ2xlUGxheVBhdXNlKTsNCiAgICB2b2x1bWVDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uVm9sdW1lRHJhZyk7DQogICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVm9sdW1lVG9nZ2xlKTsNCiAgICBwcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblRpbWVTZWVrRHJhZyk7DQogICAgZnVsbHNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUZ1bGxzY3JlZW4pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNvbnRyb2xzTW91c2VVcCk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Db250cm9sc01vdXNlRG93bik7DQogICAgdmFyIHZvbHVtZVRvZ2dsZUJ1dHRvbiA9IGVsQnlJZCgndm9sdW1lVG9nZ2xlJyk7DQogICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Wb2x1bWVUb2dnbGUpOw0KICAgIHRyeSB7DQogICAgICAgIGlmIChwbGF5ZXIpIHsNCiAgICAgICAgICAgIHBsYXllci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBsYXllcik7DQogICAgICAgICAgICBfdmlkZW8gPSBudWxsOw0KICAgICAgICB9DQogICAgICAgIGlmICghX3NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgX3NldHRpbmdzLnVybCA9ICcnOw0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1cmwuJyk7DQogICAgICAgIH0NCiAgICAgICAgLy8gU2V0IHBvc3RlciBiZWZvcmUgbG9hZGluZyB2aWRlbw0KICAgICAgICBpZiAoX3NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5wb3N0ZXIgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgJiYgZGV2aWNlSW5mby5pc01vYmlsZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvID0gY3JlYXRlVmlkZW9FbGVtZW50KF9zZXR0aW5ncy51cmwpOw0KICAgICAgICBlbGVtLmFwcGVuZENoaWxkKF92aWRlbyk7DQogICAgICAgIC8vIEltbWVkaWF0ZWx5IHNldCBmaWxsIG9wdGlvbiB0byBhdm9pZCByZXNpemluZyB0byBiZSBzZWVuDQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICAgICAgaWYgKEFkLnBhcmFtZXRlcnMuaXNPbW5pUmVuZGVyKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBvbk1ldGFMb2FkZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvblZpZGVvRW5kZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIG9uVmlkZW9QbGF5KTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgb25WaWRlb1BhdXNlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsIG9uVm9sdW1lQ2hhbmdlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAvKg0KICAgICAgICAqIFdlIHVzZSBSQUYgaW5zdGVhZCBvZiBuYXRpdmUgdGltZXVwZGF0ZSBldmVudCBvbiB0aGUgbWVkaWEgQVBJIHRvDQogICAgICAgICogZ2V0IGEgbW9yZSBhY2N1cmF0ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSB2aWRlbw0KICAgICAgICAqLw0KICAgICAgICBjb25zdCB3ID0gd2luZG93Ow0KICAgICAgICB2YXIgcmFmID0gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB3LnJlcXVlc3RBbmltYXRpb25GcmFtZQ0KICAgICAgICAgICAgICAgIHx8IHcud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgZnVuY3Rpb24gKGNiKSB7IHNldFRpbWVvdXQoY2IsIDEwMDAgLyAzMCk7IH07DQogICAgICAgIH0pKCk7DQogICAgICAgIGZ1bmN0aW9uIHRpbWVVcGRhdGUoKSB7DQogICAgICAgICAgICBvblRpbWVVcGRhdGVkKCk7DQogICAgICAgICAgICByYWYodGltZVVwZGF0ZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOw0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7DQogICAgfQ0KICAgIGNhdGNoIChlKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZS5zdGFjayk7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFVwZGF0ZXMgdmlkZW8ncyBzZXR0aW5ncw0KICAgICAqIE9ubHkgc2V0dGluZ3MgdGhhdCBhcmUgcGFzc2VkIGFyZSBjaGFuZ2VkLCByZXN0IHJlbWFpbiBwZXJzaXN0ZW50DQogICAgICogQHBhcmFtICB7fSBzZXR0aW5ncw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldFZpZGVvU2V0dGluZ3Moc2V0dGluZ3MpIHsNCiAgICAgICAgLy8gTWVyZ2UgY3VycmVudCBzZXR0aW5ncyB3aXRoIHBvdGVudGlhbCBuZXcgc2V0dGluZ3MNCiAgICAgICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgICAgIF9zZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgICAgIH0NCiAgICAgICAgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhfc2V0dGluZ3MpOw0KICAgICAgICB2aWRlb1RyYWNraW5nID0gbmV3IFZpZGVvVHJhY2tpbmcoZ2V0VXJsTWV0YShfc2V0dGluZ3MudXJsKSk7DQogICAgICAgIHRvdGFsUGxheXRpbWUgPSAoX3NldHRpbmdzLnN0YXJ0VGltZSA+PSAxICYmIF9zZXR0aW5ncy5lbmRUaW1lID49IDEpDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5lbmRUaW1lIC0gX3NldHRpbmdzLnN0YXJ0VGltZQ0KICAgICAgICAgICAgOiBfdmlkZW8uZHVyYXRpb24gLSBfc2V0dGluZ3Muc3RhcnRUaW1lOw0KICAgICAgICBpZiAoX3NldHRpbmdzLmxvb3BXaXRoQmFubmVyKSB7DQogICAgICAgICAgICBpZiAoV2lkZ2V0LmR1cmF0aW9uID4gX3ZpZGVvLmR1cmF0aW9uKSB7DQogICAgICAgICAgICAgICAgdG90YWxQbGF5dGltZSA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRvdGFsUGxheXRpbWUgPSBXaWRnZXQuZHVyYXRpb247DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIE9ubHkgc2V0IGF1dG9wbGF5IHRvIHRydWUgaWYgdGhlIGRldmljZSBzdXBwb3J0cyBwbGF5c0lubGluZSBhdHRyaWJ1dGUgYW5kIGlzIG1vYmlsZSwNCiAgICAgICAgICogYXV0b3BsYXlpbmcgaXMgb3RoZXJ3aXNlIGhhbmRsZWQgZnJvbSBvbkNhblBsYXkgdG8gZW5zdXJlIHRoYXQgdGhlIHZpZGVvIGlzIHJlYWR5IGZvciBwbGF5YmFjay4NCiAgICAgICAgICogVGhpcyBpcyB0byBwcm9wZXJseSBzaG93L2hpZGUgdGhlIHBvc3RlciB3aGlsc3QgdmlkZW8gaXMgYnVmZmVyaW5nDQogICAgICAgICAqLw0KICAgICAgICBfdmlkZW8uYXV0b3BsYXkgPSBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZQ0KICAgICAgICAgICAgPyBfc2V0dGluZ3MuYXV0b3BsYXkNCiAgICAgICAgICAgIDogZmFsc2U7DQogICAgICAgIF92aWRlby5jb250cm9scyA9IGRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5jb250cm9scw0KICAgICAgICAgICAgOiBmYWxzZTsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgc2V0Vm9sdW1lKF9zZXR0aW5ncy52b2x1bWUpOw0KICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIGF1dG9wbGF5IGFuZCB0aGVyZSdzIHZvbHVtZSB0aGVyZSdzIG5vIHBvaW50IGluIG11dGluZyB0aGUgdmlkZW8gYnkgZGVmYXVsdA0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3Mudm9sdW1lKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8ucGxheWJhY2tSYXRlID0gX3NldHRpbmdzLnBsYXliYWNrUmF0ZTsNCiAgICAgICAgLy8gVXBkYXRlIHBvc3RlciBpZiBjaGFuZ2VkDQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2ltYWdlJyAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLnBvc3RlciArICcpJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICAgICAgdXBkYXRlRE9NKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFByb3BlclVybCh1cmwpIHsNCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyhcclxufFxufFxyfFxzKS9nbSwgIiIpOw0KICAgICAgICBsZXQgdXJscyA9IHVybC5zcGxpdCgnLCcpOw0KICAgICAgICBpZiAoKHVybHMubGVuZ3RoID09PSAyICYmICF1cmwubWF0Y2goL1wuKHdlYm18bW92KS8pKSB8fCB1cmxzLmxlbmd0aCA+IDIpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh1cmxzLmxlbmd0aCA9PT0gMSAmJiAhdXJsLm1hdGNoKCcubXA0JykpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodXJscy5sZW5ndGggPT09IDIpIHsNCiAgICAgICAgICAgIGlmIChnZXREZXZpY2VJbmZvKCkuaXNTYWZhcmkpIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmxzWzBdLm1hdGNoKCcubW92JykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHVybCA9IHVybHNbMF0ubWF0Y2goJy53ZWJtJykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpbnN0cnVjdGlvbnMuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICByZXR1cm4gdXJsOw0KICAgIH0NCiAgICBmdW5jdGlvbiBjcmVhdGVWaWRlb0VsZW1lbnQodXJsKSB7DQogICAgICAgIHVybCA9IGdldFByb3BlclVybCh1cmwpOw0KICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHZhciB1ID0gZ2V0VXJsTWV0YSh1cmwpOw0KICAgICAgICBjb25zdCB2aWRlb1R5cGUgPSBnZXRWaWRlb1R5cGVBbmRVcGRhdGVTb3VyY2VVcmwodSk7DQogICAgICAgIHZhciB1cmxTcmMgPSB1LnNvdXJjZVVybDsNCiAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gdS5wYXJhbXM7DQogICAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgIHZpZGVvLmlkID0gJ3ZpZGVvLXBsYXllcic7DQogICAgICAgIHZpZGVvLnByZWxvYWQgPSAnbWV0YWRhdGEnOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICcnKTsNCiAgICAgICAgLy8gTXV0ZWQgaXMgc2V0IGhlcmUgaW5zdGVhZCBvZiBzZXRWaWRlb1NldHRpbmcgdG8gcHJldmVudCBpdCB0byBiZSBtdXRlZCB3aGVuIG5vdCB3YW50ZWQNCiAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlOw0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpIGluIHZpZGVvVHlwZSkgew0KICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW2ldLmV4dGVuc2lvbiArIHF1ZXJ5UGFyYW1zOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoInR5cGUiLCB2aWRlb1R5cGVbaV0udHlwZSk7DQogICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmlkZW87DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KSB7DQogICAgICAgIGxldCB2aWRlb1R5cGU7DQogICAgICAgIGlmICh1LmV4dC5tYXRjaCgvKHdlYm18bW92KS8pKSB7DQogICAgICAgICAgICBpZiAoZ2V0RGV2aWNlSW5mbygpLmlzU2FmYXJpKSB7DQogICAgICAgICAgICAgICAgdmlkZW9UeXBlID0gW3sNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogJ21vdicsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vcXVpY2t0aW1lJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZpZGVvVHlwZSA9IFt7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246ICd3ZWJtJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB2aWRlb1R5cGU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZpZGVvVHlwZXM7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdXBkYXRlRE9NKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIWRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlKSB7DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3RhcnRUaW1lID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdtb2JpbGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5jb250cm9scyAmJiAhX3NldHRpbmdzLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ICE9PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICB9DQogICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzBdLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnBsYXlQYXVzZUJ1dHRvblNpemUgKyAnJSc7DQogICAgICAgIHBsYXlQYXVzZU92ZXJsYXkucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUud2lkdGggPSBfc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSArICclJzsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5jb250cm9scyAmJiAhZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW9Db250cm9scy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2aWRlb0NvbnRyb2xzLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gX3NldHRpbmdzLnBsYXllckJhY2tncm91bmQ7DQogICAgICAgIF92aWRlby5zdHlsZS5maWx0ZXIgPSAnZ3JheXNjYWxlKCcgKyBfc2V0dGluZ3MuZ3JheVNjYWxlICsgJyUpJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLnRvcCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCArICclJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmxlZnQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ICsgJyUnOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uc3R5bGUud2lkdGggPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5xdWVyeVNlbGVjdG9yQWxsKCdzdmcnKVswXS5zdHlsZS5maWxsID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbkNvbG9yOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24ucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUuZmlsbCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSArPSAiaW1hZ2VHZW5lcmF0b3JNb2RlIjsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwwLDAsMCknOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICB9DQogICAgZnVuY3Rpb24gc2V0RmlsbE9wdGlvbigpIHsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5iYWNrZ3JvdW5kRmlsbCA9PT0gJ0NvdmVyJykgew0KICAgICAgICAgICAgcG9zdGVyLmNsYXNzTmFtZSA9ICdjb3Zlcic7DQogICAgICAgICAgICAoX3ZpZGVvLnZpZGVvSGVpZ2h0IC8gX3ZpZGVvLnZpZGVvV2lkdGgpIDw9ICh2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyB2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCkNCiAgICAgICAgICAgICAgICA/IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteCcNCiAgICAgICAgICAgICAgICA6IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwb3N0ZXIuY2xhc3NOYW1lID0gJyc7DQogICAgICAgICAgICBfdmlkZW8uY2xhc3NOYW1lID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5wb3N0ZXIpIHsNCiAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHJlc3RhcnRWaWRlbygpIHsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgLy8gaWYoX3NldHRpbmdzLmxvb3Apew0KICAgICAgICBwbGF5VmlkZW8oKTsNCiAgICAgICAgLy8gfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRSZWFkeVN0YXRlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnJlYWR5U3RhdGUgPiByZWFkeVN0YXRlKSB7DQogICAgICAgICAgICByZWFkeVN0YXRlID0gX3ZpZGVvLnJlYWR5U3RhdGU7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gcGxheVZpZGVvKGZvcmNlUGxheSkgew0KICAgICAgICAvKg0KICAgICAgICAgKiBDaGVjayBpZiB0aGUgdmlkZW8gaXMgcGxheWFibGUsIG90aGVyd2lzZSBhZGQgaXQgdG8gdGhlIGV2ZW50UXVldWUgd2hpY2gNCiAgICAgICAgICogdHJpZ2dlcnMgcGxheSBvbiBvbkNhblBsYXkgd2hpY2ggaXMgd2hlbiB2aWRlbyBpcyBwbGF5YWJsZQ0KICAgICAgICAgKi8NCiAgICAgICAgc2V0UmVhZHlTdGF0ZSgpOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkgfHwgaGFzUGxheWVkKSB7DQogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDE1MCk7DQogICAgICAgIGlmICgocmVhZHlTdGF0ZSA+PSAzICYmIF9zZXR0aW5ncy5hdXRvcGxheSkgfHwgaGFzUGxheWVkIHx8IGZvcmNlUGxheSkgew0KICAgICAgICAgICAgaWYgKF92aWRlby52b2x1bWUgPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSBfdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGRldmljZUluZm8uaXNNb2JpbGUgJiYgIWRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycgJiYgX3NldHRpbmdzLnBvc3RlciA/ICdibG9jaycgOiAnbm9uZSc7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiBfc2V0dGluZ3MucG9zdGVyID8gJ25vbmUnIDogJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmNvbnRyb2xzICYmICFfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGV2ZW50UXVldWUucHVzaCgncGxheScpOw0KICAgICAgICAgICAgaWYgKHZpZGVvVHJhY2tpbmcpIHsNCiAgICAgICAgICAgICAgICB2aWRlb1RyYWNraW5nLnN0YXJ0ZWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZWVrVG8ocykgew0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IHM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHBhdXNlVmlkZW8oKSB7DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkICYmICFwZW5kaW5nUGF1c2UpIHsNCiAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICBfdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgfQ0KICAgICAgICBwZW5kaW5nUGF1c2UgPSB0cnVlOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzdG9wVmlkZW8oKSB7DQogICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldFZvbHVtZSh2b2x1bWUpIHsNCiAgICAgICAgX3ZpZGVvLnZvbHVtZSA9IGRldmljZUluZm8uaXNNb2JpbGUgPyAwIDogdG9GcmFjdGlvbnModm9sdW1lKTsNCiAgICAgICAgLy8gQmFubmVyRmxvdy5yYWlzZUV2ZW50KCd2b2x1bWVDaGFuZ2VkJywgX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvZ2dsZU11dGUobXV0ZSkgew0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIF92aWRlby5tdXRlZCA9ICh0eXBlb2YgbXV0ZSA9PT0gJ2Jvb2xlYW4nKSA/IG11dGUgOiAhX3ZpZGVvLm11dGVkOw0KICAgICAgICAvLyBCYW5uZXJGbG93LnJhaXNlRXZlbnQoJ3ZvbHVtZUNoYW5nZWQnLCBfdmlkZW8ubXV0ZWQgPyAwIDogX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGxvYWRWaWRlbyh1cmwpIHsNCiAgICAgICAgdXJsID0gZ2V0UHJvcGVyVXJsKHVybCk7DQogICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdXJsID0gZ2V0QWRqdXN0ZWRVcmwodXJsKTsNCiAgICAgICAgdmFyIHUgPSBnZXRVcmxNZXRhKHVybCk7DQogICAgICAgIGNvbnN0IHZpZGVvVHlwZSA9IGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KTsNCiAgICAgICAgdmFyIHVybFNyYyA9IHUuc291cmNlVXJsOw0KICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB1LnBhcmFtczsNCiAgICAgICAgLy8gVXBkYXRlIHNvdXJjZXMNCiAgICAgICAgZm9yICh2YXIgdnQgaW4gdmlkZW9UeXBlKSB7DQogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NvdXJjZScpW3Z0XTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW3Z0XS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgY3VycmVudFZvbHVtZSA9IF92aWRlby52b2x1bWU7DQogICAgICAgIF92aWRlby5sb2FkKCk7DQogICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGF1c2VWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIHNldFZpZGVvU2V0dGluZ3MoeyB1cmw6IHVybCB9KTsNCiAgICAgICAgc2V0Vm9sdW1lKGN1cnJlbnRWb2x1bWUpOw0KICAgIH0NCiAgICBmdW5jdGlvbiB0b2dnbGVQbGF5UGF1c2VCdXR0b24oKSB7DQogICAgICAgIGlmIChfdmlkZW8ucGF1c2VkKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5wYXVzZWQgfHwgX3ZpZGVvLmVuZGVkKSB7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gZ2V0VXJsTWV0YSh1cmwpIHsNCiAgICAgICAgdmFyIG8gPSB7fTsNCiAgICAgICAgLy8gaWYoIXZhbGlkYXRlVXJsKHVybCkpew0KICAgICAgICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWQgbm90IHJlY2VpdmUgYSB2YWxpZCBVUkwuJyk7DQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKHVybCAmJiB1cmwubGVuZ3RoKSB7DQogICAgICAgICAgICBvLnVybCA9IHVybC5zcGxpdCgnPycpWzBdOw0KICAgICAgICAgICAgby5zb3VyY2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXS5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCIuIikpOw0KICAgICAgICAgICAgby5wYXJhbXMgPSB1cmwuaW5kZXhPZignPycpICE9IC0xID8gJz8nICsgdXJsLnNwbGl0KCc/JylbMV0gOiAnJzsNCiAgICAgICAgICAgIG8uZXh0ID0gdXJsLnNwbGl0KCc/JylbMF0uc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZigiLiIpICsgMSkgfHwgJyc7DQogICAgICAgICAgICBvLmZpbGVuYW1lID0gdXJsLm1hdGNoKC8oW14vXSskKS8sICcnKVswXS5zcGxpdCgnPycpWzBdOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBvOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV2ZW50IGhhbmRsZXJzDQogICAgKi8NCiAgICBmdW5jdGlvbiBvbk1ldGFMb2FkZWQoKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF9zZXR0aW5ncy5zdGFydFRpbWUgPSBfc2V0dGluZ3Muc3RhcnRUaW1lIDw9IF92aWRlby5kdXJhdGlvbiA/IF9zZXR0aW5ncy5zdGFydFRpbWUgOiAwOw0KICAgICAgICBzZXRWaWRlb1NldHRpbmdzKF9zZXR0aW5ncyk7DQogICAgICAgIHRpbWVVcGRhdGUoKTsNCiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gb25DYW5QbGF5KCkgew0KICAgICAgICBlbEJ5SWQoJ2luc3RydWN0aW9ucycpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgLy8gaWYoIWhhc1BsYXllZCAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICAvLyAgICAgVGltZWxpbmUucmVzdGFydCgpOw0KICAgICAgICAvLyB9DQogICAgICAgIGlmIChvbkxvYWRlZFByb21pc2VSZXNvbHZlcikgew0KICAgICAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIoKTsNCiAgICAgICAgfQ0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIGZvciAodmFyIGkgaW4gZXZlbnRRdWV1ZSkgew0KICAgICAgICAgICAgX3ZpZGVvW2V2ZW50UXVldWVbaV1dKCk7DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGV2ZW50UXVldWVbaV0gPT09ICdwbGF5JyAmJiBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlUGxheVBhdXNlQnV0dG9uKCk7DQogICAgICAgIGlmIChyZWFkeVN0YXRlID49IDMgfHwgIV92aWRlby5wYXVzZWQpIHsNCiAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVVcGRhdGVkKCkgew0KICAgICAgICBpZiAoIV92aWRlbykgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICghdGltZUJhci5zdHlsZS53aWR0aCkgew0KICAgICAgICAgICAgdGltZUJhci5zdHlsZS53aWR0aCA9IF92aWRlby5kdXJhdGlvbiArICclJzsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZCgoX3ZpZGVvLmN1cnJlbnRUaW1lIC8gX3ZpZGVvLmR1cmF0aW9uKSAqIDEwMCkgKyAnJSc7DQogICAgICAgIGlmICh2aWRlb0R1cmF0aW9uLmlubmVySFRNTC5zcGxpdCgnLycpWzBdLnRyaW0oKSAhPT0gZm9ybWF0VGltZShfdmlkZW8uY3VycmVudFRpbWUpKSB7DQogICAgICAgICAgICB2aWRlb0R1cmF0aW9uLmlubmVySFRNTCA9IGZvcm1hdFRpbWUoX3ZpZGVvLmN1cnJlbnRUaW1lKSArICcgLyAnICsgZm9ybWF0VGltZShfdmlkZW8uZHVyYXRpb24pOw0KICAgICAgICB9DQogICAgICAgIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuOTUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC45NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuY29tcGxldGVkKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gQ2hlY2sgaWYgcmVhY2hlZCB0aGlyZCBxdWFydGlsZSAoNzUlKQ0KICAgICAgICBlbHNlIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuNzUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC43NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcudHEoKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBDaGVjayBpZiByZWFjaGVkIG1pZHBvaW50ICg1MCUpDQogICAgICAgIGVsc2UgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC41MCAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjUwICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgdmlkZW9UcmFja2luZy5tcCgpOw0KICAgICAgICB9DQogICAgICAgIC8vIENoZWNrIGlmIHJlYWNoZWQgZmlyc3QgcXVhcnRpbGUgKDI1JSkNCiAgICAgICAgZWxzZSBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49IHRvdGFsUGxheXRpbWUgKiAwLjI1IC0gMSAmJiBfdmlkZW8uY3VycmVudFRpbWUgPD0gdG90YWxQbGF5dGltZSAqIDAuMjUgKyAxICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7DQogICAgICAgICAgICB2aWRlb1RyYWNraW5nLmZxKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSAoKF9zZXR0aW5ncy5lbmRUaW1lICYmIF9zZXR0aW5ncy5lbmRUaW1lIDwgX3ZpZGVvLmR1cmF0aW9uKSA/IF9zZXR0aW5ncy5lbmRUaW1lIDogX3ZpZGVvLmR1cmF0aW9uKSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgb25WaWRlb0VuZGVkKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25WaWRlb0VuZGVkKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5sb29wKSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXN0YXJ0VmlkZW8oKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGxheSgpIHsNCiAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGF1c2UoKSB7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZvbHVtZUNoYW5nZSgpIHsNCiAgICAgICAgdm9sdW1lQ29udHJvbFZhbHVlLnN0eWxlLndpZHRoID0gIV92aWRlby5tdXRlZCA/IF92aWRlby52b2x1bWUgKiAxMDAgKyAnJScgOiAnMCc7DQogICAgICAgIGlmIChfdmlkZW8udm9sdW1lID09PSAwIHx8IF92aWRlby5tdXRlZCkgew0KICAgICAgICAgICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5jbGFzc05hbWUgPSAnbXV0ZWQnOw0KICAgICAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9ICdtdXRlZCc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2b2x1bWVDb250cm9sVG9nZ2xlLmNsYXNzTmFtZSA9ICd1bm11dGVkJzsNCiAgICAgICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSAndW5tdXRlZCc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25DbGljayhldmVudCkgew0KICAgICAgICB2YXIgY2xpY2tPblBsYXlQYXVzZUJ1dHRvbiA9IGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldDsNCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBjbGlja09uUGxheVBhdXNlQnV0dG9uKSB7DQogICAgICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCkgew0KICAgICAgICAgICAgICAgIHRvZ2dsZU11dGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIHBsYXlWaWRlbyh0cnVlKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgQ3JlYXRpdmUub3BlbihldmVudCwgdW5kZWZpbmVkKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKg0KICAgICoqIFZpZGVvIGNvbnRyb2xzDQogICAgKi8NCiAgICB2YXIgdm9sdW1lRHJhZyA9IGZhbHNlOw0KICAgIHZhciB0aW1lRHJhZyA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIG9uVG9nZ2xlUGxheVBhdXNlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCB8fCBfdmlkZW8uZW5kZWQpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICAgICAgdXNlckluaXRpYXRlZFBhdXNlID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB2b2x1bWVEcmFnID0gdHJ1ZTsNCiAgICAgICAgdXBkYXRlVm9sdW1lKGUucGFnZVgpOw0KICAgIH0NCiAgICA7DQogICAgZnVuY3Rpb24gdXBkYXRlVm9sdW1lKHgpIHsNCiAgICAgICAgdmFyIG1heFZvbHVtZSA9IDE7DQogICAgICAgIHZhciBwb3NpdGlvbiA9IHggLSB2b2x1bWVDb250YWluZXIub2Zmc2V0TGVmdCAtIHZvbHVtZUNvbnRyb2wub2Zmc2V0TGVmdCAtIDI7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyB2b2x1bWVDb250cm9sLm9mZnNldFdpZHRoOw0KICAgICAgICBpZiAocGVyY2VudGFnZSA+IDEwMCkgew0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IDEwMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocGVyY2VudGFnZSA8IDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAwOw0KICAgICAgICB9DQogICAgICAgIHNldFZvbHVtZShtYXhWb2x1bWUgKiBwZXJjZW50YWdlIC8gMTAwKTsNCiAgICAgICAgdm9sdW1lID0gX3ZpZGVvLnZvbHVtZTsNCiAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgIG9uVm9sdW1lQ2hhbmdlKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lVG9nZ2xlKCkgew0KICAgICAgICBfdmlkZW8ubXV0ZWQgPSAhX3ZpZGVvLm11dGVkOw0KICAgICAgICBvblZvbHVtZUNoYW5nZSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVTZWVrRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB0aW1lRHJhZyA9IHRydWU7DQogICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNvbnRyb2xzTW91c2VVcChlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB2b2x1bWVEcmFnID0gZmFsc2U7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB0aW1lRHJhZyA9IGZhbHNlOw0KICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3NiYXIoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25Db250cm9sc01vdXNlRG93bihlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVQcm9ncmVzc2JhcihlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzc2Jhcih4KSB7DQogICAgICAgIHZhciBtYXhkdXJhdGlvbiA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgdmFyIHBvc2l0aW9uID0geCAtIHByb2dyZXNzLm9mZnNldExlZnQ7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyBwcm9ncmVzcy5vZmZzZXRXaWR0aDsNCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPiAxMDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAxMDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPCAwKSB7DQogICAgICAgICAgICBwZXJjZW50YWdlID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gcGVyY2VudGFnZSArICclJzsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gbWF4ZHVyYXRpb24gKiBwZXJjZW50YWdlIC8gMTAwOw0KICAgIH0NCiAgICBjb25zdCBkb2MgPSBkb2N1bWVudDsNCiAgICAvLyBGdWxsc2NyZWVuDQogICAgdmFyIGZ1bGxTY3JlZW5FbmFibGVkID0gISEoZG9jLmZ1bGxzY3JlZW5FbmFibGVkDQogICAgICAgIHx8IGRvYy5tb3pGdWxsU2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2MubXNGdWxsc2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2Mud2Via2l0U3VwcG9ydHNGdWxsc2NyZWVuDQogICAgICAgIHx8IGRvYy53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCk7DQogICAgaWYgKCFmdWxsU2NyZWVuRW5hYmxlZCkgew0KICAgICAgICBmdWxsc2NyZWVuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGhhbmRsZUZ1bGxzY3JlZW4oKSB7DQogICAgICAgIGlmIChpc0Z1bGxTY3JlZW4oKSkgew0KICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmIChkb2MubW96Q2FuY2VsRnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICBkb2MubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4pDQogICAgICAgICAgICAgICAgZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGRvYy5tc0V4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvYy5tc0V4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YShmYWxzZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZiAodmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4pDQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKQ0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmICh2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmlkZW9Db250YWluZXIubXNSZXF1ZXN0RnVsbHNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSh0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0Z1bGxTY3JlZW4oKSB7DQogICAgICAgIHJldHVybiAhIShkb2MuZnVsbFNjcmVlbiB8fCBkb2Mud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvYy5tb3pGdWxsU2NyZWVuIHx8IGRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldEZ1bGxzY3JlZW5EYXRhKHN0YXRlKSB7DQogICAgICAgIHZpZGVvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1mdWxsc2NyZWVuJywgJycgKyAhIXN0YXRlKTsNCiAgICAgICAgc3RhdGUgPyB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmdWxsc2NyZWVuJykgOiB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7DQogICAgfQ0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhKGRvYy5mdWxsU2NyZWVuIHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCkpOw0KICAgIH0pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhZG9jLndlYmtpdElzRnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISFkb2MubW96RnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSghIWRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCiAgICB9KTsNCiAgICAvKg0KICAgICoqIFV0aWxzDQogICAgKi8NCiAgICBmdW5jdGlvbiBnZXREZXZpY2VJbmZvKCkgew0KICAgICAgICB2YXIgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xTYW1zdW5nQnJvd3NlcnxpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgICAgIHZhciBpc0FuZHJvaWQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImFuZHJvaWQiKSA+IC0xOw0KICAgICAgICB2YXIgaXNTYW1zdW5nQnJvd3NlciA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhbXN1bmdCcm93c2VyL2kpIHx8IGZhbHNlOw0KICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOw0KICAgICAgICB2YXIgaXNJb3MgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NU1N0cmVhbSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG1hdGNoID0gKG5hdmlnYXRvci5hcHBWZXJzaW9uKS5tYXRjaCgvT1MgKFxkKylfKFxkKylfPyhcZCspPy8pLCB2ZXJzaW9uOw0KICAgICAgICAgICAgaWYgKG1hdGNoICE9PSB1bmRlZmluZWQgJiYgbWF0Y2ggIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gWw0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsxXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsyXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFszXSB8fCAwLCAxMCkNCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZlcnNpb24uam9pbignLicpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KSgpOw0KICAgICAgICB2YXIgY2FuUGxheUlubGluZSA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgICAgICB2Lm11dGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHYucGxheSgpOw0KICAgICAgICAgICAgcmV0dXJuICF2LnBhdXNlZCB8fCAoJ3BsYXlzSW5saW5lJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpKTsNCiAgICAgICAgfSkoKTsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlzTW9iaWxlOiBpc01vYmlsZSwNCiAgICAgICAgICAgIGlzQW5kcm9pZDogaXNBbmRyb2lkLA0KICAgICAgICAgICAgaXNTYW1zdW5nQnJvd3NlcjogaXNTYW1zdW5nQnJvd3NlciwNCiAgICAgICAgICAgIGlzU2FmYXJpOiBpc1NhZmFyaSwNCiAgICAgICAgICAgIGlzSW9zOiBpc0lvcywNCiAgICAgICAgICAgIGNhblBsYXlJbmxpbmU6IGNhblBsYXlJbmxpbmUNCiAgICAgICAgfTsNCiAgICB9DQogICAgZnVuY3Rpb24gZGVzZXJpYWxpemVTZXR0aW5ncyhzZXR0aW5ncykgew0KICAgICAgICB2YXIgcyA9IHt9Ow0KICAgICAgICAvLyBWaWRlbyBzZXR0aW5ncy9wcm9wZXJ0aWVzDQogICAgICAgIHMudXJsID0gc2V0dGluZ3MudXJsOw0KICAgICAgICBzLmF1dG9wbGF5ID0gc2V0dGluZ3MuYXV0b3BsYXk7DQogICAgICAgIHMubG9vcCA9IHNldHRpbmdzLmxvb3A7DQogICAgICAgIHMuY29udHJvbHMgPSBzZXR0aW5ncy5jb250cm9sczsNCiAgICAgICAgcy52b2x1bWUgPSBzZXR0aW5ncy52b2x1bWUgfHwgMDsNCiAgICAgICAgcy5zdGFydFRpbWUgPSBzZXR0aW5ncy5zdGFydFRpbWUgfHwgMDsNCiAgICAgICAgcy5lbmRUaW1lID0gc2V0dGluZ3MuZW5kVGltZTsNCiAgICAgICAgcy5wbGF5YmFja1JhdGUgPSAocGFyc2VGbG9hdChzZXR0aW5ncy5wbGF5YmFja1JhdGUpIHx8IDEpOw0KICAgICAgICBzLnBvc3RlciA9IGdldEFkanVzdGVkVXJsKHNldHRpbmdzLnBvc3RlciB8fCAnJyk7DQogICAgICAgIC8vIFNwZWNpYWwgc2V0dGluZ3MNCiAgICAgICAgcy5wbGF5ZXJCYWNrZ3JvdW5kID0gc2V0dGluZ3MucGxheWVyQmFja2dyb3VuZDsNCiAgICAgICAgcy5ncmF5U2NhbGUgPSBzZXR0aW5ncy5ncmF5U2NhbGU7DQogICAgICAgIHMubG9vcFdpdGhCYW5uZXIgPSBzZXR0aW5ncy5sb29wV2l0aEJhbm5lcjsNCiAgICAgICAgcy5zdG9wV2l0aENyZWF0aXZlID0gc2V0dGluZ3Muc3RvcFdpdGhDcmVhdGl2ZTsNCiAgICAgICAgcy5iYWNrZ3JvdW5kRmlsbCA9IHNldHRpbmdzLmJhY2tncm91bmRGaWxsOw0KICAgICAgICBzLmZhbGxiYWNrSW1hZ2UgPSBnZXRBZGp1c3RlZFVybChzZXR0aW5ncy5mYWxsYmFja0ltYWdlIHx8ICcnKTsNCiAgICAgICAgcy5wbGF5UGF1c2VCdXR0b25TaXplID0gc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSB8fCA0MDsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b24gPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b247DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemU7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3IgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uVG9wIHx8IDA7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0IHx8IDA7DQogICAgICAgIHJldHVybiBzOw0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0luTG9jYWxFbnZpcm9ubWVudCgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmICghd2luZG93KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHdpbmRvdy50b3AubG9jYXRpb24ucHJvdG9jb2wgPT09ICdmaWxlOicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHZhbGlkYXRlVXJsKHMpIHsNCiAgICAgICAgaWYgKCFpbkJmKCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAvXig/Oig/Omh0dHBzP3xmdHApOlwvXC8pPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKSkoPzo6XGR7Miw1fSk/KD86XC9cUyopPyQvLnRlc3Qocyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGluQmYoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBsZXQgdyA9IHdpbmRvdzsNCiAgICAgICAgICAgIC8vIEFzIGxvbmcgYXMgYSBwYXJlbnQgZXhpc3RzDQogICAgICAgICAgICB3aGlsZSAody5wYXJlbnQgJiYgdyAhPT0gdy5wYXJlbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICB3LnBhcmVudC5sb2NhdGlvbi5ocmVmOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXcucGFyZW50LmRvY3VtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB3ID0gdy5wYXJlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAhIXcubG9jYXRpb24ub3JpZ2luLm1hdGNoKC9iYW5uZXJmbG93fGxvY2FsaG9zdC8pIHx8ICEhd2luZG93LnRvcC5sb2NhdGlvbi5vcmlnaW4ubWF0Y2goL2Jhbm5lcmZsb3d8bG9jYWxob3N0Lyk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKF9hKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdG9GcmFjdGlvbnMobikgew0KICAgICAgICByZXR1cm4gbiA8IDEgPyBuDQogICAgICAgICAgICA6IG4gPiAxMDAgPyAxDQogICAgICAgICAgICAgICAgOiAhbiA/IDANCiAgICAgICAgICAgICAgICAgICAgOiBuIC8gMTAwOw0KICAgIH0NCiAgICBmdW5jdGlvbiBmb3JtYXRUaW1lKHQpIHsNCiAgICAgICAgcmV0dXJuIHQgPyAodCAtICh0ICU9IDYwKSkgLyA2MCArICg5LjUgPCB0ID8gJzonIDogJzowJykgKyBNYXRoLnJvdW5kKHQpIDogJzA6MDAnOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV4cG9zZQ0KICAgICovDQogICAgdGhpcy5zZXRWaWRlb1NldHRpbmdzID0gc2V0VmlkZW9TZXR0aW5nczsNCiAgICB0aGlzLmdldFZpZGVvU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfc2V0dGluZ3M7IH07DQogICAgdGhpcy5zZXRGaWxsT3B0aW9uID0gc2V0RmlsbE9wdGlvbjsNCiAgICB0aGlzLnBsYXkgPSBwbGF5VmlkZW87DQogICAgdGhpcy5yZXN0YXJ0ID0gcmVzdGFydFZpZGVvOw0KICAgIHRoaXMucGF1c2UgPSBwYXVzZVZpZGVvOw0KICAgIHRoaXMuc3RvcCA9IHN0b3BWaWRlbzsNCiAgICB0aGlzLmxvYWRWaWRlbyA9IGxvYWRWaWRlbzsNCiAgICB0aGlzLnNldFZvbHVtZSA9IHNldFZvbHVtZTsNCiAgICB0aGlzLnRvZ2dsZU11dGUgPSB0b2dnbGVNdXRlOw0KICAgIHRoaXMuc2Vla1RvID0gc2Vla1RvOw0KICAgIHRoaXMudmlkZW8gPSBfdmlkZW87DQogICAgdGhpcy5wb3N0ZXIgPSBwb3N0ZXI7DQp9DQpmdW5jdGlvbiBnZXRBZGp1c3RlZFVybCh0ZXh0KSB7DQogICAgbGV0IHVybCA9IHRleHQNCiAgICAgICAgLnJlcGxhY2UoL3ZpZGVvLmJhbm5lcmZsb3cuY29tL2csICdjLmJhbm5lcmZsb3cubmV0L2JmLXZpZGVvcycpDQogICAgICAgIC5yZXBsYWNlKC8oXHJcbnxcbnxccnxccykvZ20sICcnKTsNCiAgICBpZiAoQWQuY3VzdG9tRG9tYWluKSB7DQogICAgICAgIC8vIFJlbW92ZSBodHRwfHMgcmVwbGFjZW1lbnQgd2hlbiBBZC5jdXN0b21Eb21haW4gb25seSBnaXZlcyB0aGUgZG9tYWluDQogICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdjLmJhbm5lcmZsb3cubmV0JywgQWQuY3VzdG9tRG9tYWluLnJlcGxhY2UoLyhodHRwfGh0dHBzKTpcL1wvLywgJycpKTsNCiAgICB9DQogICAgcmV0dXJuIHVybDsNCn0NCmZ1bmN0aW9uIFZpZGVvVHJhY2tpbmcob3B0aW9ucykgew0KICAgIC8qDQogICAgKiogIFRoaXMgbWV0aG9kIGJ1YmJsZXMgdXAgZXZlbnRzIHRvIHRoZSBCYW5uZXIvQ3VzdG9tIHNjcmlwdA0KICAgICoqICBhbmQgaXMgdXNlZCB0byBzZW5kIHZpZGVvIHRyYWNraW5nIGV2ZW50cw0KICAgICovDQogICAgdmFyIHVybCA9IG9wdGlvbnMudXJsOw0KICAgIHZhciBmaWxlbmFtZSA9IG9wdGlvbnMuZmlsZW5hbWU7DQogICAgLy8gT25jZSBwZXIgdmlldyA9IE9QVg0KICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgaXNJbml0ID0gZmFsc2UsIC8vIE9QVg0KICAgIHN0YXJ0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgcmVhY2hlZEZRID0gZmFsc2UsIC8vIE9QVg0KICAgIHJlYWNoZWRNUCA9IGZhbHNlLCAvLyBPUFYNCiAgICByZWFjaGVkVFEgPSBmYWxzZTsgLy8gT1BWDQogICAgLy8gVmlkZW8gaW5pdGlhbGl6ZWQgDQogICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoaXNJbml0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBpc0luaXQgPSB0cnVlOw0KICAgIH07DQogICAgLy8gVmlkZW8gc3RhcnRlZCBvciBwbGF5aW5nIGZyb20gYmVnaW5uaW5nIGFnYWluDQogICAgdGhpcy5zdGFydGVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIGlmIChzdGFydGVkKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMCB9KTsNCiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBGaXJzdCBRdWFydGlsZQ0KICAgIHRoaXMuZnEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkRlEgfHwgIXN0YXJ0ZWQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC4yNSB9KTsNCiAgICAgICAgcmVhY2hlZEZRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIE1pZHBvaW50DQogICAgdGhpcy5tcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHJlYWNoZWRNUCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjUgfSk7DQogICAgICAgIHJlYWNoZWRNUCA9IHRydWU7DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBUaGlyZCBxdWFydGlsZQ0KICAgIHRoaXMudHEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkVFEpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC43NSB9KTsNCiAgICAgICAgcmVhY2hlZFRRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIGhhcyBjb21wbGV0ZWQNCiAgICB0aGlzLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKGhhc0NvbXBsZXRlZCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAxIH0pOw0KICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlOw0KICAgIH07DQp9DQppZiAoIUFycmF5LnByb3RvdHlwZS5maW5kKSB7DQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2ZpbmQnLCB7DQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAocHJlZGljYXRlKSB7DQogICAgICAgICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLg0KICAgICAgICAgICAgaWYgKHRoaXMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ0aGlzIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTsNCiAgICAgICAgICAgIC8vIDIuIExldCBsZW4gYmUgPyBUb0xlbmd0aCg/IEdldChPLCAibGVuZ3RoIikpLg0KICAgICAgICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwOw0KICAgICAgICAgICAgLy8gMy4gSWYgSXNDYWxsYWJsZShwcmVkaWNhdGUpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uDQogICAgICAgICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIDQuIElmIHRoaXNBcmcgd2FzIHN1cHBsaWVkLCBsZXQgVCBiZSB0aGlzQXJnOyBlbHNlIGxldCBUIGJlIHVuZGVmaW5lZC4NCiAgICAgICAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdOw0KICAgICAgICAgICAgLy8gNS4gTGV0IGsgYmUgMC4NCiAgICAgICAgICAgIHZhciBrID0gMDsNCiAgICAgICAgICAgIC8vIDYuIFJlcGVhdCwgd2hpbGUgayA8IGxlbg0KICAgICAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHsNCiAgICAgICAgICAgICAgICAvLyBhLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS4NCiAgICAgICAgICAgICAgICAvLyBiLiBMZXQga1ZhbHVlIGJlID8gR2V0KE8sIFBrKS4NCiAgICAgICAgICAgICAgICAvLyBjLiBMZXQgdGVzdFJlc3VsdCBiZSBUb0Jvb2xlYW4oPyBDYWxsKHByZWRpY2F0ZSwgVCwgwqsga1ZhbHVlLCBrLCBPIMK7KSkuDQogICAgICAgICAgICAgICAgLy8gZC4gSWYgdGVzdFJlc3VsdCBpcyB0cnVlLCByZXR1cm4ga1ZhbHVlLg0KICAgICAgICAgICAgICAgIHZhciBrVmFsdWUgPSBvW2tdOw0KICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCBrVmFsdWUsIGssIG8pKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBrVmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGUuIEluY3JlYXNlIGsgYnkgMS4NCiAgICAgICAgICAgICAgICBrKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyA3LiBSZXR1cm4gdW5kZWZpbmVkLg0KICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgfQ0KICAgIH0pOw0KfQ0K",customProperties:[{label:"Url",name:"url",unit:"text",value:"{\"text\":\"https://productsup.melia.com/production/letra_L_150px.mp4\",\"styles\":[{\"type\":\"word\",\"length\":57,\"position\":0,\"styleIds\":[]}]}",versionPropertyId:"2266e90c-8965-4dbb-8548-50ca53e8d0f1"},{label:"Use feed",name:"useFeed",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Feed",name:"dynamicContent",unit:"feed",value:"  1 1 loop  text",versionPropertyId:undefined},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"f15ea77b-bb63-423c-81da-83b2834276de"},{label:"Feed index",name:"feedIndex",unit:"number",value:1,versionPropertyId:undefined},{label:"Static index",name:"staticIndex",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Autoplay",name:"autoplay",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Controls",name:"controls",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop",name:"loop",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithBanner",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Volume toggle button",name:"volumeToggleButton",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Volume",name:"volume",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button color",name:"volumeToggleButtonColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Volume button size",name:"volumeToggleButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button left",name:"volumeToggleButtonPositionLeft",unit:"number",value:5,versionPropertyId:undefined},{label:"Volume button top",name:"volumeToggleButtonPositionTop",unit:"number",value:5,versionPropertyId:undefined},{label:"Play/Pause button size",name:"playPauseButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Start time",name:"startTime",unit:"number",value:0,versionPropertyId:undefined},{label:"End time",name:"endTime",unit:"number",value:0,versionPropertyId:undefined},{label:"Preload image",name:"fallbackImage",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Poster",name:"poster",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Fill",name:"backgroundFill",unit:"select",value:"W3sidmFsdWUiOiJDb3ZlciIsInNlbGVjdGVkIjp0cnVlfSx7InZhbHVlIjoiQ29udGFpbiIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Playback rate",name:"playbackRate",unit:"select",value:"W3sidmFsdWUiOiIxIiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiIwLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMC41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjAuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIxLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMS41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjEuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIyIiwic2VsZWN0ZWQiOmZhbHNlfV0=",versionPropertyId:undefined},{label:"Gray Scale",name:"grayScale",unit:"number",value:0,versionPropertyId:undefined},{label:"Player background",name:"playerBackground",unit:"color",value:"rgba(0,0,0,0)",versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Round corners",name:"roundCorners",unit:"number",value:0,versionPropertyId:undefined}],},{kind:'widget',id:'262efda7-4822-4121-9585-c4b8f21b6963',time:0,hidden:false,duration:6.93,animations:[{id:'dcfcb24c-01f8-402d-8704-33e1a83d516a',name:'Animation',type:'keyframe',timingFunction:'easeInOutCubic',settings:{},keyframes:[{id:"2ecdeb63-6d69-4c1b-a7c0-d722fcc785f3",stateId:"52368b79-5d5a-4845-b2ee-87de2257fccf",time:0,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"f5e55c46-f3ca-4e3c-a40c-cacaec443d19",stateId:"c97bef1b-e537-4e17-a95a-71152101b004",time:0.8788246615769553,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"9c72f9e4-1ea4-46fd-861b-2298963df8fe",stateId:"6e0e7472-bdbc-4d78-8d56-1285ffe3262a",time:1.5899788285109382,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"8d37b711-2131-4237-8972-403eb358bfbc",stateId:"17723dfe-4577-408e-b812-088704434659",time:1.983137229742734,timingFunction:"easeInOutCubic",value:undefined,duration:0}]},],states:[{id:'52368b79-5d5a-4845-b2ee-87de2257fccf',x:0,y:0,},{id:'c97bef1b-e537-4e17-a95a-71152101b004',x:0,y:0,},{id:'6e0e7472-bdbc-4d78-8d56-1285ffe3262a',x:0,y:-122,scaleX:0.6,scaleY:0.6,},{id:'17723dfe-4577-408e-b812-088704434659',x:-22,y:-124,scaleX:0.6,scaleY:0.6,},],actions:[],x:711,y:270,width:77,height:80,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,html:"PGRpdiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGlkPSJpbnN0cnVjdGlvbnMiPgogICAgICAgICAgICA8c3Ryb25nPlZpZGVvIHBsYXllcjwvc3Ryb25nPjxicj5FbnRlciBhIFVSTCBpbiB0aGUgVVJMIHByb3BlcnR5IG9yIHNlbGVjdCBmZWVkIHdpdGggdmlkZW8gVVJMLgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InBsYXktcGF1c2Utb3ZlcmxheSIgY2xhc3M9InNob3ctcGxheSI+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9InBhdXNlIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjQwcHgiIGhlaWdodD0iNjQwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJMYXllcl8xIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjgwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4gCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9Ik01NDYuMjczLDkzLjcyNkM0ODUuODM0LDMzLjI4Niw0MDUuNDc2LDAsMzIwLDBDMjM0LjUyNSwwLDE1NC4xNjYsMzMuMjg2LDkzLjcyNiw5My43MjZTMCwyMzQuNTI1LDAsMzIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQzYwNi43MTQsNDg1LjgzNSw2NDAsNDA1LjQ3Niw2NDAsMzIwUzYwNi43MTQsMTU0LjE2Niw1NDYuMjczLDkzLjcyNnogTTMyMCw1ODJDMTc1LjUzMyw1ODIsNTgsNDY0LjQ2Nyw1OCwzMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNTgsMTc1LjUzMywxNzUuNTMzLDU4LDMyMCw1OGMxNDQuNDY3LDAsMjYyLDExNy41MzMsMjYyLDI2MkM1ODIsNDY0LjQ2Nyw0NjQuNDY3LDU4MiwzMjAsNTgyeiIgLz4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzPSIyNDMuMjg5LDMyMCAyNDMuMjg5LDE4OC42OTggMzU3LDI1NC4zNSA0NzAuNzExLDMyMCAzNTcsMzg1LjY1MSAyNDMuMjg5LDQ1MS4zMDIiIC8+CiAgICAgICAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjM3NSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzIiCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyBjbGFzcz0icGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjY0MHB4IiBoZWlnaHQ9IjY0MHB4IiB2aWV3Qm94PSIwIDAgNjQwIDY0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQwIDY0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iLTgwIgogICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iIzAwMDAwMCIKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iODAwIgogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNjA2LjcxNCw0ODUuODM1LDY0MCw0MDUuNDc2LDY0MCwzMjBTNjA2LjcxNCwxNTQuMTY2LDU0Ni4yNzMsOTMuNzI2eiBNMzIwLDU4MkMxNzUuNTMzLDU4Miw1OCw0NjQuNDY3LDU4LDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyIiAvPgogICAgICAgICAgICAgICAgICAgIDxnIGRpc3BsYXk9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSIzNzUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0iaW5saW5lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI1Mi40ODYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9IjE5Mi44NTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJpbmxpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMiIgCiAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIj48L2c+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InZpZGVvLWNvbnRyb2xzIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBsYXliYWNrIiBjbGFzcz0iaXNQYXVzZWQiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGF1c2UiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzEiPjxyZWN0IHg9Ii04MCIgeT0iLTgwIiBkaXNwbGF5PSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz48Zz48cmVjdCB4PSIzNzUiIHk9IjE5Mi44NTQiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI1Mi40ODYiIGhlaWdodD0iMjU0LjI5MSIvPjxyZWN0IHg9IjIxNSIgeT0iMTkyLjg1NCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+PHJlY3QgeD0iLTgwIiB5PSItODAiIGRpc3BsYXk9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyICIvPjxnIGRpc3BsYXk9Im5vbmUiPjxyZWN0IHg9IjM3NSIgeT0iMTkyLjg1NCIgZGlzcGxheT0iaW5saW5lIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTIuNDg2IiBoZWlnaHQ9IjI1NC4yOTEiLz48cmVjdCB4PSIyMTUiIHk9IjE5Mi44NTQiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJwcm9ncmVzcy10aW1lciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImJ1ZmZlckJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0idGltZUJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ2b2x1bWUtaWNvbiIgY2xhc3M9InVubXV0ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNNTMxIDQwNXYtMWMyNCAtMjcgMzYgLTU4IDM2IC05MHMtMTIgLTY0IC0zNiAtODljLTE1IC0xNSAtMzMgLTExIC00NCAxcy0xNiAzMCAtMSA0NWMyNSAyNCAyNSA2NCAwIDg4Yy0xNSAxNSAtMTAgMzMgMSA0NXMyOSAxNiA0NCAxek02MTkgNDkydi0zYzUxIC01MSA3NCAtMTEwIDc0IC0xNzhzLTIzIC0xMjcgLTc0IC0xNzggYy0xMyAtMTUgLTMyIC0xMSAtNDMgMHMtMTYgMzAgLTEgNDVjMzggMzkgNTUgODMgNTUgMTM0cy0xNyA5NSAtNTUgMTM0Yy0xNSAxNSAtMTAgMzQgMSA0NXMzMCAxNCA0MyAxek03MDkgNTc5djRjNzQgLTc4IDExMCAtMTY2IDExMCAtMjY4cy0zNiAtMTkwIC0xMTAgLTI2OGMtMTUgLTE1IC0zMyAtMTEgLTQ0IDBzLTE2IDMwIC0xIDQ1YzY0IDY0IDkzIDEzNyA5MyAyMjFzLTI5IDE1NyAtOTMgMjIxYy0xNSAxNSAtMTAgMzQgMSA0NSBzMjkgMTUgNDQgMHoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJtdXRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTg1MSA0MTBsLTk1IC05NWw5NSAtOTRsLTYzIC02M2wtOTUgOTRsLTk0IC05NGwtNjMgNjNsOTQgOTRsLTk0IDk1bDYzIDYzbDk0IC05NWw5NSA5NXoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUtY29udHJvbGxlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS12YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4iPgogICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDE3OTIgMTc5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0MTEgNTQxbC0zNTUgMzU1IDM1NSAzNTUgMTQ0LTE0NHEyOS0zMSA3MC0xNCAzOSAxNyAzOSA1OXY0NDhxMCAyNi0xOSA0NXQtNDUgMTloLTQ0OHEtNDIgMC01OS00MC0xNy0zOSAxNC02OWwxNDQtMTQ0LTM1NS0zNTUtMzU1IDM1NSAxNDQgMTQ0cTMxIDMwIDE0IDY5LTE3IDQwLTU5IDQwaC00NDhxLTI2IDAtNDUtMTl0LTE5LTQ1di00NDhxMC00MiA0MC01OSAzOS0xNyA2OSAxNGwxNDQgMTQ0IDM1NS0zNTUtMzU1LTM1NS0xNDQgMTQ0cS0xOSAxOS00NSAxOS0xMiAwLTI0LTUtNDAtMTctNDAtNTl2LTQ0OHEwLTI2IDE5LTQ1dDQ1LTE5aDQ0OHE0MiAwIDU5IDQwIDE3IDM5LTE0IDY5bC0xNDQgMTQ0IDM1NSAzNTUgMzU1LTM1NS0xNDQtMTQ0cS0zMS0zMC0xNC02OSAxNy00MCA1OS00MGg0NDhxMjYgMCA0NSAxOXQxOSA0NXY0NDhxMCA0Mi0zOSA1OS0xMyA1LTI1IDUtMjYgMC00NS0xOXoiIGZpbGw9IiNmZmYiLz4KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwb3N0ZXIiPjwvZGl2PgogICAgICAgIDxzcGFuIGlkPSJ2b2x1bWVUb2dnbGUiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0idW5tdXRlZCI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTUzMSA0MDV2LTFjMjQgLTI3IDM2IC01OCAzNiAtOTBzLTEyIC02NCAtMzYgLTg5Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMXMtMTYgMzAgLTEgNDVjMjUgMjQgMjUgNjQgMCA4OGMtMTUgMTUgLTEwIDMzIDEgNDVzMjkgMTYgNDQgMXpNNjE5IDQ5MnYtM2M1MSAtNTEgNzQgLTExMCA3NCAtMTc4cy0yMyAtMTI3IC03NCAtMTc4IGMtMTMgLTE1IC0zMiAtMTEgLTQzIDBzLTE2IDMwIC0xIDQ1YzM4IDM5IDU1IDgzIDU1IDEzNHMtMTcgOTUgLTU1IDEzNGMtMTUgMTUgLTEwIDM0IDEgNDVzMzAgMTQgNDMgMXpNNzA5IDU3OXY0Yzc0IC03OCAxMTAgLTE2NiAxMTAgLTI2OHMtMzYgLTE5MCAtMTEwIC0yNjhjLTE1IC0xNSAtMzMgLTExIC00NCAwcy0xNiAzMCAtMSA0NWM2NCA2NCA5MyAxMzcgOTMgMjIxcy0yOSAxNTcgLTkzIDIyMWMtMTUgMTUgLTEwIDM0IDEgNDUgczI5IDE1IDQ0IDB6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0ibXV0ZWQiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek04NTEgNDEwbC05NSAtOTVsOTUgLTk0bC02MyAtNjNsLTk1IDk0bC05NCAtOTRsLTYzIDYzbDk0IDk0bC05NCA5NWw2MyA2M2w5NCAtOTVsOTUgOTV6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8taG9sZGVyIj48L2Rpdj4KICAgIDwvZGl2Pg==",css:"KiB7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KaHRtbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQojY29udGFpbmVyIHsKICBvcGFjaXR5OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBmb250LWZhbWlseTogJ0hlbHZldGljYScsICdBcmlhbCcsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxNnB4Owp9Ci52aWRlby1ob2xkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogcG9pbnRlcjsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3ZlciB7CiAgd2lkdGg6IGF1dG87CiAgbGVmdDogNTAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyLXggewogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMTAwJTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3Zlci15IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KI3Bvc3RlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsKICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgei1pbmRleDogMTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwp9CiNwb3N0ZXIuY292ZXIgewogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmltYWdlR2VuZXJhdG9yTW9kZSAjcGxheS1wYXVzZS1vdmVybGF5LAouaW1hZ2VHZW5lcmF0b3JNb2RlICN2aWRlby1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNjb250YWluZXI6aG92ZXIgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNjb250YWluZXIuaXNQYXVzZWQgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgewogIGRpc3BsYXk6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAyOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAxOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5LnNob3cgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuaGlkZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wYXVzZSAucGF1c2UgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wbGF5IC5wbGF5IHsKICBkaXNwbGF5OiBibG9jazsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogNDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDAuNTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC41KTsKICBzdHJva2U6IHJnYmEoMCwwLDAsMC43KTsKICBzdHJva2Utd2lkdGg6IDFweDsKICBwYWRkaW5nOiAycHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgc3ZnICogewogIGZpbGw6IGluaGVyaXQ7Cn0KI3BsYXktcGF1c2Utb3ZlcmxheSBzdmc6aG92ZXIgewogIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKfQojdmlkZW8tY29udHJvbHMgewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41KTsKICBjb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwcHg7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKICBkaXNwbGF5OiBub25lOwogIHotaW5kZXg6IDM7Cn0KI3ZpZGVvLWNvbnRyb2xzLnNob3cgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7Cn0KI3ZpZGVvLWNvbnRyb2xzID5kaXY6bm90KCNwcm9ncmVzcykgewogIGZsb2F0OiBsZWZ0OwogIHdpZHRoOiAyNXB4OwogIGhlaWdodDogMzBweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQojdmlkZW8tY29udHJvbHMgPmRpdjpiZWZvcmUgewogIGNvbnRlbnQ6ICcnOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQojdmlkZW8tY29udHJvbHMgc3ZnIHsKICB3aWR0aDogMjVweDsKICBoZWlnaHQ6IDI1cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZpbGw6ICNmZmY7Cn0KI3BsYXliYWNrIHsKICB3aWR0aDogMzBweCAhaW1wb3J0YW50Owp9CiNwbGF5YmFjay5pc1BhdXNlZCAuaWNvbi1wbGF5IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KI3BsYXliYWNrLmlzUGxheWluZyAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CiNwbGF5YmFjayAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogbm9uZTsKfQojcGxheWJhY2sgLmljb24tcGxheSB7CiAgZGlzcGxheTogbm9uZTsKfQojcHJvZ3Jlc3MtYmFyIHsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7CiAgLW1zLWZsZXgtcGFjazogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtZmxleDogNTsKICAtbXMtZmxleC1wb3NpdGl2ZTogNTsKICBmbGV4LWdyb3c6IDU7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzLXRpbWVyIHsKICB3aWR0aDogODdweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxMXB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyBzcGFuIHsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3Byb2dyZXNzLWJhciAjcHJvZ3Jlc3MgI3RpbWVCYXIgewogIHotaW5kZXg6IDEwOwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuMXM7CiAgdHJhbnNpdGlvbjogd2lkdGggMC4xczsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyAjYnVmZmVyQmFyIHsKICB6LWluZGV4OiA1OwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKfQojdm9sdW1lIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtbXMtZmxleC1wb3NpdGl2ZTogMTsKICBmbGV4LWdyb3c6IDE7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LW9yaWVudDogaG9yaXpvbnRhbDsKICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsKICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdzsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIG1hcmdpbi1yaWdodDogNXB4Owp9CiN2b2x1bWUubW9iaWxlLXZvbHVtZSB7CiAgLXdlYmtpdC1ib3gtZmxleDogMDsKICAtbXMtZmxleC1wb3NpdGl2ZTogMDsKICBmbGV4LWdyb3c6IDA7Cn0KI3ZvbHVtZSAjdm9sdW1lLXZhbHVlIHsKICB6LWluZGV4OiAxMDsKICB3aWR0aDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7CiAgaGVpZ2h0OiAxMDAlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAwLjJzOwogIHRyYW5zaXRpb246IHdpZHRoIDAuMnM7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojdm9sdW1lICN2b2x1bWUtaWNvbiB7CiAgd2lkdGg6IDI1cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWNvbnRyb2xsZXIgewogIHdpZHRoOiA4MCU7CiAgaGVpZ2h0OiA3cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC40KTsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uIHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWljb24ubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lICN2b2x1bWUtaWNvbi51bm11dGVkIHN2Zy51bm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojZnVsbHNjcmVlbiB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQojZnVsbHNjcmVlbiBzdmcgewogIHdpZHRoOiAxNHB4OwogIG1hcmdpbi1yaWdodDogM3B4Owp9CiN2b2x1bWVUb2dnbGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA0OwogIHdpZHRoOiAxMCU7CiAgaGVpZ2h0OiAxMCU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CiN2b2x1bWVUb2dnbGUubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lVG9nZ2xlLnVubXV0ZWQgc3ZnLnVubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWVUb2dnbGUgc3ZnIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogbm9uZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgZmlsbDogI2ZmZjsKfQojdm9sdW1lVG9nZ2xlIHN2ZyAqIHsKICBmaWxsOiBpbmhlcml0Owp9CkBtZWRpYSAobWF4LXdpZHRoOiAyOTBweCkgewogICNwcm9ncmVzcy10aW1lciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KfQpAbWVkaWEgKG1heC13aWR0aDogMjAwcHgpIHsKICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1pY29uIHsKICAgIHdpZHRoOiBhdXRvOwogIH0KICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1jb250cm9sbGVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CiNpbnN0cnVjdGlvbnMgewogIGJhY2tncm91bmQ6ICMzNjM2MzY7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA5OTsKICBjb2xvcjogI2Y3ZjdmNzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdmVydGljYWwtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxNXB4OwogIGRpc3BsYXk6IG5vbmU7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOwogIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZm9udC1zaXplOiAwLjlyZW07Cn0KI2luc3RydWN0aW9ucyBzdHJvbmcgewogIGZvbnQtc2l6ZTogMS4xcmVtOwp9CiNpbnN0cnVjdGlvbnMuc2hvdyB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXN0YXJ0LXBsYXliYWNrLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQp2aWRlbzo6LWludGVybmFsLW1lZGlhLWNvbnRyb2xzLWRvd25sb2FkLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1lbmNsb3N1cmUgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KdmlkZW86Oi13ZWJraXQtbWVkaWEtY29udHJvbHMtcGFuZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgKyAzMHB4KTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqLwp9",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgfSk7DQp9Ow0KV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gdHJ1ZTsNCnZhciB2aWRlbzsNCnZhciBmaXJzdFBsYXlUaHJvdWdoID0gdHJ1ZTsNCnZhciB2aWRlb0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taG9sZGVyJyk7DQp2YXIgdmlkZW9TZXR0aW5ncyA9IHt9Ow0KdmFyIGhhc1N0b3BwZWQgPSBmYWxzZTsNCnZhciBtdXRlZFN0YXRlID0gdHJ1ZTsNCnZhciB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCnZhciBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zJyk7DQp2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOw0KdmFyIGZlZWQsIGZlZWRVcmwsIGZlZWRJdGVyYXRpb25JbmRleDsNCi8qDQoqKiBCYW5uZXJmbG93IGV2ZW50cw0KKi8NCmxldCBvbkxvYWRlZFByb21pc2VSZXNvbHZlcjsNCmlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgIFdpZGdldC5pc0xvYWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KICAgIH0pOw0KfQ0KdHJ5IHsNCiAgICBzZXRTZXR0aW5ncygpOw0KICAgIGNyZWF0ZVZpZGVvKCk7DQp9DQpjYXRjaCAoZSkgew0KICAgIC8vIGNvbnNvbGUuZXJyb3IoZS5zdGFjayk7IA0KfQ0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TZWVrLCB0aW1lID0+IHsNCiAgICAvLyBpZih2aWRlbyAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2NyZWF0aXZlJykgeyANCiAgICAvLyAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lICsgdGltZSAtIFdpZGdldC50aW1lKSk7DQogICAgLy8gfQ0KICAgIGlmICh2aWRlbykgew0KICAgICAgICB2aWRlby5zZWVrVG8oTWF0aC5hYnModmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgKyB0aW1lIC0gV2lkZ2V0LnRpbWUpKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGxheSwgdGltZSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbykgew0KICAgICAgICAgICAgdmlkZW8ucG9zdGVyLnN0eWxlLnNldFByb3BlcnR5KCJkaXNwbGF5IiwgIm5vbmUiLCAiaW1wb3J0YW50Iik7DQogICAgICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnICYmICh0aW1lID49IFdpZGdldC50aW1lICYmIHRpbWUgPCBXaWRnZXQuZHVyYXRpb24pKSB7DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsNCiAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LCAwKTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgdGltZSA9PiB7DQogICAgaWYgKHZpZGVvKSB7DQogICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHRpbWUgLSBXaWRnZXQudGltZSkpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuUmVzaXplLCAoKSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgdmlkZW8uc2V0RmlsbE9wdGlvbigpOw0KICAgICAgICB9DQogICAgfSwgMCk7DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5Qcm9wZXJ0eUNoYW5nZWQsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICB2aWRlb0VsZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gV2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzICsgJyUnOw0KICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRJbmRleCAtIDE7DQogICAgdHJ5IHsNCiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkICYmIFdpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmlkKSB7DQogICAgICAgICAgICBmZWVkID0geWllbGQgV2lkZ2V0LnByb3BlcnRpZXMuZHluYW1pY0NvbnRlbnQubG9hZCgpOw0KICAgICAgICAgICAgaWYgKGZlZWQgJiYgZmVlZC5kYXRhICYmIGZlZWQuZGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBmZWVkID0gZmVlZC5kYXRhOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChlKSB7IH0NCiAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJzsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICBmZWVkVXJsID0gZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0udmFsdWU7DQogICAgfQ0KICAgIGluc3RydWN0aW9ucy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgaWYgKCFXaWRnZXQucHJvcGVydGllcy51cmwgfHwgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgIWZlZWRVcmwpKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHVybCA9IFdpZGdldC5wcm9wZXJ0aWVzLnVybDsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHVybCA9IGZlZWRVcmw7DQogICAgfQ0KICAgIHNldFNldHRpbmdzKCk7DQogICAgaWYgKCF2aWRlbykgew0KICAgICAgICBjcmVhdGVWaWRlbygpOw0KICAgIH0NCiAgICBpZiAodXJsID09IHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS51cmwpIHsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICB9DQogICAgaWYgKHZpZGVvICYmIHVybCAhPT0gdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLnVybCkgew0KICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAodXJsKSk7DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQp9KSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuQW5pbWF0aW9uU3RhcnQsICgpID0+IHsNCiAgICBpZiAodmlkZW8gJiYgIWhhc1N0b3BwZWQpIHsNCiAgICAgICAgaWYgKHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS5hdXRvcGxheSkgew0KICAgICAgICAgICAgaWYgKGZpcnN0UGxheVRocm91Z2ggJiYgVGltZWxpbmUuaXNQbGF5aW5nKSB7DQogICAgICAgICAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLmxvb3BXaXRoQmFubmVyIHx8IGZpcnN0UGxheVRocm91Z2gpIHsNCiAgICAgICAgICAgICAgICAgICAgdmlkZW8uc2Vla1RvKFdpZGdldC5wcm9wZXJ0aWVzLnN0YXJ0VGltZSk7DQogICAgICAgICAgICAgICAgICAgIGZpcnN0UGxheVRocm91Z2ggPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgICAgICAgICBmaXJzdFBsYXlUaHJvdWdoID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSAmJiAhdmlkZW8udmlkZW8ucGF1c2VkKSB7DQogICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSkgew0KICAgICAgICAgICAgaWYgKFRpbWVsaW5lLmlzUGxheWluZykgew0KICAgICAgICAgICAgICAgIHZpZGVvLnNlZWtUbyhXaWRnZXQucHJvcGVydGllcy5zdGFydFRpbWUpOw0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdpbWFnZScpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKHZpZGVvICYmICF2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsNCiAgICAgICAgaWYgKFRpbWVsaW5lLmR1cmF0aW9uICE9PSBXaWRnZXQuZHVyYXRpb24pIHsNCiAgICAgICAgICAgIHZpZGVvLnRvZ2dsZU11dGUobXV0ZWRTdGF0ZSk7DQogICAgICAgIH0NCiAgICB9DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5BbmltYXRpb25FbmQsICgpID0+IHsNCiAgICBpZiAoVGltZWxpbmUuZHVyYXRpb24gIT09IFdpZGdldC5kdXJhdGlvbikgew0KICAgICAgICBtdXRlZFN0YXRlID0gdmlkZW8udmlkZW8ubXV0ZWQ7DQogICAgICAgIHZpZGVvLnRvZ2dsZU11dGUodHJ1ZSk7DQogICAgfQ0KICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMuc3RhdGljSW5kZXggJiYgV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCkgew0KICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleCArIDFdICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4ICsgMV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZEl0ZXJhdGlvbkluZGV4Kys7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBmZWVkSXRlcmF0aW9uSW5kZXggPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZFVybCA9IGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XVtXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGRdLnZhbHVlOw0KICAgICAgICAgICAgc2V0U2V0dGluZ3MoKTsNCiAgICAgICAgICAgIHZpZGVvLmxvYWRWaWRlbyhzdHJpcChmZWVkVXJsKSk7DQogICAgICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuU2hvd1ByZWxvYWRJbWFnZSwgKCkgPT4gew0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJibG9jayIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgfQ0KICAgIH0sIDApOw0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50Lkxvb3AsICgpID0+IHsNCiAgICBpZiAoaGFzU3RvcHBlZCkgew0KICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5KSB7DQogICAgICAgIC8vIHZpZGVvLnJlc3RhcnQoKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU3RvcCwgKCkgPT4gew0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuc3RvcFdpdGhDcmVhdGl2ZSkgew0KICAgICAgICB2aWRlby5zdG9wKCk7DQogICAgICAgIGhhc1N0b3BwZWQgPSB0cnVlOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgfQ0KfSk7DQpmdW5jdGlvbiBjcmVhdGVWaWRlbygpIHsNCiAgICBpZiAoIXZpZGVvKSB7DQogICAgICAgIHZpZGVvID0gbmV3IEJGVmlkZW8odmlkZW9FbGVtLCB2aWRlb1NldHRpbmdzLCBWaWRlb1RyYWNraW5nKTsNCiAgICB9DQp9DQpmdW5jdGlvbiBzZXRTZXR0aW5ncygpIHsNCiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHNldHRpbmdzID0gV2lkZ2V0LnByb3BlcnRpZXM7DQogICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgdmlkZW9TZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgfQ0KICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoV2lkZ2V0LnByb3BlcnRpZXMudXJsKTsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoZmVlZFVybCk7DQogICAgfQ0KICAgIGxldCBwb3N0ZXI7DQogICAgbGV0IGZhbGxiYWNrSW1hZ2U7DQogICAgaWYgKHZpZGVvU2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgIHBvc3RlciA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLnBvc3Rlcik7DQogICAgfQ0KICAgIGlmICh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgZmFsbGJhY2tJbWFnZSA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpOw0KICAgIH0NCiAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IHBvc3RlcjsNCiAgICB2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgPSBmYWxsYmFja0ltYWdlOw0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJykgew0KICAgICAgICB2aWRlb1NldHRpbmdzLmNvbnRyb2xzID0gZmFsc2U7DQogICAgICAgIHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lID0gdmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgPD0gMSA/IDEgOiB2aWRlb1NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgdmlkZW9TZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOw0KICAgICAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IG51bGw7DQogICAgfQ0KfQ0KZnVuY3Rpb24gZ2V0T3B0aW1hbEltYWdlKHNyYykgew0KICAgIHJldHVybiBXaWRnZXQuZ2V0T3B0aW1pemVkSW1hZ2VVcmwoc3JjLCB7IHdpZHRoOiBXaWRnZXQud2lkdGgsIGhlaWdodDogV2lkZ2V0LmhlaWdodCwgZml0T3B0aW9uOiBXaWRnZXQucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbC50b0xvd2VyQ2FzZSgpIH0pOw0KfQ0KZnVuY3Rpb24gc3RyaXAocykgew0KICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKTsNCiAgICB0bXAuaW5uZXJIVE1MID0gczsNCiAgICByZXR1cm4gdG1wLnRleHRDb250ZW50IHx8IHRtcC5pbm5lclRleHQgfHwgIiI7DQp9DQpmdW5jdGlvbiBjb3B5KGEpIHsNCiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7DQp9DQpmdW5jdGlvbiBCRlZpZGVvKGVsZW0sIG9wdGlvbnMsIFZpZGVvVHJhY2tpbmcpIHsNCiAgICB2YXIgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhvcHRpb25zKTsNCiAgICB2YXIgX3ZpZGVvOw0KICAgIHZhciBzZWxmID0gdGhpczsNCiAgICB2YXIgZWxCeUlkID0gZnVuY3Rpb24gKHNlbCkgew0KICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsKTsNCiAgICB9Ow0KICAgIHZhciBldmVudFF1ZXVlID0gW107DQogICAgdmFyIGRldmljZUluZm8gPSBnZXREZXZpY2VJbmZvKCk7DQogICAgdmFyIHBsYXlQcm9taXNlOw0KICAgIHZhciBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICB2YXIgdmlkZW9UcmFja2luZzsNCiAgICB2YXIgZGVmYXVsdFZpZGVvVHlwZXMgPSBbDQogICAgICAgIHsNCiAgICAgICAgICAgIGV4dGVuc2lvbjogJ21wNCcsDQogICAgICAgICAgICB0eXBlOiAndmlkZW8vbXA0Jw0KICAgICAgICB9DQogICAgXTsNCiAgICB2YXIgdG90YWxQbGF5dGltZTsNCiAgICB2YXIgdm9sdW1lID0gMDsNCiAgICB2YXIgaGFzUGxheWVkID0gZmFsc2U7DQogICAgdmFyIHJlYWR5U3RhdGUgPSAwOw0KICAgIHZhciBwbGF5ZXIgPSBlbEJ5SWQoJ3ZpZGVvLXBsYXllcicpOw0KICAgIHZhciB2aWRlb0NvbnRhaW5lciA9IGVsQnlJZCgnY29udGFpbmVyJyk7DQogICAgdmFyIHBsYXlQYXVzZU92ZXJsYXkgPSBlbEJ5SWQoJ3BsYXktcGF1c2Utb3ZlcmxheScpOw0KICAgIHZhciBwb3N0ZXIgPSBlbEJ5SWQoJ3Bvc3RlcicpOw0KICAgIC8vIEluaXRpYWxpemUgVmlkZW8gY29udHJvbHMNCiAgICB2YXIgdmlkZW9Db250cm9scyA9IGVsQnlJZCgndmlkZW8tY29udHJvbHMnKTsNCiAgICB2YXIgcGxheWJhY2sgPSBlbEJ5SWQoJ3BsYXliYWNrJyk7DQogICAgdmFyIHZvbHVtZUNvbnRhaW5lciA9IGVsQnlJZCgndm9sdW1lJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2wgPSBlbEJ5SWQoJ3ZvbHVtZS1jb250cm9sbGVyJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xWYWx1ZSA9IGVsQnlJZCgndm9sdW1lLXZhbHVlJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xUb2dnbGUgPSBlbEJ5SWQoJ3ZvbHVtZS1pY29uJyk7DQogICAgdmFyIHByb2dyZXNzID0gZWxCeUlkKCdwcm9ncmVzcycpOw0KICAgIHZhciB2aWRlb0R1cmF0aW9uID0gZWxCeUlkKCdwcm9ncmVzcy10aW1lcicpOw0KICAgIHZhciBmdWxsc2NyZWVuID0gZWxCeUlkKCdmdWxsc2NyZWVuJyk7DQogICAgdmFyIHRpbWVCYXIgPSBlbEJ5SWQoJ3RpbWVCYXInKTsNCiAgICBwbGF5YmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVG9nZ2xlUGxheVBhdXNlKTsNCiAgICB2b2x1bWVDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uVm9sdW1lRHJhZyk7DQogICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVm9sdW1lVG9nZ2xlKTsNCiAgICBwcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblRpbWVTZWVrRHJhZyk7DQogICAgZnVsbHNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUZ1bGxzY3JlZW4pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNvbnRyb2xzTW91c2VVcCk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Db250cm9sc01vdXNlRG93bik7DQogICAgdmFyIHZvbHVtZVRvZ2dsZUJ1dHRvbiA9IGVsQnlJZCgndm9sdW1lVG9nZ2xlJyk7DQogICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Wb2x1bWVUb2dnbGUpOw0KICAgIHRyeSB7DQogICAgICAgIGlmIChwbGF5ZXIpIHsNCiAgICAgICAgICAgIHBsYXllci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBsYXllcik7DQogICAgICAgICAgICBfdmlkZW8gPSBudWxsOw0KICAgICAgICB9DQogICAgICAgIGlmICghX3NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgX3NldHRpbmdzLnVybCA9ICcnOw0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1cmwuJyk7DQogICAgICAgIH0NCiAgICAgICAgLy8gU2V0IHBvc3RlciBiZWZvcmUgbG9hZGluZyB2aWRlbw0KICAgICAgICBpZiAoX3NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5wb3N0ZXIgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgJiYgZGV2aWNlSW5mby5pc01vYmlsZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvID0gY3JlYXRlVmlkZW9FbGVtZW50KF9zZXR0aW5ncy51cmwpOw0KICAgICAgICBlbGVtLmFwcGVuZENoaWxkKF92aWRlbyk7DQogICAgICAgIC8vIEltbWVkaWF0ZWx5IHNldCBmaWxsIG9wdGlvbiB0byBhdm9pZCByZXNpemluZyB0byBiZSBzZWVuDQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICAgICAgaWYgKEFkLnBhcmFtZXRlcnMuaXNPbW5pUmVuZGVyKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBvbk1ldGFMb2FkZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvblZpZGVvRW5kZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIG9uVmlkZW9QbGF5KTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgb25WaWRlb1BhdXNlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsIG9uVm9sdW1lQ2hhbmdlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAvKg0KICAgICAgICAqIFdlIHVzZSBSQUYgaW5zdGVhZCBvZiBuYXRpdmUgdGltZXVwZGF0ZSBldmVudCBvbiB0aGUgbWVkaWEgQVBJIHRvDQogICAgICAgICogZ2V0IGEgbW9yZSBhY2N1cmF0ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSB2aWRlbw0KICAgICAgICAqLw0KICAgICAgICBjb25zdCB3ID0gd2luZG93Ow0KICAgICAgICB2YXIgcmFmID0gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB3LnJlcXVlc3RBbmltYXRpb25GcmFtZQ0KICAgICAgICAgICAgICAgIHx8IHcud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgZnVuY3Rpb24gKGNiKSB7IHNldFRpbWVvdXQoY2IsIDEwMDAgLyAzMCk7IH07DQogICAgICAgIH0pKCk7DQogICAgICAgIGZ1bmN0aW9uIHRpbWVVcGRhdGUoKSB7DQogICAgICAgICAgICBvblRpbWVVcGRhdGVkKCk7DQogICAgICAgICAgICByYWYodGltZVVwZGF0ZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOw0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7DQogICAgfQ0KICAgIGNhdGNoIChlKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZS5zdGFjayk7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFVwZGF0ZXMgdmlkZW8ncyBzZXR0aW5ncw0KICAgICAqIE9ubHkgc2V0dGluZ3MgdGhhdCBhcmUgcGFzc2VkIGFyZSBjaGFuZ2VkLCByZXN0IHJlbWFpbiBwZXJzaXN0ZW50DQogICAgICogQHBhcmFtICB7fSBzZXR0aW5ncw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldFZpZGVvU2V0dGluZ3Moc2V0dGluZ3MpIHsNCiAgICAgICAgLy8gTWVyZ2UgY3VycmVudCBzZXR0aW5ncyB3aXRoIHBvdGVudGlhbCBuZXcgc2V0dGluZ3MNCiAgICAgICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgICAgIF9zZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgICAgIH0NCiAgICAgICAgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhfc2V0dGluZ3MpOw0KICAgICAgICB2aWRlb1RyYWNraW5nID0gbmV3IFZpZGVvVHJhY2tpbmcoZ2V0VXJsTWV0YShfc2V0dGluZ3MudXJsKSk7DQogICAgICAgIHRvdGFsUGxheXRpbWUgPSAoX3NldHRpbmdzLnN0YXJ0VGltZSA+PSAxICYmIF9zZXR0aW5ncy5lbmRUaW1lID49IDEpDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5lbmRUaW1lIC0gX3NldHRpbmdzLnN0YXJ0VGltZQ0KICAgICAgICAgICAgOiBfdmlkZW8uZHVyYXRpb24gLSBfc2V0dGluZ3Muc3RhcnRUaW1lOw0KICAgICAgICBpZiAoX3NldHRpbmdzLmxvb3BXaXRoQmFubmVyKSB7DQogICAgICAgICAgICBpZiAoV2lkZ2V0LmR1cmF0aW9uID4gX3ZpZGVvLmR1cmF0aW9uKSB7DQogICAgICAgICAgICAgICAgdG90YWxQbGF5dGltZSA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRvdGFsUGxheXRpbWUgPSBXaWRnZXQuZHVyYXRpb247DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIE9ubHkgc2V0IGF1dG9wbGF5IHRvIHRydWUgaWYgdGhlIGRldmljZSBzdXBwb3J0cyBwbGF5c0lubGluZSBhdHRyaWJ1dGUgYW5kIGlzIG1vYmlsZSwNCiAgICAgICAgICogYXV0b3BsYXlpbmcgaXMgb3RoZXJ3aXNlIGhhbmRsZWQgZnJvbSBvbkNhblBsYXkgdG8gZW5zdXJlIHRoYXQgdGhlIHZpZGVvIGlzIHJlYWR5IGZvciBwbGF5YmFjay4NCiAgICAgICAgICogVGhpcyBpcyB0byBwcm9wZXJseSBzaG93L2hpZGUgdGhlIHBvc3RlciB3aGlsc3QgdmlkZW8gaXMgYnVmZmVyaW5nDQogICAgICAgICAqLw0KICAgICAgICBfdmlkZW8uYXV0b3BsYXkgPSBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZQ0KICAgICAgICAgICAgPyBfc2V0dGluZ3MuYXV0b3BsYXkNCiAgICAgICAgICAgIDogZmFsc2U7DQogICAgICAgIF92aWRlby5jb250cm9scyA9IGRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5jb250cm9scw0KICAgICAgICAgICAgOiBmYWxzZTsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgc2V0Vm9sdW1lKF9zZXR0aW5ncy52b2x1bWUpOw0KICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIGF1dG9wbGF5IGFuZCB0aGVyZSdzIHZvbHVtZSB0aGVyZSdzIG5vIHBvaW50IGluIG11dGluZyB0aGUgdmlkZW8gYnkgZGVmYXVsdA0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3Mudm9sdW1lKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8ucGxheWJhY2tSYXRlID0gX3NldHRpbmdzLnBsYXliYWNrUmF0ZTsNCiAgICAgICAgLy8gVXBkYXRlIHBvc3RlciBpZiBjaGFuZ2VkDQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2ltYWdlJyAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLnBvc3RlciArICcpJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICAgICAgdXBkYXRlRE9NKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFByb3BlclVybCh1cmwpIHsNCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyhcclxufFxufFxyfFxzKS9nbSwgIiIpOw0KICAgICAgICBsZXQgdXJscyA9IHVybC5zcGxpdCgnLCcpOw0KICAgICAgICBpZiAoKHVybHMubGVuZ3RoID09PSAyICYmICF1cmwubWF0Y2goL1wuKHdlYm18bW92KS8pKSB8fCB1cmxzLmxlbmd0aCA+IDIpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh1cmxzLmxlbmd0aCA9PT0gMSAmJiAhdXJsLm1hdGNoKCcubXA0JykpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodXJscy5sZW5ndGggPT09IDIpIHsNCiAgICAgICAgICAgIGlmIChnZXREZXZpY2VJbmZvKCkuaXNTYWZhcmkpIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmxzWzBdLm1hdGNoKCcubW92JykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHVybCA9IHVybHNbMF0ubWF0Y2goJy53ZWJtJykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpbnN0cnVjdGlvbnMuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICByZXR1cm4gdXJsOw0KICAgIH0NCiAgICBmdW5jdGlvbiBjcmVhdGVWaWRlb0VsZW1lbnQodXJsKSB7DQogICAgICAgIHVybCA9IGdldFByb3BlclVybCh1cmwpOw0KICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHZhciB1ID0gZ2V0VXJsTWV0YSh1cmwpOw0KICAgICAgICBjb25zdCB2aWRlb1R5cGUgPSBnZXRWaWRlb1R5cGVBbmRVcGRhdGVTb3VyY2VVcmwodSk7DQogICAgICAgIHZhciB1cmxTcmMgPSB1LnNvdXJjZVVybDsNCiAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gdS5wYXJhbXM7DQogICAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgIHZpZGVvLmlkID0gJ3ZpZGVvLXBsYXllcic7DQogICAgICAgIHZpZGVvLnByZWxvYWQgPSAnbWV0YWRhdGEnOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICcnKTsNCiAgICAgICAgLy8gTXV0ZWQgaXMgc2V0IGhlcmUgaW5zdGVhZCBvZiBzZXRWaWRlb1NldHRpbmcgdG8gcHJldmVudCBpdCB0byBiZSBtdXRlZCB3aGVuIG5vdCB3YW50ZWQNCiAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlOw0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpIGluIHZpZGVvVHlwZSkgew0KICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW2ldLmV4dGVuc2lvbiArIHF1ZXJ5UGFyYW1zOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoInR5cGUiLCB2aWRlb1R5cGVbaV0udHlwZSk7DQogICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmlkZW87DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KSB7DQogICAgICAgIGxldCB2aWRlb1R5cGU7DQogICAgICAgIGlmICh1LmV4dC5tYXRjaCgvKHdlYm18bW92KS8pKSB7DQogICAgICAgICAgICBpZiAoZ2V0RGV2aWNlSW5mbygpLmlzU2FmYXJpKSB7DQogICAgICAgICAgICAgICAgdmlkZW9UeXBlID0gW3sNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogJ21vdicsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vcXVpY2t0aW1lJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZpZGVvVHlwZSA9IFt7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246ICd3ZWJtJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB2aWRlb1R5cGU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZpZGVvVHlwZXM7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdXBkYXRlRE9NKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIWRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlKSB7DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3RhcnRUaW1lID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdtb2JpbGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5jb250cm9scyAmJiAhX3NldHRpbmdzLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ICE9PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICB9DQogICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzBdLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnBsYXlQYXVzZUJ1dHRvblNpemUgKyAnJSc7DQogICAgICAgIHBsYXlQYXVzZU92ZXJsYXkucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUud2lkdGggPSBfc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSArICclJzsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5jb250cm9scyAmJiAhZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW9Db250cm9scy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2aWRlb0NvbnRyb2xzLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gX3NldHRpbmdzLnBsYXllckJhY2tncm91bmQ7DQogICAgICAgIF92aWRlby5zdHlsZS5maWx0ZXIgPSAnZ3JheXNjYWxlKCcgKyBfc2V0dGluZ3MuZ3JheVNjYWxlICsgJyUpJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLnRvcCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCArICclJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmxlZnQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ICsgJyUnOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uc3R5bGUud2lkdGggPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5xdWVyeVNlbGVjdG9yQWxsKCdzdmcnKVswXS5zdHlsZS5maWxsID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbkNvbG9yOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24ucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUuZmlsbCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSArPSAiaW1hZ2VHZW5lcmF0b3JNb2RlIjsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwwLDAsMCknOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICB9DQogICAgZnVuY3Rpb24gc2V0RmlsbE9wdGlvbigpIHsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5iYWNrZ3JvdW5kRmlsbCA9PT0gJ0NvdmVyJykgew0KICAgICAgICAgICAgcG9zdGVyLmNsYXNzTmFtZSA9ICdjb3Zlcic7DQogICAgICAgICAgICAoX3ZpZGVvLnZpZGVvSGVpZ2h0IC8gX3ZpZGVvLnZpZGVvV2lkdGgpIDw9ICh2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyB2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCkNCiAgICAgICAgICAgICAgICA/IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteCcNCiAgICAgICAgICAgICAgICA6IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwb3N0ZXIuY2xhc3NOYW1lID0gJyc7DQogICAgICAgICAgICBfdmlkZW8uY2xhc3NOYW1lID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5wb3N0ZXIpIHsNCiAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHJlc3RhcnRWaWRlbygpIHsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgLy8gaWYoX3NldHRpbmdzLmxvb3Apew0KICAgICAgICBwbGF5VmlkZW8oKTsNCiAgICAgICAgLy8gfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRSZWFkeVN0YXRlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnJlYWR5U3RhdGUgPiByZWFkeVN0YXRlKSB7DQogICAgICAgICAgICByZWFkeVN0YXRlID0gX3ZpZGVvLnJlYWR5U3RhdGU7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gcGxheVZpZGVvKGZvcmNlUGxheSkgew0KICAgICAgICAvKg0KICAgICAgICAgKiBDaGVjayBpZiB0aGUgdmlkZW8gaXMgcGxheWFibGUsIG90aGVyd2lzZSBhZGQgaXQgdG8gdGhlIGV2ZW50UXVldWUgd2hpY2gNCiAgICAgICAgICogdHJpZ2dlcnMgcGxheSBvbiBvbkNhblBsYXkgd2hpY2ggaXMgd2hlbiB2aWRlbyBpcyBwbGF5YWJsZQ0KICAgICAgICAgKi8NCiAgICAgICAgc2V0UmVhZHlTdGF0ZSgpOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkgfHwgaGFzUGxheWVkKSB7DQogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDE1MCk7DQogICAgICAgIGlmICgocmVhZHlTdGF0ZSA+PSAzICYmIF9zZXR0aW5ncy5hdXRvcGxheSkgfHwgaGFzUGxheWVkIHx8IGZvcmNlUGxheSkgew0KICAgICAgICAgICAgaWYgKF92aWRlby52b2x1bWUgPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSBfdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGRldmljZUluZm8uaXNNb2JpbGUgJiYgIWRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycgJiYgX3NldHRpbmdzLnBvc3RlciA/ICdibG9jaycgOiAnbm9uZSc7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiBfc2V0dGluZ3MucG9zdGVyID8gJ25vbmUnIDogJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmNvbnRyb2xzICYmICFfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGV2ZW50UXVldWUucHVzaCgncGxheScpOw0KICAgICAgICAgICAgaWYgKHZpZGVvVHJhY2tpbmcpIHsNCiAgICAgICAgICAgICAgICB2aWRlb1RyYWNraW5nLnN0YXJ0ZWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZWVrVG8ocykgew0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IHM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHBhdXNlVmlkZW8oKSB7DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkICYmICFwZW5kaW5nUGF1c2UpIHsNCiAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICBfdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgfQ0KICAgICAgICBwZW5kaW5nUGF1c2UgPSB0cnVlOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzdG9wVmlkZW8oKSB7DQogICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldFZvbHVtZSh2b2x1bWUpIHsNCiAgICAgICAgX3ZpZGVvLnZvbHVtZSA9IGRldmljZUluZm8uaXNNb2JpbGUgPyAwIDogdG9GcmFjdGlvbnModm9sdW1lKTsNCiAgICAgICAgLy8gQmFubmVyRmxvdy5yYWlzZUV2ZW50KCd2b2x1bWVDaGFuZ2VkJywgX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvZ2dsZU11dGUobXV0ZSkgew0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIF92aWRlby5tdXRlZCA9ICh0eXBlb2YgbXV0ZSA9PT0gJ2Jvb2xlYW4nKSA/IG11dGUgOiAhX3ZpZGVvLm11dGVkOw0KICAgICAgICAvLyBCYW5uZXJGbG93LnJhaXNlRXZlbnQoJ3ZvbHVtZUNoYW5nZWQnLCBfdmlkZW8ubXV0ZWQgPyAwIDogX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGxvYWRWaWRlbyh1cmwpIHsNCiAgICAgICAgdXJsID0gZ2V0UHJvcGVyVXJsKHVybCk7DQogICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdXJsID0gZ2V0QWRqdXN0ZWRVcmwodXJsKTsNCiAgICAgICAgdmFyIHUgPSBnZXRVcmxNZXRhKHVybCk7DQogICAgICAgIGNvbnN0IHZpZGVvVHlwZSA9IGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KTsNCiAgICAgICAgdmFyIHVybFNyYyA9IHUuc291cmNlVXJsOw0KICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB1LnBhcmFtczsNCiAgICAgICAgLy8gVXBkYXRlIHNvdXJjZXMNCiAgICAgICAgZm9yICh2YXIgdnQgaW4gdmlkZW9UeXBlKSB7DQogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NvdXJjZScpW3Z0XTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW3Z0XS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgY3VycmVudFZvbHVtZSA9IF92aWRlby52b2x1bWU7DQogICAgICAgIF92aWRlby5sb2FkKCk7DQogICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGF1c2VWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIHNldFZpZGVvU2V0dGluZ3MoeyB1cmw6IHVybCB9KTsNCiAgICAgICAgc2V0Vm9sdW1lKGN1cnJlbnRWb2x1bWUpOw0KICAgIH0NCiAgICBmdW5jdGlvbiB0b2dnbGVQbGF5UGF1c2VCdXR0b24oKSB7DQogICAgICAgIGlmIChfdmlkZW8ucGF1c2VkKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5wYXVzZWQgfHwgX3ZpZGVvLmVuZGVkKSB7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gZ2V0VXJsTWV0YSh1cmwpIHsNCiAgICAgICAgdmFyIG8gPSB7fTsNCiAgICAgICAgLy8gaWYoIXZhbGlkYXRlVXJsKHVybCkpew0KICAgICAgICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWQgbm90IHJlY2VpdmUgYSB2YWxpZCBVUkwuJyk7DQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKHVybCAmJiB1cmwubGVuZ3RoKSB7DQogICAgICAgICAgICBvLnVybCA9IHVybC5zcGxpdCgnPycpWzBdOw0KICAgICAgICAgICAgby5zb3VyY2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXS5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCIuIikpOw0KICAgICAgICAgICAgby5wYXJhbXMgPSB1cmwuaW5kZXhPZignPycpICE9IC0xID8gJz8nICsgdXJsLnNwbGl0KCc/JylbMV0gOiAnJzsNCiAgICAgICAgICAgIG8uZXh0ID0gdXJsLnNwbGl0KCc/JylbMF0uc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZigiLiIpICsgMSkgfHwgJyc7DQogICAgICAgICAgICBvLmZpbGVuYW1lID0gdXJsLm1hdGNoKC8oW14vXSskKS8sICcnKVswXS5zcGxpdCgnPycpWzBdOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBvOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV2ZW50IGhhbmRsZXJzDQogICAgKi8NCiAgICBmdW5jdGlvbiBvbk1ldGFMb2FkZWQoKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF9zZXR0aW5ncy5zdGFydFRpbWUgPSBfc2V0dGluZ3Muc3RhcnRUaW1lIDw9IF92aWRlby5kdXJhdGlvbiA/IF9zZXR0aW5ncy5zdGFydFRpbWUgOiAwOw0KICAgICAgICBzZXRWaWRlb1NldHRpbmdzKF9zZXR0aW5ncyk7DQogICAgICAgIHRpbWVVcGRhdGUoKTsNCiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gb25DYW5QbGF5KCkgew0KICAgICAgICBlbEJ5SWQoJ2luc3RydWN0aW9ucycpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgLy8gaWYoIWhhc1BsYXllZCAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICAvLyAgICAgVGltZWxpbmUucmVzdGFydCgpOw0KICAgICAgICAvLyB9DQogICAgICAgIGlmIChvbkxvYWRlZFByb21pc2VSZXNvbHZlcikgew0KICAgICAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIoKTsNCiAgICAgICAgfQ0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIGZvciAodmFyIGkgaW4gZXZlbnRRdWV1ZSkgew0KICAgICAgICAgICAgX3ZpZGVvW2V2ZW50UXVldWVbaV1dKCk7DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGV2ZW50UXVldWVbaV0gPT09ICdwbGF5JyAmJiBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlUGxheVBhdXNlQnV0dG9uKCk7DQogICAgICAgIGlmIChyZWFkeVN0YXRlID49IDMgfHwgIV92aWRlby5wYXVzZWQpIHsNCiAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVVcGRhdGVkKCkgew0KICAgICAgICBpZiAoIV92aWRlbykgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICghdGltZUJhci5zdHlsZS53aWR0aCkgew0KICAgICAgICAgICAgdGltZUJhci5zdHlsZS53aWR0aCA9IF92aWRlby5kdXJhdGlvbiArICclJzsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZCgoX3ZpZGVvLmN1cnJlbnRUaW1lIC8gX3ZpZGVvLmR1cmF0aW9uKSAqIDEwMCkgKyAnJSc7DQogICAgICAgIGlmICh2aWRlb0R1cmF0aW9uLmlubmVySFRNTC5zcGxpdCgnLycpWzBdLnRyaW0oKSAhPT0gZm9ybWF0VGltZShfdmlkZW8uY3VycmVudFRpbWUpKSB7DQogICAgICAgICAgICB2aWRlb0R1cmF0aW9uLmlubmVySFRNTCA9IGZvcm1hdFRpbWUoX3ZpZGVvLmN1cnJlbnRUaW1lKSArICcgLyAnICsgZm9ybWF0VGltZShfdmlkZW8uZHVyYXRpb24pOw0KICAgICAgICB9DQogICAgICAgIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuOTUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC45NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuY29tcGxldGVkKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gQ2hlY2sgaWYgcmVhY2hlZCB0aGlyZCBxdWFydGlsZSAoNzUlKQ0KICAgICAgICBlbHNlIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuNzUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC43NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcudHEoKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBDaGVjayBpZiByZWFjaGVkIG1pZHBvaW50ICg1MCUpDQogICAgICAgIGVsc2UgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC41MCAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjUwICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgdmlkZW9UcmFja2luZy5tcCgpOw0KICAgICAgICB9DQogICAgICAgIC8vIENoZWNrIGlmIHJlYWNoZWQgZmlyc3QgcXVhcnRpbGUgKDI1JSkNCiAgICAgICAgZWxzZSBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49IHRvdGFsUGxheXRpbWUgKiAwLjI1IC0gMSAmJiBfdmlkZW8uY3VycmVudFRpbWUgPD0gdG90YWxQbGF5dGltZSAqIDAuMjUgKyAxICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7DQogICAgICAgICAgICB2aWRlb1RyYWNraW5nLmZxKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSAoKF9zZXR0aW5ncy5lbmRUaW1lICYmIF9zZXR0aW5ncy5lbmRUaW1lIDwgX3ZpZGVvLmR1cmF0aW9uKSA/IF9zZXR0aW5ncy5lbmRUaW1lIDogX3ZpZGVvLmR1cmF0aW9uKSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgb25WaWRlb0VuZGVkKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25WaWRlb0VuZGVkKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5sb29wKSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXN0YXJ0VmlkZW8oKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGxheSgpIHsNCiAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGF1c2UoKSB7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZvbHVtZUNoYW5nZSgpIHsNCiAgICAgICAgdm9sdW1lQ29udHJvbFZhbHVlLnN0eWxlLndpZHRoID0gIV92aWRlby5tdXRlZCA/IF92aWRlby52b2x1bWUgKiAxMDAgKyAnJScgOiAnMCc7DQogICAgICAgIGlmIChfdmlkZW8udm9sdW1lID09PSAwIHx8IF92aWRlby5tdXRlZCkgew0KICAgICAgICAgICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5jbGFzc05hbWUgPSAnbXV0ZWQnOw0KICAgICAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9ICdtdXRlZCc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2b2x1bWVDb250cm9sVG9nZ2xlLmNsYXNzTmFtZSA9ICd1bm11dGVkJzsNCiAgICAgICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSAndW5tdXRlZCc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25DbGljayhldmVudCkgew0KICAgICAgICB2YXIgY2xpY2tPblBsYXlQYXVzZUJ1dHRvbiA9IGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldDsNCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBjbGlja09uUGxheVBhdXNlQnV0dG9uKSB7DQogICAgICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCkgew0KICAgICAgICAgICAgICAgIHRvZ2dsZU11dGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIHBsYXlWaWRlbyh0cnVlKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgQ3JlYXRpdmUub3BlbihldmVudCwgdW5kZWZpbmVkKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKg0KICAgICoqIFZpZGVvIGNvbnRyb2xzDQogICAgKi8NCiAgICB2YXIgdm9sdW1lRHJhZyA9IGZhbHNlOw0KICAgIHZhciB0aW1lRHJhZyA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIG9uVG9nZ2xlUGxheVBhdXNlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCB8fCBfdmlkZW8uZW5kZWQpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICAgICAgdXNlckluaXRpYXRlZFBhdXNlID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB2b2x1bWVEcmFnID0gdHJ1ZTsNCiAgICAgICAgdXBkYXRlVm9sdW1lKGUucGFnZVgpOw0KICAgIH0NCiAgICA7DQogICAgZnVuY3Rpb24gdXBkYXRlVm9sdW1lKHgpIHsNCiAgICAgICAgdmFyIG1heFZvbHVtZSA9IDE7DQogICAgICAgIHZhciBwb3NpdGlvbiA9IHggLSB2b2x1bWVDb250YWluZXIub2Zmc2V0TGVmdCAtIHZvbHVtZUNvbnRyb2wub2Zmc2V0TGVmdCAtIDI7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyB2b2x1bWVDb250cm9sLm9mZnNldFdpZHRoOw0KICAgICAgICBpZiAocGVyY2VudGFnZSA+IDEwMCkgew0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IDEwMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocGVyY2VudGFnZSA8IDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAwOw0KICAgICAgICB9DQogICAgICAgIHNldFZvbHVtZShtYXhWb2x1bWUgKiBwZXJjZW50YWdlIC8gMTAwKTsNCiAgICAgICAgdm9sdW1lID0gX3ZpZGVvLnZvbHVtZTsNCiAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgIG9uVm9sdW1lQ2hhbmdlKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lVG9nZ2xlKCkgew0KICAgICAgICBfdmlkZW8ubXV0ZWQgPSAhX3ZpZGVvLm11dGVkOw0KICAgICAgICBvblZvbHVtZUNoYW5nZSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVTZWVrRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB0aW1lRHJhZyA9IHRydWU7DQogICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNvbnRyb2xzTW91c2VVcChlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB2b2x1bWVEcmFnID0gZmFsc2U7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB0aW1lRHJhZyA9IGZhbHNlOw0KICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3NiYXIoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25Db250cm9sc01vdXNlRG93bihlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVQcm9ncmVzc2JhcihlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzc2Jhcih4KSB7DQogICAgICAgIHZhciBtYXhkdXJhdGlvbiA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgdmFyIHBvc2l0aW9uID0geCAtIHByb2dyZXNzLm9mZnNldExlZnQ7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyBwcm9ncmVzcy5vZmZzZXRXaWR0aDsNCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPiAxMDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAxMDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPCAwKSB7DQogICAgICAgICAgICBwZXJjZW50YWdlID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gcGVyY2VudGFnZSArICclJzsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gbWF4ZHVyYXRpb24gKiBwZXJjZW50YWdlIC8gMTAwOw0KICAgIH0NCiAgICBjb25zdCBkb2MgPSBkb2N1bWVudDsNCiAgICAvLyBGdWxsc2NyZWVuDQogICAgdmFyIGZ1bGxTY3JlZW5FbmFibGVkID0gISEoZG9jLmZ1bGxzY3JlZW5FbmFibGVkDQogICAgICAgIHx8IGRvYy5tb3pGdWxsU2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2MubXNGdWxsc2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2Mud2Via2l0U3VwcG9ydHNGdWxsc2NyZWVuDQogICAgICAgIHx8IGRvYy53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCk7DQogICAgaWYgKCFmdWxsU2NyZWVuRW5hYmxlZCkgew0KICAgICAgICBmdWxsc2NyZWVuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGhhbmRsZUZ1bGxzY3JlZW4oKSB7DQogICAgICAgIGlmIChpc0Z1bGxTY3JlZW4oKSkgew0KICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmIChkb2MubW96Q2FuY2VsRnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICBkb2MubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4pDQogICAgICAgICAgICAgICAgZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGRvYy5tc0V4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvYy5tc0V4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YShmYWxzZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZiAodmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4pDQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKQ0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmICh2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmlkZW9Db250YWluZXIubXNSZXF1ZXN0RnVsbHNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSh0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0Z1bGxTY3JlZW4oKSB7DQogICAgICAgIHJldHVybiAhIShkb2MuZnVsbFNjcmVlbiB8fCBkb2Mud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvYy5tb3pGdWxsU2NyZWVuIHx8IGRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldEZ1bGxzY3JlZW5EYXRhKHN0YXRlKSB7DQogICAgICAgIHZpZGVvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1mdWxsc2NyZWVuJywgJycgKyAhIXN0YXRlKTsNCiAgICAgICAgc3RhdGUgPyB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmdWxsc2NyZWVuJykgOiB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7DQogICAgfQ0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhKGRvYy5mdWxsU2NyZWVuIHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCkpOw0KICAgIH0pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhZG9jLndlYmtpdElzRnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISFkb2MubW96RnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSghIWRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCiAgICB9KTsNCiAgICAvKg0KICAgICoqIFV0aWxzDQogICAgKi8NCiAgICBmdW5jdGlvbiBnZXREZXZpY2VJbmZvKCkgew0KICAgICAgICB2YXIgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xTYW1zdW5nQnJvd3NlcnxpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgICAgIHZhciBpc0FuZHJvaWQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImFuZHJvaWQiKSA+IC0xOw0KICAgICAgICB2YXIgaXNTYW1zdW5nQnJvd3NlciA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhbXN1bmdCcm93c2VyL2kpIHx8IGZhbHNlOw0KICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOw0KICAgICAgICB2YXIgaXNJb3MgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NU1N0cmVhbSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG1hdGNoID0gKG5hdmlnYXRvci5hcHBWZXJzaW9uKS5tYXRjaCgvT1MgKFxkKylfKFxkKylfPyhcZCspPy8pLCB2ZXJzaW9uOw0KICAgICAgICAgICAgaWYgKG1hdGNoICE9PSB1bmRlZmluZWQgJiYgbWF0Y2ggIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gWw0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsxXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsyXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFszXSB8fCAwLCAxMCkNCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZlcnNpb24uam9pbignLicpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KSgpOw0KICAgICAgICB2YXIgY2FuUGxheUlubGluZSA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgICAgICB2Lm11dGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHYucGxheSgpOw0KICAgICAgICAgICAgcmV0dXJuICF2LnBhdXNlZCB8fCAoJ3BsYXlzSW5saW5lJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpKTsNCiAgICAgICAgfSkoKTsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlzTW9iaWxlOiBpc01vYmlsZSwNCiAgICAgICAgICAgIGlzQW5kcm9pZDogaXNBbmRyb2lkLA0KICAgICAgICAgICAgaXNTYW1zdW5nQnJvd3NlcjogaXNTYW1zdW5nQnJvd3NlciwNCiAgICAgICAgICAgIGlzU2FmYXJpOiBpc1NhZmFyaSwNCiAgICAgICAgICAgIGlzSW9zOiBpc0lvcywNCiAgICAgICAgICAgIGNhblBsYXlJbmxpbmU6IGNhblBsYXlJbmxpbmUNCiAgICAgICAgfTsNCiAgICB9DQogICAgZnVuY3Rpb24gZGVzZXJpYWxpemVTZXR0aW5ncyhzZXR0aW5ncykgew0KICAgICAgICB2YXIgcyA9IHt9Ow0KICAgICAgICAvLyBWaWRlbyBzZXR0aW5ncy9wcm9wZXJ0aWVzDQogICAgICAgIHMudXJsID0gc2V0dGluZ3MudXJsOw0KICAgICAgICBzLmF1dG9wbGF5ID0gc2V0dGluZ3MuYXV0b3BsYXk7DQogICAgICAgIHMubG9vcCA9IHNldHRpbmdzLmxvb3A7DQogICAgICAgIHMuY29udHJvbHMgPSBzZXR0aW5ncy5jb250cm9sczsNCiAgICAgICAgcy52b2x1bWUgPSBzZXR0aW5ncy52b2x1bWUgfHwgMDsNCiAgICAgICAgcy5zdGFydFRpbWUgPSBzZXR0aW5ncy5zdGFydFRpbWUgfHwgMDsNCiAgICAgICAgcy5lbmRUaW1lID0gc2V0dGluZ3MuZW5kVGltZTsNCiAgICAgICAgcy5wbGF5YmFja1JhdGUgPSAocGFyc2VGbG9hdChzZXR0aW5ncy5wbGF5YmFja1JhdGUpIHx8IDEpOw0KICAgICAgICBzLnBvc3RlciA9IGdldEFkanVzdGVkVXJsKHNldHRpbmdzLnBvc3RlciB8fCAnJyk7DQogICAgICAgIC8vIFNwZWNpYWwgc2V0dGluZ3MNCiAgICAgICAgcy5wbGF5ZXJCYWNrZ3JvdW5kID0gc2V0dGluZ3MucGxheWVyQmFja2dyb3VuZDsNCiAgICAgICAgcy5ncmF5U2NhbGUgPSBzZXR0aW5ncy5ncmF5U2NhbGU7DQogICAgICAgIHMubG9vcFdpdGhCYW5uZXIgPSBzZXR0aW5ncy5sb29wV2l0aEJhbm5lcjsNCiAgICAgICAgcy5zdG9wV2l0aENyZWF0aXZlID0gc2V0dGluZ3Muc3RvcFdpdGhDcmVhdGl2ZTsNCiAgICAgICAgcy5iYWNrZ3JvdW5kRmlsbCA9IHNldHRpbmdzLmJhY2tncm91bmRGaWxsOw0KICAgICAgICBzLmZhbGxiYWNrSW1hZ2UgPSBnZXRBZGp1c3RlZFVybChzZXR0aW5ncy5mYWxsYmFja0ltYWdlIHx8ICcnKTsNCiAgICAgICAgcy5wbGF5UGF1c2VCdXR0b25TaXplID0gc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSB8fCA0MDsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b24gPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b247DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemU7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3IgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uVG9wIHx8IDA7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0IHx8IDA7DQogICAgICAgIHJldHVybiBzOw0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0luTG9jYWxFbnZpcm9ubWVudCgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmICghd2luZG93KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHdpbmRvdy50b3AubG9jYXRpb24ucHJvdG9jb2wgPT09ICdmaWxlOicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHZhbGlkYXRlVXJsKHMpIHsNCiAgICAgICAgaWYgKCFpbkJmKCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAvXig/Oig/Omh0dHBzP3xmdHApOlwvXC8pPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKSkoPzo6XGR7Miw1fSk/KD86XC9cUyopPyQvLnRlc3Qocyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGluQmYoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBsZXQgdyA9IHdpbmRvdzsNCiAgICAgICAgICAgIC8vIEFzIGxvbmcgYXMgYSBwYXJlbnQgZXhpc3RzDQogICAgICAgICAgICB3aGlsZSAody5wYXJlbnQgJiYgdyAhPT0gdy5wYXJlbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICB3LnBhcmVudC5sb2NhdGlvbi5ocmVmOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXcucGFyZW50LmRvY3VtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB3ID0gdy5wYXJlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAhIXcubG9jYXRpb24ub3JpZ2luLm1hdGNoKC9iYW5uZXJmbG93fGxvY2FsaG9zdC8pIHx8ICEhd2luZG93LnRvcC5sb2NhdGlvbi5vcmlnaW4ubWF0Y2goL2Jhbm5lcmZsb3d8bG9jYWxob3N0Lyk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKF9hKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdG9GcmFjdGlvbnMobikgew0KICAgICAgICByZXR1cm4gbiA8IDEgPyBuDQogICAgICAgICAgICA6IG4gPiAxMDAgPyAxDQogICAgICAgICAgICAgICAgOiAhbiA/IDANCiAgICAgICAgICAgICAgICAgICAgOiBuIC8gMTAwOw0KICAgIH0NCiAgICBmdW5jdGlvbiBmb3JtYXRUaW1lKHQpIHsNCiAgICAgICAgcmV0dXJuIHQgPyAodCAtICh0ICU9IDYwKSkgLyA2MCArICg5LjUgPCB0ID8gJzonIDogJzowJykgKyBNYXRoLnJvdW5kKHQpIDogJzA6MDAnOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV4cG9zZQ0KICAgICovDQogICAgdGhpcy5zZXRWaWRlb1NldHRpbmdzID0gc2V0VmlkZW9TZXR0aW5nczsNCiAgICB0aGlzLmdldFZpZGVvU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfc2V0dGluZ3M7IH07DQogICAgdGhpcy5zZXRGaWxsT3B0aW9uID0gc2V0RmlsbE9wdGlvbjsNCiAgICB0aGlzLnBsYXkgPSBwbGF5VmlkZW87DQogICAgdGhpcy5yZXN0YXJ0ID0gcmVzdGFydFZpZGVvOw0KICAgIHRoaXMucGF1c2UgPSBwYXVzZVZpZGVvOw0KICAgIHRoaXMuc3RvcCA9IHN0b3BWaWRlbzsNCiAgICB0aGlzLmxvYWRWaWRlbyA9IGxvYWRWaWRlbzsNCiAgICB0aGlzLnNldFZvbHVtZSA9IHNldFZvbHVtZTsNCiAgICB0aGlzLnRvZ2dsZU11dGUgPSB0b2dnbGVNdXRlOw0KICAgIHRoaXMuc2Vla1RvID0gc2Vla1RvOw0KICAgIHRoaXMudmlkZW8gPSBfdmlkZW87DQogICAgdGhpcy5wb3N0ZXIgPSBwb3N0ZXI7DQp9DQpmdW5jdGlvbiBnZXRBZGp1c3RlZFVybCh0ZXh0KSB7DQogICAgbGV0IHVybCA9IHRleHQNCiAgICAgICAgLnJlcGxhY2UoL3ZpZGVvLmJhbm5lcmZsb3cuY29tL2csICdjLmJhbm5lcmZsb3cubmV0L2JmLXZpZGVvcycpDQogICAgICAgIC5yZXBsYWNlKC8oXHJcbnxcbnxccnxccykvZ20sICcnKTsNCiAgICBpZiAoQWQuY3VzdG9tRG9tYWluKSB7DQogICAgICAgIC8vIFJlbW92ZSBodHRwfHMgcmVwbGFjZW1lbnQgd2hlbiBBZC5jdXN0b21Eb21haW4gb25seSBnaXZlcyB0aGUgZG9tYWluDQogICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdjLmJhbm5lcmZsb3cubmV0JywgQWQuY3VzdG9tRG9tYWluLnJlcGxhY2UoLyhodHRwfGh0dHBzKTpcL1wvLywgJycpKTsNCiAgICB9DQogICAgcmV0dXJuIHVybDsNCn0NCmZ1bmN0aW9uIFZpZGVvVHJhY2tpbmcob3B0aW9ucykgew0KICAgIC8qDQogICAgKiogIFRoaXMgbWV0aG9kIGJ1YmJsZXMgdXAgZXZlbnRzIHRvIHRoZSBCYW5uZXIvQ3VzdG9tIHNjcmlwdA0KICAgICoqICBhbmQgaXMgdXNlZCB0byBzZW5kIHZpZGVvIHRyYWNraW5nIGV2ZW50cw0KICAgICovDQogICAgdmFyIHVybCA9IG9wdGlvbnMudXJsOw0KICAgIHZhciBmaWxlbmFtZSA9IG9wdGlvbnMuZmlsZW5hbWU7DQogICAgLy8gT25jZSBwZXIgdmlldyA9IE9QVg0KICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgaXNJbml0ID0gZmFsc2UsIC8vIE9QVg0KICAgIHN0YXJ0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgcmVhY2hlZEZRID0gZmFsc2UsIC8vIE9QVg0KICAgIHJlYWNoZWRNUCA9IGZhbHNlLCAvLyBPUFYNCiAgICByZWFjaGVkVFEgPSBmYWxzZTsgLy8gT1BWDQogICAgLy8gVmlkZW8gaW5pdGlhbGl6ZWQgDQogICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoaXNJbml0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBpc0luaXQgPSB0cnVlOw0KICAgIH07DQogICAgLy8gVmlkZW8gc3RhcnRlZCBvciBwbGF5aW5nIGZyb20gYmVnaW5uaW5nIGFnYWluDQogICAgdGhpcy5zdGFydGVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIGlmIChzdGFydGVkKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMCB9KTsNCiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBGaXJzdCBRdWFydGlsZQ0KICAgIHRoaXMuZnEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkRlEgfHwgIXN0YXJ0ZWQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC4yNSB9KTsNCiAgICAgICAgcmVhY2hlZEZRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIE1pZHBvaW50DQogICAgdGhpcy5tcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHJlYWNoZWRNUCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjUgfSk7DQogICAgICAgIHJlYWNoZWRNUCA9IHRydWU7DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBUaGlyZCBxdWFydGlsZQ0KICAgIHRoaXMudHEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkVFEpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC43NSB9KTsNCiAgICAgICAgcmVhY2hlZFRRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIGhhcyBjb21wbGV0ZWQNCiAgICB0aGlzLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKGhhc0NvbXBsZXRlZCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAxIH0pOw0KICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlOw0KICAgIH07DQp9DQppZiAoIUFycmF5LnByb3RvdHlwZS5maW5kKSB7DQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2ZpbmQnLCB7DQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAocHJlZGljYXRlKSB7DQogICAgICAgICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLg0KICAgICAgICAgICAgaWYgKHRoaXMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ0aGlzIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTsNCiAgICAgICAgICAgIC8vIDIuIExldCBsZW4gYmUgPyBUb0xlbmd0aCg/IEdldChPLCAibGVuZ3RoIikpLg0KICAgICAgICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwOw0KICAgICAgICAgICAgLy8gMy4gSWYgSXNDYWxsYWJsZShwcmVkaWNhdGUpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uDQogICAgICAgICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIDQuIElmIHRoaXNBcmcgd2FzIHN1cHBsaWVkLCBsZXQgVCBiZSB0aGlzQXJnOyBlbHNlIGxldCBUIGJlIHVuZGVmaW5lZC4NCiAgICAgICAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdOw0KICAgICAgICAgICAgLy8gNS4gTGV0IGsgYmUgMC4NCiAgICAgICAgICAgIHZhciBrID0gMDsNCiAgICAgICAgICAgIC8vIDYuIFJlcGVhdCwgd2hpbGUgayA8IGxlbg0KICAgICAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHsNCiAgICAgICAgICAgICAgICAvLyBhLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS4NCiAgICAgICAgICAgICAgICAvLyBiLiBMZXQga1ZhbHVlIGJlID8gR2V0KE8sIFBrKS4NCiAgICAgICAgICAgICAgICAvLyBjLiBMZXQgdGVzdFJlc3VsdCBiZSBUb0Jvb2xlYW4oPyBDYWxsKHByZWRpY2F0ZSwgVCwgwqsga1ZhbHVlLCBrLCBPIMK7KSkuDQogICAgICAgICAgICAgICAgLy8gZC4gSWYgdGVzdFJlc3VsdCBpcyB0cnVlLCByZXR1cm4ga1ZhbHVlLg0KICAgICAgICAgICAgICAgIHZhciBrVmFsdWUgPSBvW2tdOw0KICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCBrVmFsdWUsIGssIG8pKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBrVmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGUuIEluY3JlYXNlIGsgYnkgMS4NCiAgICAgICAgICAgICAgICBrKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyA3LiBSZXR1cm4gdW5kZWZpbmVkLg0KICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgfQ0KICAgIH0pOw0KfQ0K",customProperties:[{label:"Url",name:"url",unit:"text",value:"{\"text\":\"https://productsup.melia.com/production/letra_A_150px.mp4\",\"styles\":[{\"type\":\"word\",\"length\":57,\"position\":0,\"styleIds\":[]}]}",versionPropertyId:"56409e5a-2437-4244-8411-e84d1c17bd01"},{label:"Use feed",name:"useFeed",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Feed",name:"dynamicContent",unit:"feed",value:"  1 1 loop  text",versionPropertyId:undefined},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"57d00653-cb88-4368-8572-7b775e2be97c"},{label:"Feed index",name:"feedIndex",unit:"number",value:1,versionPropertyId:undefined},{label:"Static index",name:"staticIndex",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Autoplay",name:"autoplay",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Controls",name:"controls",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop",name:"loop",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithBanner",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Volume toggle button",name:"volumeToggleButton",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Volume",name:"volume",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button color",name:"volumeToggleButtonColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Volume button size",name:"volumeToggleButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button left",name:"volumeToggleButtonPositionLeft",unit:"number",value:5,versionPropertyId:undefined},{label:"Volume button top",name:"volumeToggleButtonPositionTop",unit:"number",value:5,versionPropertyId:undefined},{label:"Play/Pause button size",name:"playPauseButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Start time",name:"startTime",unit:"number",value:0,versionPropertyId:undefined},{label:"End time",name:"endTime",unit:"number",value:0,versionPropertyId:undefined},{label:"Preload image",name:"fallbackImage",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Poster",name:"poster",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Fill",name:"backgroundFill",unit:"select",value:"W3sidmFsdWUiOiJDb3ZlciIsInNlbGVjdGVkIjp0cnVlfSx7InZhbHVlIjoiQ29udGFpbiIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Playback rate",name:"playbackRate",unit:"select",value:"W3sidmFsdWUiOiIxIiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiIwLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMC41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjAuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIxLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMS41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjEuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIyIiwic2VsZWN0ZWQiOmZhbHNlfV0=",versionPropertyId:undefined},{label:"Gray Scale",name:"grayScale",unit:"number",value:0,versionPropertyId:undefined},{label:"Player background",name:"playerBackground",unit:"color",value:"rgba(0,0,0,0)",versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Round corners",name:"roundCorners",unit:"number",value:0,versionPropertyId:undefined}],},{kind:'widget',id:'7305a5d4-b4e6-42b8-a646-03685ff3758a',time:0,hidden:false,duration:6.93,animations:[{id:'fb5ee29e-0f57-429c-a770-333dbfca2e21',name:'Animation',type:'keyframe',timingFunction:'easeInOutCubic',settings:{},keyframes:[{id:"3a6f8679-bc7e-4a42-b7ad-78f1df3f6b96",stateId:"c4ba4d51-bfb9-4241-943c-f18511eb3d33",time:0,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"68224f80-782b-4953-ad7f-ea259b4f36a4",stateId:"1219d5f4-31cf-460c-9486-0e9a6ed0ece2",time:0.8788246615769553,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"b74b6259-ace0-449d-aace-0f4304c7eabf",stateId:"60f6f867-f256-4900-95d9-e9e1e3ecd658",time:1.5899788285109382,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"64c179b6-7954-4e87-baa1-ea743982c40c",stateId:"461b5cf2-e352-465a-8834-978127968a29",time:1.983137229742734,timingFunction:"easeInOutCubic",value:undefined,duration:0}]},],states:[{id:'c4ba4d51-bfb9-4241-943c-f18511eb3d33',x:0,y:0,},{id:'1219d5f4-31cf-460c-9486-0e9a6ed0ece2',x:0,y:0,},{id:'60f6f867-f256-4900-95d9-e9e1e3ecd658',x:0,y:-156,scaleX:0.6,scaleY:0.6,},{id:'461b5cf2-e352-465a-8834-978127968a29',x:-21,y:-157,scaleX:0.6,scaleY:0.6,},],actions:[],x:708,y:356,width:80,height:75,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,html:"PGRpdiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGlkPSJpbnN0cnVjdGlvbnMiPgogICAgICAgICAgICA8c3Ryb25nPlZpZGVvIHBsYXllcjwvc3Ryb25nPjxicj5FbnRlciBhIFVSTCBpbiB0aGUgVVJMIHByb3BlcnR5IG9yIHNlbGVjdCBmZWVkIHdpdGggdmlkZW8gVVJMLgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InBsYXktcGF1c2Utb3ZlcmxheSIgY2xhc3M9InNob3ctcGxheSI+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9InBhdXNlIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjQwcHgiIGhlaWdodD0iNjQwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJMYXllcl8xIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjgwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4gCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9Ik01NDYuMjczLDkzLjcyNkM0ODUuODM0LDMzLjI4Niw0MDUuNDc2LDAsMzIwLDBDMjM0LjUyNSwwLDE1NC4xNjYsMzMuMjg2LDkzLjcyNiw5My43MjZTMCwyMzQuNTI1LDAsMzIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQzYwNi43MTQsNDg1LjgzNSw2NDAsNDA1LjQ3Niw2NDAsMzIwUzYwNi43MTQsMTU0LjE2Niw1NDYuMjczLDkzLjcyNnogTTMyMCw1ODJDMTc1LjUzMyw1ODIsNTgsNDY0LjQ2Nyw1OCwzMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNTgsMTc1LjUzMywxNzUuNTMzLDU4LDMyMCw1OGMxNDQuNDY3LDAsMjYyLDExNy41MzMsMjYyLDI2MkM1ODIsNDY0LjQ2Nyw0NjQuNDY3LDU4MiwzMjAsNTgyeiIgLz4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzPSIyNDMuMjg5LDMyMCAyNDMuMjg5LDE4OC42OTggMzU3LDI1NC4zNSA0NzAuNzExLDMyMCAzNTcsMzg1LjY1MSAyNDMuMjg5LDQ1MS4zMDIiIC8+CiAgICAgICAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjM3NSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzIiCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyBjbGFzcz0icGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjY0MHB4IiBoZWlnaHQ9IjY0MHB4IiB2aWV3Qm94PSIwIDAgNjQwIDY0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQwIDY0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iLTgwIgogICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iIzAwMDAwMCIKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iODAwIgogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNjA2LjcxNCw0ODUuODM1LDY0MCw0MDUuNDc2LDY0MCwzMjBTNjA2LjcxNCwxNTQuMTY2LDU0Ni4yNzMsOTMuNzI2eiBNMzIwLDU4MkMxNzUuNTMzLDU4Miw1OCw0NjQuNDY3LDU4LDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyIiAvPgogICAgICAgICAgICAgICAgICAgIDxnIGRpc3BsYXk9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSIzNzUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0iaW5saW5lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI1Mi40ODYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9IjE5Mi44NTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJpbmxpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMiIgCiAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIj48L2c+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InZpZGVvLWNvbnRyb2xzIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBsYXliYWNrIiBjbGFzcz0iaXNQYXVzZWQiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGF1c2UiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzEiPjxyZWN0IHg9Ii04MCIgeT0iLTgwIiBkaXNwbGF5PSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz48Zz48cmVjdCB4PSIzNzUiIHk9IjE5Mi44NTQiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI1Mi40ODYiIGhlaWdodD0iMjU0LjI5MSIvPjxyZWN0IHg9IjIxNSIgeT0iMTkyLjg1NCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+PHJlY3QgeD0iLTgwIiB5PSItODAiIGRpc3BsYXk9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyICIvPjxnIGRpc3BsYXk9Im5vbmUiPjxyZWN0IHg9IjM3NSIgeT0iMTkyLjg1NCIgZGlzcGxheT0iaW5saW5lIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTIuNDg2IiBoZWlnaHQ9IjI1NC4yOTEiLz48cmVjdCB4PSIyMTUiIHk9IjE5Mi44NTQiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJwcm9ncmVzcy10aW1lciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImJ1ZmZlckJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0idGltZUJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ2b2x1bWUtaWNvbiIgY2xhc3M9InVubXV0ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNNTMxIDQwNXYtMWMyNCAtMjcgMzYgLTU4IDM2IC05MHMtMTIgLTY0IC0zNiAtODljLTE1IC0xNSAtMzMgLTExIC00NCAxcy0xNiAzMCAtMSA0NWMyNSAyNCAyNSA2NCAwIDg4Yy0xNSAxNSAtMTAgMzMgMSA0NXMyOSAxNiA0NCAxek02MTkgNDkydi0zYzUxIC01MSA3NCAtMTEwIDc0IC0xNzhzLTIzIC0xMjcgLTc0IC0xNzggYy0xMyAtMTUgLTMyIC0xMSAtNDMgMHMtMTYgMzAgLTEgNDVjMzggMzkgNTUgODMgNTUgMTM0cy0xNyA5NSAtNTUgMTM0Yy0xNSAxNSAtMTAgMzQgMSA0NXMzMCAxNCA0MyAxek03MDkgNTc5djRjNzQgLTc4IDExMCAtMTY2IDExMCAtMjY4cy0zNiAtMTkwIC0xMTAgLTI2OGMtMTUgLTE1IC0zMyAtMTEgLTQ0IDBzLTE2IDMwIC0xIDQ1YzY0IDY0IDkzIDEzNyA5MyAyMjFzLTI5IDE1NyAtOTMgMjIxYy0xNSAxNSAtMTAgMzQgMSA0NSBzMjkgMTUgNDQgMHoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJtdXRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTg1MSA0MTBsLTk1IC05NWw5NSAtOTRsLTYzIC02M2wtOTUgOTRsLTk0IC05NGwtNjMgNjNsOTQgOTRsLTk0IDk1bDYzIDYzbDk0IC05NWw5NSA5NXoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUtY29udHJvbGxlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS12YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4iPgogICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDE3OTIgMTc5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0MTEgNTQxbC0zNTUgMzU1IDM1NSAzNTUgMTQ0LTE0NHEyOS0zMSA3MC0xNCAzOSAxNyAzOSA1OXY0NDhxMCAyNi0xOSA0NXQtNDUgMTloLTQ0OHEtNDIgMC01OS00MC0xNy0zOSAxNC02OWwxNDQtMTQ0LTM1NS0zNTUtMzU1IDM1NSAxNDQgMTQ0cTMxIDMwIDE0IDY5LTE3IDQwLTU5IDQwaC00NDhxLTI2IDAtNDUtMTl0LTE5LTQ1di00NDhxMC00MiA0MC01OSAzOS0xNyA2OSAxNGwxNDQgMTQ0IDM1NS0zNTUtMzU1LTM1NS0xNDQgMTQ0cS0xOSAxOS00NSAxOS0xMiAwLTI0LTUtNDAtMTctNDAtNTl2LTQ0OHEwLTI2IDE5LTQ1dDQ1LTE5aDQ0OHE0MiAwIDU5IDQwIDE3IDM5LTE0IDY5bC0xNDQgMTQ0IDM1NSAzNTUgMzU1LTM1NS0xNDQtMTQ0cS0zMS0zMC0xNC02OSAxNy00MCA1OS00MGg0NDhxMjYgMCA0NSAxOXQxOSA0NXY0NDhxMCA0Mi0zOSA1OS0xMyA1LTI1IDUtMjYgMC00NS0xOXoiIGZpbGw9IiNmZmYiLz4KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwb3N0ZXIiPjwvZGl2PgogICAgICAgIDxzcGFuIGlkPSJ2b2x1bWVUb2dnbGUiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0idW5tdXRlZCI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTUzMSA0MDV2LTFjMjQgLTI3IDM2IC01OCAzNiAtOTBzLTEyIC02NCAtMzYgLTg5Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMXMtMTYgMzAgLTEgNDVjMjUgMjQgMjUgNjQgMCA4OGMtMTUgMTUgLTEwIDMzIDEgNDVzMjkgMTYgNDQgMXpNNjE5IDQ5MnYtM2M1MSAtNTEgNzQgLTExMCA3NCAtMTc4cy0yMyAtMTI3IC03NCAtMTc4IGMtMTMgLTE1IC0zMiAtMTEgLTQzIDBzLTE2IDMwIC0xIDQ1YzM4IDM5IDU1IDgzIDU1IDEzNHMtMTcgOTUgLTU1IDEzNGMtMTUgMTUgLTEwIDM0IDEgNDVzMzAgMTQgNDMgMXpNNzA5IDU3OXY0Yzc0IC03OCAxMTAgLTE2NiAxMTAgLTI2OHMtMzYgLTE5MCAtMTEwIC0yNjhjLTE1IC0xNSAtMzMgLTExIC00NCAwcy0xNiAzMCAtMSA0NWM2NCA2NCA5MyAxMzcgOTMgMjIxcy0yOSAxNTcgLTkzIDIyMWMtMTUgMTUgLTEwIDM0IDEgNDUgczI5IDE1IDQ0IDB6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0ibXV0ZWQiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek04NTEgNDEwbC05NSAtOTVsOTUgLTk0bC02MyAtNjNsLTk1IDk0bC05NCAtOTRsLTYzIDYzbDk0IDk0bC05NCA5NWw2MyA2M2w5NCAtOTVsOTUgOTV6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8taG9sZGVyIj48L2Rpdj4KICAgIDwvZGl2Pg==",css:"KiB7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KaHRtbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQojY29udGFpbmVyIHsKICBvcGFjaXR5OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBmb250LWZhbWlseTogJ0hlbHZldGljYScsICdBcmlhbCcsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxNnB4Owp9Ci52aWRlby1ob2xkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogcG9pbnRlcjsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3ZlciB7CiAgd2lkdGg6IGF1dG87CiAgbGVmdDogNTAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyLXggewogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMTAwJTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3Zlci15IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KI3Bvc3RlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsKICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgei1pbmRleDogMTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwp9CiNwb3N0ZXIuY292ZXIgewogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmltYWdlR2VuZXJhdG9yTW9kZSAjcGxheS1wYXVzZS1vdmVybGF5LAouaW1hZ2VHZW5lcmF0b3JNb2RlICN2aWRlby1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNjb250YWluZXI6aG92ZXIgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNjb250YWluZXIuaXNQYXVzZWQgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgewogIGRpc3BsYXk6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAyOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAxOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5LnNob3cgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuaGlkZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wYXVzZSAucGF1c2UgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wbGF5IC5wbGF5IHsKICBkaXNwbGF5OiBibG9jazsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogNDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDAuNTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC41KTsKICBzdHJva2U6IHJnYmEoMCwwLDAsMC43KTsKICBzdHJva2Utd2lkdGg6IDFweDsKICBwYWRkaW5nOiAycHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgc3ZnICogewogIGZpbGw6IGluaGVyaXQ7Cn0KI3BsYXktcGF1c2Utb3ZlcmxheSBzdmc6aG92ZXIgewogIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKfQojdmlkZW8tY29udHJvbHMgewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41KTsKICBjb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwcHg7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKICBkaXNwbGF5OiBub25lOwogIHotaW5kZXg6IDM7Cn0KI3ZpZGVvLWNvbnRyb2xzLnNob3cgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7Cn0KI3ZpZGVvLWNvbnRyb2xzID5kaXY6bm90KCNwcm9ncmVzcykgewogIGZsb2F0OiBsZWZ0OwogIHdpZHRoOiAyNXB4OwogIGhlaWdodDogMzBweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQojdmlkZW8tY29udHJvbHMgPmRpdjpiZWZvcmUgewogIGNvbnRlbnQ6ICcnOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQojdmlkZW8tY29udHJvbHMgc3ZnIHsKICB3aWR0aDogMjVweDsKICBoZWlnaHQ6IDI1cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZpbGw6ICNmZmY7Cn0KI3BsYXliYWNrIHsKICB3aWR0aDogMzBweCAhaW1wb3J0YW50Owp9CiNwbGF5YmFjay5pc1BhdXNlZCAuaWNvbi1wbGF5IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KI3BsYXliYWNrLmlzUGxheWluZyAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CiNwbGF5YmFjayAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogbm9uZTsKfQojcGxheWJhY2sgLmljb24tcGxheSB7CiAgZGlzcGxheTogbm9uZTsKfQojcHJvZ3Jlc3MtYmFyIHsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7CiAgLW1zLWZsZXgtcGFjazogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtZmxleDogNTsKICAtbXMtZmxleC1wb3NpdGl2ZTogNTsKICBmbGV4LWdyb3c6IDU7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzLXRpbWVyIHsKICB3aWR0aDogODdweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxMXB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyBzcGFuIHsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3Byb2dyZXNzLWJhciAjcHJvZ3Jlc3MgI3RpbWVCYXIgewogIHotaW5kZXg6IDEwOwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuMXM7CiAgdHJhbnNpdGlvbjogd2lkdGggMC4xczsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyAjYnVmZmVyQmFyIHsKICB6LWluZGV4OiA1OwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKfQojdm9sdW1lIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtbXMtZmxleC1wb3NpdGl2ZTogMTsKICBmbGV4LWdyb3c6IDE7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LW9yaWVudDogaG9yaXpvbnRhbDsKICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsKICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdzsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIG1hcmdpbi1yaWdodDogNXB4Owp9CiN2b2x1bWUubW9iaWxlLXZvbHVtZSB7CiAgLXdlYmtpdC1ib3gtZmxleDogMDsKICAtbXMtZmxleC1wb3NpdGl2ZTogMDsKICBmbGV4LWdyb3c6IDA7Cn0KI3ZvbHVtZSAjdm9sdW1lLXZhbHVlIHsKICB6LWluZGV4OiAxMDsKICB3aWR0aDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7CiAgaGVpZ2h0OiAxMDAlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAwLjJzOwogIHRyYW5zaXRpb246IHdpZHRoIDAuMnM7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojdm9sdW1lICN2b2x1bWUtaWNvbiB7CiAgd2lkdGg6IDI1cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWNvbnRyb2xsZXIgewogIHdpZHRoOiA4MCU7CiAgaGVpZ2h0OiA3cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC40KTsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uIHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWljb24ubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lICN2b2x1bWUtaWNvbi51bm11dGVkIHN2Zy51bm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojZnVsbHNjcmVlbiB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQojZnVsbHNjcmVlbiBzdmcgewogIHdpZHRoOiAxNHB4OwogIG1hcmdpbi1yaWdodDogM3B4Owp9CiN2b2x1bWVUb2dnbGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA0OwogIHdpZHRoOiAxMCU7CiAgaGVpZ2h0OiAxMCU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CiN2b2x1bWVUb2dnbGUubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lVG9nZ2xlLnVubXV0ZWQgc3ZnLnVubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWVUb2dnbGUgc3ZnIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogbm9uZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgZmlsbDogI2ZmZjsKfQojdm9sdW1lVG9nZ2xlIHN2ZyAqIHsKICBmaWxsOiBpbmhlcml0Owp9CkBtZWRpYSAobWF4LXdpZHRoOiAyOTBweCkgewogICNwcm9ncmVzcy10aW1lciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KfQpAbWVkaWEgKG1heC13aWR0aDogMjAwcHgpIHsKICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1pY29uIHsKICAgIHdpZHRoOiBhdXRvOwogIH0KICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1jb250cm9sbGVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CiNpbnN0cnVjdGlvbnMgewogIGJhY2tncm91bmQ6ICMzNjM2MzY7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA5OTsKICBjb2xvcjogI2Y3ZjdmNzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdmVydGljYWwtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxNXB4OwogIGRpc3BsYXk6IG5vbmU7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOwogIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZm9udC1zaXplOiAwLjlyZW07Cn0KI2luc3RydWN0aW9ucyBzdHJvbmcgewogIGZvbnQtc2l6ZTogMS4xcmVtOwp9CiNpbnN0cnVjdGlvbnMuc2hvdyB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXN0YXJ0LXBsYXliYWNrLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQp2aWRlbzo6LWludGVybmFsLW1lZGlhLWNvbnRyb2xzLWRvd25sb2FkLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1lbmNsb3N1cmUgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KdmlkZW86Oi13ZWJraXQtbWVkaWEtY29udHJvbHMtcGFuZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgKyAzMHB4KTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqLwp9",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgfSk7DQp9Ow0KV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gdHJ1ZTsNCnZhciB2aWRlbzsNCnZhciBmaXJzdFBsYXlUaHJvdWdoID0gdHJ1ZTsNCnZhciB2aWRlb0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taG9sZGVyJyk7DQp2YXIgdmlkZW9TZXR0aW5ncyA9IHt9Ow0KdmFyIGhhc1N0b3BwZWQgPSBmYWxzZTsNCnZhciBtdXRlZFN0YXRlID0gdHJ1ZTsNCnZhciB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCnZhciBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zJyk7DQp2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOw0KdmFyIGZlZWQsIGZlZWRVcmwsIGZlZWRJdGVyYXRpb25JbmRleDsNCi8qDQoqKiBCYW5uZXJmbG93IGV2ZW50cw0KKi8NCmxldCBvbkxvYWRlZFByb21pc2VSZXNvbHZlcjsNCmlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgIFdpZGdldC5pc0xvYWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KICAgIH0pOw0KfQ0KdHJ5IHsNCiAgICBzZXRTZXR0aW5ncygpOw0KICAgIGNyZWF0ZVZpZGVvKCk7DQp9DQpjYXRjaCAoZSkgew0KICAgIC8vIGNvbnNvbGUuZXJyb3IoZS5zdGFjayk7IA0KfQ0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TZWVrLCB0aW1lID0+IHsNCiAgICAvLyBpZih2aWRlbyAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2NyZWF0aXZlJykgeyANCiAgICAvLyAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lICsgdGltZSAtIFdpZGdldC50aW1lKSk7DQogICAgLy8gfQ0KICAgIGlmICh2aWRlbykgew0KICAgICAgICB2aWRlby5zZWVrVG8oTWF0aC5hYnModmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgKyB0aW1lIC0gV2lkZ2V0LnRpbWUpKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGxheSwgdGltZSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbykgew0KICAgICAgICAgICAgdmlkZW8ucG9zdGVyLnN0eWxlLnNldFByb3BlcnR5KCJkaXNwbGF5IiwgIm5vbmUiLCAiaW1wb3J0YW50Iik7DQogICAgICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnICYmICh0aW1lID49IFdpZGdldC50aW1lICYmIHRpbWUgPCBXaWRnZXQuZHVyYXRpb24pKSB7DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsNCiAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LCAwKTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgdGltZSA9PiB7DQogICAgaWYgKHZpZGVvKSB7DQogICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHRpbWUgLSBXaWRnZXQudGltZSkpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuUmVzaXplLCAoKSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgdmlkZW8uc2V0RmlsbE9wdGlvbigpOw0KICAgICAgICB9DQogICAgfSwgMCk7DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5Qcm9wZXJ0eUNoYW5nZWQsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICB2aWRlb0VsZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gV2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzICsgJyUnOw0KICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRJbmRleCAtIDE7DQogICAgdHJ5IHsNCiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkICYmIFdpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmlkKSB7DQogICAgICAgICAgICBmZWVkID0geWllbGQgV2lkZ2V0LnByb3BlcnRpZXMuZHluYW1pY0NvbnRlbnQubG9hZCgpOw0KICAgICAgICAgICAgaWYgKGZlZWQgJiYgZmVlZC5kYXRhICYmIGZlZWQuZGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBmZWVkID0gZmVlZC5kYXRhOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChlKSB7IH0NCiAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJzsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICBmZWVkVXJsID0gZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0udmFsdWU7DQogICAgfQ0KICAgIGluc3RydWN0aW9ucy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgaWYgKCFXaWRnZXQucHJvcGVydGllcy51cmwgfHwgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgIWZlZWRVcmwpKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHVybCA9IFdpZGdldC5wcm9wZXJ0aWVzLnVybDsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHVybCA9IGZlZWRVcmw7DQogICAgfQ0KICAgIHNldFNldHRpbmdzKCk7DQogICAgaWYgKCF2aWRlbykgew0KICAgICAgICBjcmVhdGVWaWRlbygpOw0KICAgIH0NCiAgICBpZiAodXJsID09IHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS51cmwpIHsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICB9DQogICAgaWYgKHZpZGVvICYmIHVybCAhPT0gdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLnVybCkgew0KICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAodXJsKSk7DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQp9KSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuQW5pbWF0aW9uU3RhcnQsICgpID0+IHsNCiAgICBpZiAodmlkZW8gJiYgIWhhc1N0b3BwZWQpIHsNCiAgICAgICAgaWYgKHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS5hdXRvcGxheSkgew0KICAgICAgICAgICAgaWYgKGZpcnN0UGxheVRocm91Z2ggJiYgVGltZWxpbmUuaXNQbGF5aW5nKSB7DQogICAgICAgICAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLmxvb3BXaXRoQmFubmVyIHx8IGZpcnN0UGxheVRocm91Z2gpIHsNCiAgICAgICAgICAgICAgICAgICAgdmlkZW8uc2Vla1RvKFdpZGdldC5wcm9wZXJ0aWVzLnN0YXJ0VGltZSk7DQogICAgICAgICAgICAgICAgICAgIGZpcnN0UGxheVRocm91Z2ggPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgICAgICAgICBmaXJzdFBsYXlUaHJvdWdoID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSAmJiAhdmlkZW8udmlkZW8ucGF1c2VkKSB7DQogICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSkgew0KICAgICAgICAgICAgaWYgKFRpbWVsaW5lLmlzUGxheWluZykgew0KICAgICAgICAgICAgICAgIHZpZGVvLnNlZWtUbyhXaWRnZXQucHJvcGVydGllcy5zdGFydFRpbWUpOw0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdpbWFnZScpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKHZpZGVvICYmICF2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsNCiAgICAgICAgaWYgKFRpbWVsaW5lLmR1cmF0aW9uICE9PSBXaWRnZXQuZHVyYXRpb24pIHsNCiAgICAgICAgICAgIHZpZGVvLnRvZ2dsZU11dGUobXV0ZWRTdGF0ZSk7DQogICAgICAgIH0NCiAgICB9DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5BbmltYXRpb25FbmQsICgpID0+IHsNCiAgICBpZiAoVGltZWxpbmUuZHVyYXRpb24gIT09IFdpZGdldC5kdXJhdGlvbikgew0KICAgICAgICBtdXRlZFN0YXRlID0gdmlkZW8udmlkZW8ubXV0ZWQ7DQogICAgICAgIHZpZGVvLnRvZ2dsZU11dGUodHJ1ZSk7DQogICAgfQ0KICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMuc3RhdGljSW5kZXggJiYgV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCkgew0KICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleCArIDFdICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4ICsgMV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZEl0ZXJhdGlvbkluZGV4Kys7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBmZWVkSXRlcmF0aW9uSW5kZXggPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZFVybCA9IGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XVtXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGRdLnZhbHVlOw0KICAgICAgICAgICAgc2V0U2V0dGluZ3MoKTsNCiAgICAgICAgICAgIHZpZGVvLmxvYWRWaWRlbyhzdHJpcChmZWVkVXJsKSk7DQogICAgICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuU2hvd1ByZWxvYWRJbWFnZSwgKCkgPT4gew0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJibG9jayIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgfQ0KICAgIH0sIDApOw0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50Lkxvb3AsICgpID0+IHsNCiAgICBpZiAoaGFzU3RvcHBlZCkgew0KICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5KSB7DQogICAgICAgIC8vIHZpZGVvLnJlc3RhcnQoKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU3RvcCwgKCkgPT4gew0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuc3RvcFdpdGhDcmVhdGl2ZSkgew0KICAgICAgICB2aWRlby5zdG9wKCk7DQogICAgICAgIGhhc1N0b3BwZWQgPSB0cnVlOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgfQ0KfSk7DQpmdW5jdGlvbiBjcmVhdGVWaWRlbygpIHsNCiAgICBpZiAoIXZpZGVvKSB7DQogICAgICAgIHZpZGVvID0gbmV3IEJGVmlkZW8odmlkZW9FbGVtLCB2aWRlb1NldHRpbmdzLCBWaWRlb1RyYWNraW5nKTsNCiAgICB9DQp9DQpmdW5jdGlvbiBzZXRTZXR0aW5ncygpIHsNCiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHNldHRpbmdzID0gV2lkZ2V0LnByb3BlcnRpZXM7DQogICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgdmlkZW9TZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgfQ0KICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoV2lkZ2V0LnByb3BlcnRpZXMudXJsKTsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoZmVlZFVybCk7DQogICAgfQ0KICAgIGxldCBwb3N0ZXI7DQogICAgbGV0IGZhbGxiYWNrSW1hZ2U7DQogICAgaWYgKHZpZGVvU2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgIHBvc3RlciA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLnBvc3Rlcik7DQogICAgfQ0KICAgIGlmICh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgZmFsbGJhY2tJbWFnZSA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpOw0KICAgIH0NCiAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IHBvc3RlcjsNCiAgICB2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgPSBmYWxsYmFja0ltYWdlOw0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJykgew0KICAgICAgICB2aWRlb1NldHRpbmdzLmNvbnRyb2xzID0gZmFsc2U7DQogICAgICAgIHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lID0gdmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgPD0gMSA/IDEgOiB2aWRlb1NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgdmlkZW9TZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOw0KICAgICAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IG51bGw7DQogICAgfQ0KfQ0KZnVuY3Rpb24gZ2V0T3B0aW1hbEltYWdlKHNyYykgew0KICAgIHJldHVybiBXaWRnZXQuZ2V0T3B0aW1pemVkSW1hZ2VVcmwoc3JjLCB7IHdpZHRoOiBXaWRnZXQud2lkdGgsIGhlaWdodDogV2lkZ2V0LmhlaWdodCwgZml0T3B0aW9uOiBXaWRnZXQucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbC50b0xvd2VyQ2FzZSgpIH0pOw0KfQ0KZnVuY3Rpb24gc3RyaXAocykgew0KICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKTsNCiAgICB0bXAuaW5uZXJIVE1MID0gczsNCiAgICByZXR1cm4gdG1wLnRleHRDb250ZW50IHx8IHRtcC5pbm5lclRleHQgfHwgIiI7DQp9DQpmdW5jdGlvbiBjb3B5KGEpIHsNCiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7DQp9DQpmdW5jdGlvbiBCRlZpZGVvKGVsZW0sIG9wdGlvbnMsIFZpZGVvVHJhY2tpbmcpIHsNCiAgICB2YXIgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhvcHRpb25zKTsNCiAgICB2YXIgX3ZpZGVvOw0KICAgIHZhciBzZWxmID0gdGhpczsNCiAgICB2YXIgZWxCeUlkID0gZnVuY3Rpb24gKHNlbCkgew0KICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsKTsNCiAgICB9Ow0KICAgIHZhciBldmVudFF1ZXVlID0gW107DQogICAgdmFyIGRldmljZUluZm8gPSBnZXREZXZpY2VJbmZvKCk7DQogICAgdmFyIHBsYXlQcm9taXNlOw0KICAgIHZhciBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICB2YXIgdmlkZW9UcmFja2luZzsNCiAgICB2YXIgZGVmYXVsdFZpZGVvVHlwZXMgPSBbDQogICAgICAgIHsNCiAgICAgICAgICAgIGV4dGVuc2lvbjogJ21wNCcsDQogICAgICAgICAgICB0eXBlOiAndmlkZW8vbXA0Jw0KICAgICAgICB9DQogICAgXTsNCiAgICB2YXIgdG90YWxQbGF5dGltZTsNCiAgICB2YXIgdm9sdW1lID0gMDsNCiAgICB2YXIgaGFzUGxheWVkID0gZmFsc2U7DQogICAgdmFyIHJlYWR5U3RhdGUgPSAwOw0KICAgIHZhciBwbGF5ZXIgPSBlbEJ5SWQoJ3ZpZGVvLXBsYXllcicpOw0KICAgIHZhciB2aWRlb0NvbnRhaW5lciA9IGVsQnlJZCgnY29udGFpbmVyJyk7DQogICAgdmFyIHBsYXlQYXVzZU92ZXJsYXkgPSBlbEJ5SWQoJ3BsYXktcGF1c2Utb3ZlcmxheScpOw0KICAgIHZhciBwb3N0ZXIgPSBlbEJ5SWQoJ3Bvc3RlcicpOw0KICAgIC8vIEluaXRpYWxpemUgVmlkZW8gY29udHJvbHMNCiAgICB2YXIgdmlkZW9Db250cm9scyA9IGVsQnlJZCgndmlkZW8tY29udHJvbHMnKTsNCiAgICB2YXIgcGxheWJhY2sgPSBlbEJ5SWQoJ3BsYXliYWNrJyk7DQogICAgdmFyIHZvbHVtZUNvbnRhaW5lciA9IGVsQnlJZCgndm9sdW1lJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2wgPSBlbEJ5SWQoJ3ZvbHVtZS1jb250cm9sbGVyJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xWYWx1ZSA9IGVsQnlJZCgndm9sdW1lLXZhbHVlJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xUb2dnbGUgPSBlbEJ5SWQoJ3ZvbHVtZS1pY29uJyk7DQogICAgdmFyIHByb2dyZXNzID0gZWxCeUlkKCdwcm9ncmVzcycpOw0KICAgIHZhciB2aWRlb0R1cmF0aW9uID0gZWxCeUlkKCdwcm9ncmVzcy10aW1lcicpOw0KICAgIHZhciBmdWxsc2NyZWVuID0gZWxCeUlkKCdmdWxsc2NyZWVuJyk7DQogICAgdmFyIHRpbWVCYXIgPSBlbEJ5SWQoJ3RpbWVCYXInKTsNCiAgICBwbGF5YmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVG9nZ2xlUGxheVBhdXNlKTsNCiAgICB2b2x1bWVDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uVm9sdW1lRHJhZyk7DQogICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVm9sdW1lVG9nZ2xlKTsNCiAgICBwcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblRpbWVTZWVrRHJhZyk7DQogICAgZnVsbHNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUZ1bGxzY3JlZW4pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNvbnRyb2xzTW91c2VVcCk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Db250cm9sc01vdXNlRG93bik7DQogICAgdmFyIHZvbHVtZVRvZ2dsZUJ1dHRvbiA9IGVsQnlJZCgndm9sdW1lVG9nZ2xlJyk7DQogICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Wb2x1bWVUb2dnbGUpOw0KICAgIHRyeSB7DQogICAgICAgIGlmIChwbGF5ZXIpIHsNCiAgICAgICAgICAgIHBsYXllci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBsYXllcik7DQogICAgICAgICAgICBfdmlkZW8gPSBudWxsOw0KICAgICAgICB9DQogICAgICAgIGlmICghX3NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgX3NldHRpbmdzLnVybCA9ICcnOw0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1cmwuJyk7DQogICAgICAgIH0NCiAgICAgICAgLy8gU2V0IHBvc3RlciBiZWZvcmUgbG9hZGluZyB2aWRlbw0KICAgICAgICBpZiAoX3NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5wb3N0ZXIgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgJiYgZGV2aWNlSW5mby5pc01vYmlsZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvID0gY3JlYXRlVmlkZW9FbGVtZW50KF9zZXR0aW5ncy51cmwpOw0KICAgICAgICBlbGVtLmFwcGVuZENoaWxkKF92aWRlbyk7DQogICAgICAgIC8vIEltbWVkaWF0ZWx5IHNldCBmaWxsIG9wdGlvbiB0byBhdm9pZCByZXNpemluZyB0byBiZSBzZWVuDQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICAgICAgaWYgKEFkLnBhcmFtZXRlcnMuaXNPbW5pUmVuZGVyKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBvbk1ldGFMb2FkZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvblZpZGVvRW5kZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIG9uVmlkZW9QbGF5KTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgb25WaWRlb1BhdXNlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsIG9uVm9sdW1lQ2hhbmdlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAvKg0KICAgICAgICAqIFdlIHVzZSBSQUYgaW5zdGVhZCBvZiBuYXRpdmUgdGltZXVwZGF0ZSBldmVudCBvbiB0aGUgbWVkaWEgQVBJIHRvDQogICAgICAgICogZ2V0IGEgbW9yZSBhY2N1cmF0ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSB2aWRlbw0KICAgICAgICAqLw0KICAgICAgICBjb25zdCB3ID0gd2luZG93Ow0KICAgICAgICB2YXIgcmFmID0gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB3LnJlcXVlc3RBbmltYXRpb25GcmFtZQ0KICAgICAgICAgICAgICAgIHx8IHcud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgZnVuY3Rpb24gKGNiKSB7IHNldFRpbWVvdXQoY2IsIDEwMDAgLyAzMCk7IH07DQogICAgICAgIH0pKCk7DQogICAgICAgIGZ1bmN0aW9uIHRpbWVVcGRhdGUoKSB7DQogICAgICAgICAgICBvblRpbWVVcGRhdGVkKCk7DQogICAgICAgICAgICByYWYodGltZVVwZGF0ZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOw0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7DQogICAgfQ0KICAgIGNhdGNoIChlKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZS5zdGFjayk7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFVwZGF0ZXMgdmlkZW8ncyBzZXR0aW5ncw0KICAgICAqIE9ubHkgc2V0dGluZ3MgdGhhdCBhcmUgcGFzc2VkIGFyZSBjaGFuZ2VkLCByZXN0IHJlbWFpbiBwZXJzaXN0ZW50DQogICAgICogQHBhcmFtICB7fSBzZXR0aW5ncw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldFZpZGVvU2V0dGluZ3Moc2V0dGluZ3MpIHsNCiAgICAgICAgLy8gTWVyZ2UgY3VycmVudCBzZXR0aW5ncyB3aXRoIHBvdGVudGlhbCBuZXcgc2V0dGluZ3MNCiAgICAgICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgICAgIF9zZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgICAgIH0NCiAgICAgICAgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhfc2V0dGluZ3MpOw0KICAgICAgICB2aWRlb1RyYWNraW5nID0gbmV3IFZpZGVvVHJhY2tpbmcoZ2V0VXJsTWV0YShfc2V0dGluZ3MudXJsKSk7DQogICAgICAgIHRvdGFsUGxheXRpbWUgPSAoX3NldHRpbmdzLnN0YXJ0VGltZSA+PSAxICYmIF9zZXR0aW5ncy5lbmRUaW1lID49IDEpDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5lbmRUaW1lIC0gX3NldHRpbmdzLnN0YXJ0VGltZQ0KICAgICAgICAgICAgOiBfdmlkZW8uZHVyYXRpb24gLSBfc2V0dGluZ3Muc3RhcnRUaW1lOw0KICAgICAgICBpZiAoX3NldHRpbmdzLmxvb3BXaXRoQmFubmVyKSB7DQogICAgICAgICAgICBpZiAoV2lkZ2V0LmR1cmF0aW9uID4gX3ZpZGVvLmR1cmF0aW9uKSB7DQogICAgICAgICAgICAgICAgdG90YWxQbGF5dGltZSA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRvdGFsUGxheXRpbWUgPSBXaWRnZXQuZHVyYXRpb247DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIE9ubHkgc2V0IGF1dG9wbGF5IHRvIHRydWUgaWYgdGhlIGRldmljZSBzdXBwb3J0cyBwbGF5c0lubGluZSBhdHRyaWJ1dGUgYW5kIGlzIG1vYmlsZSwNCiAgICAgICAgICogYXV0b3BsYXlpbmcgaXMgb3RoZXJ3aXNlIGhhbmRsZWQgZnJvbSBvbkNhblBsYXkgdG8gZW5zdXJlIHRoYXQgdGhlIHZpZGVvIGlzIHJlYWR5IGZvciBwbGF5YmFjay4NCiAgICAgICAgICogVGhpcyBpcyB0byBwcm9wZXJseSBzaG93L2hpZGUgdGhlIHBvc3RlciB3aGlsc3QgdmlkZW8gaXMgYnVmZmVyaW5nDQogICAgICAgICAqLw0KICAgICAgICBfdmlkZW8uYXV0b3BsYXkgPSBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZQ0KICAgICAgICAgICAgPyBfc2V0dGluZ3MuYXV0b3BsYXkNCiAgICAgICAgICAgIDogZmFsc2U7DQogICAgICAgIF92aWRlby5jb250cm9scyA9IGRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5jb250cm9scw0KICAgICAgICAgICAgOiBmYWxzZTsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgc2V0Vm9sdW1lKF9zZXR0aW5ncy52b2x1bWUpOw0KICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIGF1dG9wbGF5IGFuZCB0aGVyZSdzIHZvbHVtZSB0aGVyZSdzIG5vIHBvaW50IGluIG11dGluZyB0aGUgdmlkZW8gYnkgZGVmYXVsdA0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3Mudm9sdW1lKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8ucGxheWJhY2tSYXRlID0gX3NldHRpbmdzLnBsYXliYWNrUmF0ZTsNCiAgICAgICAgLy8gVXBkYXRlIHBvc3RlciBpZiBjaGFuZ2VkDQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2ltYWdlJyAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLnBvc3RlciArICcpJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICAgICAgdXBkYXRlRE9NKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFByb3BlclVybCh1cmwpIHsNCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyhcclxufFxufFxyfFxzKS9nbSwgIiIpOw0KICAgICAgICBsZXQgdXJscyA9IHVybC5zcGxpdCgnLCcpOw0KICAgICAgICBpZiAoKHVybHMubGVuZ3RoID09PSAyICYmICF1cmwubWF0Y2goL1wuKHdlYm18bW92KS8pKSB8fCB1cmxzLmxlbmd0aCA+IDIpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh1cmxzLmxlbmd0aCA9PT0gMSAmJiAhdXJsLm1hdGNoKCcubXA0JykpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodXJscy5sZW5ndGggPT09IDIpIHsNCiAgICAgICAgICAgIGlmIChnZXREZXZpY2VJbmZvKCkuaXNTYWZhcmkpIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmxzWzBdLm1hdGNoKCcubW92JykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHVybCA9IHVybHNbMF0ubWF0Y2goJy53ZWJtJykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpbnN0cnVjdGlvbnMuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICByZXR1cm4gdXJsOw0KICAgIH0NCiAgICBmdW5jdGlvbiBjcmVhdGVWaWRlb0VsZW1lbnQodXJsKSB7DQogICAgICAgIHVybCA9IGdldFByb3BlclVybCh1cmwpOw0KICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHZhciB1ID0gZ2V0VXJsTWV0YSh1cmwpOw0KICAgICAgICBjb25zdCB2aWRlb1R5cGUgPSBnZXRWaWRlb1R5cGVBbmRVcGRhdGVTb3VyY2VVcmwodSk7DQogICAgICAgIHZhciB1cmxTcmMgPSB1LnNvdXJjZVVybDsNCiAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gdS5wYXJhbXM7DQogICAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgIHZpZGVvLmlkID0gJ3ZpZGVvLXBsYXllcic7DQogICAgICAgIHZpZGVvLnByZWxvYWQgPSAnbWV0YWRhdGEnOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICcnKTsNCiAgICAgICAgLy8gTXV0ZWQgaXMgc2V0IGhlcmUgaW5zdGVhZCBvZiBzZXRWaWRlb1NldHRpbmcgdG8gcHJldmVudCBpdCB0byBiZSBtdXRlZCB3aGVuIG5vdCB3YW50ZWQNCiAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlOw0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpIGluIHZpZGVvVHlwZSkgew0KICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW2ldLmV4dGVuc2lvbiArIHF1ZXJ5UGFyYW1zOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoInR5cGUiLCB2aWRlb1R5cGVbaV0udHlwZSk7DQogICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmlkZW87DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KSB7DQogICAgICAgIGxldCB2aWRlb1R5cGU7DQogICAgICAgIGlmICh1LmV4dC5tYXRjaCgvKHdlYm18bW92KS8pKSB7DQogICAgICAgICAgICBpZiAoZ2V0RGV2aWNlSW5mbygpLmlzU2FmYXJpKSB7DQogICAgICAgICAgICAgICAgdmlkZW9UeXBlID0gW3sNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogJ21vdicsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vcXVpY2t0aW1lJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZpZGVvVHlwZSA9IFt7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246ICd3ZWJtJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB2aWRlb1R5cGU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZpZGVvVHlwZXM7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdXBkYXRlRE9NKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIWRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlKSB7DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3RhcnRUaW1lID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdtb2JpbGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5jb250cm9scyAmJiAhX3NldHRpbmdzLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ICE9PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICB9DQogICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzBdLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnBsYXlQYXVzZUJ1dHRvblNpemUgKyAnJSc7DQogICAgICAgIHBsYXlQYXVzZU92ZXJsYXkucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUud2lkdGggPSBfc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSArICclJzsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5jb250cm9scyAmJiAhZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW9Db250cm9scy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2aWRlb0NvbnRyb2xzLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gX3NldHRpbmdzLnBsYXllckJhY2tncm91bmQ7DQogICAgICAgIF92aWRlby5zdHlsZS5maWx0ZXIgPSAnZ3JheXNjYWxlKCcgKyBfc2V0dGluZ3MuZ3JheVNjYWxlICsgJyUpJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLnRvcCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCArICclJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmxlZnQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ICsgJyUnOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uc3R5bGUud2lkdGggPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5xdWVyeVNlbGVjdG9yQWxsKCdzdmcnKVswXS5zdHlsZS5maWxsID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbkNvbG9yOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24ucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUuZmlsbCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSArPSAiaW1hZ2VHZW5lcmF0b3JNb2RlIjsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwwLDAsMCknOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICB9DQogICAgZnVuY3Rpb24gc2V0RmlsbE9wdGlvbigpIHsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5iYWNrZ3JvdW5kRmlsbCA9PT0gJ0NvdmVyJykgew0KICAgICAgICAgICAgcG9zdGVyLmNsYXNzTmFtZSA9ICdjb3Zlcic7DQogICAgICAgICAgICAoX3ZpZGVvLnZpZGVvSGVpZ2h0IC8gX3ZpZGVvLnZpZGVvV2lkdGgpIDw9ICh2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyB2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCkNCiAgICAgICAgICAgICAgICA/IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteCcNCiAgICAgICAgICAgICAgICA6IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwb3N0ZXIuY2xhc3NOYW1lID0gJyc7DQogICAgICAgICAgICBfdmlkZW8uY2xhc3NOYW1lID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5wb3N0ZXIpIHsNCiAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHJlc3RhcnRWaWRlbygpIHsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgLy8gaWYoX3NldHRpbmdzLmxvb3Apew0KICAgICAgICBwbGF5VmlkZW8oKTsNCiAgICAgICAgLy8gfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRSZWFkeVN0YXRlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnJlYWR5U3RhdGUgPiByZWFkeVN0YXRlKSB7DQogICAgICAgICAgICByZWFkeVN0YXRlID0gX3ZpZGVvLnJlYWR5U3RhdGU7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gcGxheVZpZGVvKGZvcmNlUGxheSkgew0KICAgICAgICAvKg0KICAgICAgICAgKiBDaGVjayBpZiB0aGUgdmlkZW8gaXMgcGxheWFibGUsIG90aGVyd2lzZSBhZGQgaXQgdG8gdGhlIGV2ZW50UXVldWUgd2hpY2gNCiAgICAgICAgICogdHJpZ2dlcnMgcGxheSBvbiBvbkNhblBsYXkgd2hpY2ggaXMgd2hlbiB2aWRlbyBpcyBwbGF5YWJsZQ0KICAgICAgICAgKi8NCiAgICAgICAgc2V0UmVhZHlTdGF0ZSgpOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkgfHwgaGFzUGxheWVkKSB7DQogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDE1MCk7DQogICAgICAgIGlmICgocmVhZHlTdGF0ZSA+PSAzICYmIF9zZXR0aW5ncy5hdXRvcGxheSkgfHwgaGFzUGxheWVkIHx8IGZvcmNlUGxheSkgew0KICAgICAgICAgICAgaWYgKF92aWRlby52b2x1bWUgPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSBfdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGRldmljZUluZm8uaXNNb2JpbGUgJiYgIWRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycgJiYgX3NldHRpbmdzLnBvc3RlciA/ICdibG9jaycgOiAnbm9uZSc7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiBfc2V0dGluZ3MucG9zdGVyID8gJ25vbmUnIDogJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmNvbnRyb2xzICYmICFfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGV2ZW50UXVldWUucHVzaCgncGxheScpOw0KICAgICAgICAgICAgaWYgKHZpZGVvVHJhY2tpbmcpIHsNCiAgICAgICAgICAgICAgICB2aWRlb1RyYWNraW5nLnN0YXJ0ZWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZWVrVG8ocykgew0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IHM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHBhdXNlVmlkZW8oKSB7DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkICYmICFwZW5kaW5nUGF1c2UpIHsNCiAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICBfdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgfQ0KICAgICAgICBwZW5kaW5nUGF1c2UgPSB0cnVlOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzdG9wVmlkZW8oKSB7DQogICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldFZvbHVtZSh2b2x1bWUpIHsNCiAgICAgICAgX3ZpZGVvLnZvbHVtZSA9IGRldmljZUluZm8uaXNNb2JpbGUgPyAwIDogdG9GcmFjdGlvbnModm9sdW1lKTsNCiAgICAgICAgLy8gQmFubmVyRmxvdy5yYWlzZUV2ZW50KCd2b2x1bWVDaGFuZ2VkJywgX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvZ2dsZU11dGUobXV0ZSkgew0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIF92aWRlby5tdXRlZCA9ICh0eXBlb2YgbXV0ZSA9PT0gJ2Jvb2xlYW4nKSA/IG11dGUgOiAhX3ZpZGVvLm11dGVkOw0KICAgICAgICAvLyBCYW5uZXJGbG93LnJhaXNlRXZlbnQoJ3ZvbHVtZUNoYW5nZWQnLCBfdmlkZW8ubXV0ZWQgPyAwIDogX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGxvYWRWaWRlbyh1cmwpIHsNCiAgICAgICAgdXJsID0gZ2V0UHJvcGVyVXJsKHVybCk7DQogICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdXJsID0gZ2V0QWRqdXN0ZWRVcmwodXJsKTsNCiAgICAgICAgdmFyIHUgPSBnZXRVcmxNZXRhKHVybCk7DQogICAgICAgIGNvbnN0IHZpZGVvVHlwZSA9IGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KTsNCiAgICAgICAgdmFyIHVybFNyYyA9IHUuc291cmNlVXJsOw0KICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB1LnBhcmFtczsNCiAgICAgICAgLy8gVXBkYXRlIHNvdXJjZXMNCiAgICAgICAgZm9yICh2YXIgdnQgaW4gdmlkZW9UeXBlKSB7DQogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NvdXJjZScpW3Z0XTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW3Z0XS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgY3VycmVudFZvbHVtZSA9IF92aWRlby52b2x1bWU7DQogICAgICAgIF92aWRlby5sb2FkKCk7DQogICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGF1c2VWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIHNldFZpZGVvU2V0dGluZ3MoeyB1cmw6IHVybCB9KTsNCiAgICAgICAgc2V0Vm9sdW1lKGN1cnJlbnRWb2x1bWUpOw0KICAgIH0NCiAgICBmdW5jdGlvbiB0b2dnbGVQbGF5UGF1c2VCdXR0b24oKSB7DQogICAgICAgIGlmIChfdmlkZW8ucGF1c2VkKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5wYXVzZWQgfHwgX3ZpZGVvLmVuZGVkKSB7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gZ2V0VXJsTWV0YSh1cmwpIHsNCiAgICAgICAgdmFyIG8gPSB7fTsNCiAgICAgICAgLy8gaWYoIXZhbGlkYXRlVXJsKHVybCkpew0KICAgICAgICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWQgbm90IHJlY2VpdmUgYSB2YWxpZCBVUkwuJyk7DQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKHVybCAmJiB1cmwubGVuZ3RoKSB7DQogICAgICAgICAgICBvLnVybCA9IHVybC5zcGxpdCgnPycpWzBdOw0KICAgICAgICAgICAgby5zb3VyY2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXS5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCIuIikpOw0KICAgICAgICAgICAgby5wYXJhbXMgPSB1cmwuaW5kZXhPZignPycpICE9IC0xID8gJz8nICsgdXJsLnNwbGl0KCc/JylbMV0gOiAnJzsNCiAgICAgICAgICAgIG8uZXh0ID0gdXJsLnNwbGl0KCc/JylbMF0uc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZigiLiIpICsgMSkgfHwgJyc7DQogICAgICAgICAgICBvLmZpbGVuYW1lID0gdXJsLm1hdGNoKC8oW14vXSskKS8sICcnKVswXS5zcGxpdCgnPycpWzBdOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBvOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV2ZW50IGhhbmRsZXJzDQogICAgKi8NCiAgICBmdW5jdGlvbiBvbk1ldGFMb2FkZWQoKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF9zZXR0aW5ncy5zdGFydFRpbWUgPSBfc2V0dGluZ3Muc3RhcnRUaW1lIDw9IF92aWRlby5kdXJhdGlvbiA/IF9zZXR0aW5ncy5zdGFydFRpbWUgOiAwOw0KICAgICAgICBzZXRWaWRlb1NldHRpbmdzKF9zZXR0aW5ncyk7DQogICAgICAgIHRpbWVVcGRhdGUoKTsNCiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gb25DYW5QbGF5KCkgew0KICAgICAgICBlbEJ5SWQoJ2luc3RydWN0aW9ucycpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgLy8gaWYoIWhhc1BsYXllZCAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICAvLyAgICAgVGltZWxpbmUucmVzdGFydCgpOw0KICAgICAgICAvLyB9DQogICAgICAgIGlmIChvbkxvYWRlZFByb21pc2VSZXNvbHZlcikgew0KICAgICAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIoKTsNCiAgICAgICAgfQ0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIGZvciAodmFyIGkgaW4gZXZlbnRRdWV1ZSkgew0KICAgICAgICAgICAgX3ZpZGVvW2V2ZW50UXVldWVbaV1dKCk7DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGV2ZW50UXVldWVbaV0gPT09ICdwbGF5JyAmJiBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlUGxheVBhdXNlQnV0dG9uKCk7DQogICAgICAgIGlmIChyZWFkeVN0YXRlID49IDMgfHwgIV92aWRlby5wYXVzZWQpIHsNCiAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVVcGRhdGVkKCkgew0KICAgICAgICBpZiAoIV92aWRlbykgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICghdGltZUJhci5zdHlsZS53aWR0aCkgew0KICAgICAgICAgICAgdGltZUJhci5zdHlsZS53aWR0aCA9IF92aWRlby5kdXJhdGlvbiArICclJzsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZCgoX3ZpZGVvLmN1cnJlbnRUaW1lIC8gX3ZpZGVvLmR1cmF0aW9uKSAqIDEwMCkgKyAnJSc7DQogICAgICAgIGlmICh2aWRlb0R1cmF0aW9uLmlubmVySFRNTC5zcGxpdCgnLycpWzBdLnRyaW0oKSAhPT0gZm9ybWF0VGltZShfdmlkZW8uY3VycmVudFRpbWUpKSB7DQogICAgICAgICAgICB2aWRlb0R1cmF0aW9uLmlubmVySFRNTCA9IGZvcm1hdFRpbWUoX3ZpZGVvLmN1cnJlbnRUaW1lKSArICcgLyAnICsgZm9ybWF0VGltZShfdmlkZW8uZHVyYXRpb24pOw0KICAgICAgICB9DQogICAgICAgIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuOTUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC45NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuY29tcGxldGVkKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gQ2hlY2sgaWYgcmVhY2hlZCB0aGlyZCBxdWFydGlsZSAoNzUlKQ0KICAgICAgICBlbHNlIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuNzUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC43NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcudHEoKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBDaGVjayBpZiByZWFjaGVkIG1pZHBvaW50ICg1MCUpDQogICAgICAgIGVsc2UgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC41MCAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjUwICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgdmlkZW9UcmFja2luZy5tcCgpOw0KICAgICAgICB9DQogICAgICAgIC8vIENoZWNrIGlmIHJlYWNoZWQgZmlyc3QgcXVhcnRpbGUgKDI1JSkNCiAgICAgICAgZWxzZSBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49IHRvdGFsUGxheXRpbWUgKiAwLjI1IC0gMSAmJiBfdmlkZW8uY3VycmVudFRpbWUgPD0gdG90YWxQbGF5dGltZSAqIDAuMjUgKyAxICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7DQogICAgICAgICAgICB2aWRlb1RyYWNraW5nLmZxKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSAoKF9zZXR0aW5ncy5lbmRUaW1lICYmIF9zZXR0aW5ncy5lbmRUaW1lIDwgX3ZpZGVvLmR1cmF0aW9uKSA/IF9zZXR0aW5ncy5lbmRUaW1lIDogX3ZpZGVvLmR1cmF0aW9uKSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgb25WaWRlb0VuZGVkKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25WaWRlb0VuZGVkKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5sb29wKSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXN0YXJ0VmlkZW8oKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGxheSgpIHsNCiAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGF1c2UoKSB7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZvbHVtZUNoYW5nZSgpIHsNCiAgICAgICAgdm9sdW1lQ29udHJvbFZhbHVlLnN0eWxlLndpZHRoID0gIV92aWRlby5tdXRlZCA/IF92aWRlby52b2x1bWUgKiAxMDAgKyAnJScgOiAnMCc7DQogICAgICAgIGlmIChfdmlkZW8udm9sdW1lID09PSAwIHx8IF92aWRlby5tdXRlZCkgew0KICAgICAgICAgICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5jbGFzc05hbWUgPSAnbXV0ZWQnOw0KICAgICAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9ICdtdXRlZCc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2b2x1bWVDb250cm9sVG9nZ2xlLmNsYXNzTmFtZSA9ICd1bm11dGVkJzsNCiAgICAgICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSAndW5tdXRlZCc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25DbGljayhldmVudCkgew0KICAgICAgICB2YXIgY2xpY2tPblBsYXlQYXVzZUJ1dHRvbiA9IGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldDsNCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBjbGlja09uUGxheVBhdXNlQnV0dG9uKSB7DQogICAgICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCkgew0KICAgICAgICAgICAgICAgIHRvZ2dsZU11dGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIHBsYXlWaWRlbyh0cnVlKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgQ3JlYXRpdmUub3BlbihldmVudCwgdW5kZWZpbmVkKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKg0KICAgICoqIFZpZGVvIGNvbnRyb2xzDQogICAgKi8NCiAgICB2YXIgdm9sdW1lRHJhZyA9IGZhbHNlOw0KICAgIHZhciB0aW1lRHJhZyA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIG9uVG9nZ2xlUGxheVBhdXNlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCB8fCBfdmlkZW8uZW5kZWQpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICAgICAgdXNlckluaXRpYXRlZFBhdXNlID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB2b2x1bWVEcmFnID0gdHJ1ZTsNCiAgICAgICAgdXBkYXRlVm9sdW1lKGUucGFnZVgpOw0KICAgIH0NCiAgICA7DQogICAgZnVuY3Rpb24gdXBkYXRlVm9sdW1lKHgpIHsNCiAgICAgICAgdmFyIG1heFZvbHVtZSA9IDE7DQogICAgICAgIHZhciBwb3NpdGlvbiA9IHggLSB2b2x1bWVDb250YWluZXIub2Zmc2V0TGVmdCAtIHZvbHVtZUNvbnRyb2wub2Zmc2V0TGVmdCAtIDI7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyB2b2x1bWVDb250cm9sLm9mZnNldFdpZHRoOw0KICAgICAgICBpZiAocGVyY2VudGFnZSA+IDEwMCkgew0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IDEwMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocGVyY2VudGFnZSA8IDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAwOw0KICAgICAgICB9DQogICAgICAgIHNldFZvbHVtZShtYXhWb2x1bWUgKiBwZXJjZW50YWdlIC8gMTAwKTsNCiAgICAgICAgdm9sdW1lID0gX3ZpZGVvLnZvbHVtZTsNCiAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgIG9uVm9sdW1lQ2hhbmdlKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lVG9nZ2xlKCkgew0KICAgICAgICBfdmlkZW8ubXV0ZWQgPSAhX3ZpZGVvLm11dGVkOw0KICAgICAgICBvblZvbHVtZUNoYW5nZSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVTZWVrRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB0aW1lRHJhZyA9IHRydWU7DQogICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNvbnRyb2xzTW91c2VVcChlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB2b2x1bWVEcmFnID0gZmFsc2U7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB0aW1lRHJhZyA9IGZhbHNlOw0KICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3NiYXIoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25Db250cm9sc01vdXNlRG93bihlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVQcm9ncmVzc2JhcihlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzc2Jhcih4KSB7DQogICAgICAgIHZhciBtYXhkdXJhdGlvbiA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgdmFyIHBvc2l0aW9uID0geCAtIHByb2dyZXNzLm9mZnNldExlZnQ7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyBwcm9ncmVzcy5vZmZzZXRXaWR0aDsNCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPiAxMDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAxMDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPCAwKSB7DQogICAgICAgICAgICBwZXJjZW50YWdlID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gcGVyY2VudGFnZSArICclJzsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gbWF4ZHVyYXRpb24gKiBwZXJjZW50YWdlIC8gMTAwOw0KICAgIH0NCiAgICBjb25zdCBkb2MgPSBkb2N1bWVudDsNCiAgICAvLyBGdWxsc2NyZWVuDQogICAgdmFyIGZ1bGxTY3JlZW5FbmFibGVkID0gISEoZG9jLmZ1bGxzY3JlZW5FbmFibGVkDQogICAgICAgIHx8IGRvYy5tb3pGdWxsU2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2MubXNGdWxsc2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2Mud2Via2l0U3VwcG9ydHNGdWxsc2NyZWVuDQogICAgICAgIHx8IGRvYy53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCk7DQogICAgaWYgKCFmdWxsU2NyZWVuRW5hYmxlZCkgew0KICAgICAgICBmdWxsc2NyZWVuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGhhbmRsZUZ1bGxzY3JlZW4oKSB7DQogICAgICAgIGlmIChpc0Z1bGxTY3JlZW4oKSkgew0KICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmIChkb2MubW96Q2FuY2VsRnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICBkb2MubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4pDQogICAgICAgICAgICAgICAgZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGRvYy5tc0V4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvYy5tc0V4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YShmYWxzZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZiAodmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4pDQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKQ0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmICh2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmlkZW9Db250YWluZXIubXNSZXF1ZXN0RnVsbHNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSh0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0Z1bGxTY3JlZW4oKSB7DQogICAgICAgIHJldHVybiAhIShkb2MuZnVsbFNjcmVlbiB8fCBkb2Mud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvYy5tb3pGdWxsU2NyZWVuIHx8IGRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldEZ1bGxzY3JlZW5EYXRhKHN0YXRlKSB7DQogICAgICAgIHZpZGVvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1mdWxsc2NyZWVuJywgJycgKyAhIXN0YXRlKTsNCiAgICAgICAgc3RhdGUgPyB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmdWxsc2NyZWVuJykgOiB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7DQogICAgfQ0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhKGRvYy5mdWxsU2NyZWVuIHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCkpOw0KICAgIH0pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhZG9jLndlYmtpdElzRnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISFkb2MubW96RnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSghIWRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCiAgICB9KTsNCiAgICAvKg0KICAgICoqIFV0aWxzDQogICAgKi8NCiAgICBmdW5jdGlvbiBnZXREZXZpY2VJbmZvKCkgew0KICAgICAgICB2YXIgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xTYW1zdW5nQnJvd3NlcnxpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgICAgIHZhciBpc0FuZHJvaWQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImFuZHJvaWQiKSA+IC0xOw0KICAgICAgICB2YXIgaXNTYW1zdW5nQnJvd3NlciA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhbXN1bmdCcm93c2VyL2kpIHx8IGZhbHNlOw0KICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOw0KICAgICAgICB2YXIgaXNJb3MgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NU1N0cmVhbSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG1hdGNoID0gKG5hdmlnYXRvci5hcHBWZXJzaW9uKS5tYXRjaCgvT1MgKFxkKylfKFxkKylfPyhcZCspPy8pLCB2ZXJzaW9uOw0KICAgICAgICAgICAgaWYgKG1hdGNoICE9PSB1bmRlZmluZWQgJiYgbWF0Y2ggIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gWw0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsxXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsyXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFszXSB8fCAwLCAxMCkNCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZlcnNpb24uam9pbignLicpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KSgpOw0KICAgICAgICB2YXIgY2FuUGxheUlubGluZSA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgICAgICB2Lm11dGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHYucGxheSgpOw0KICAgICAgICAgICAgcmV0dXJuICF2LnBhdXNlZCB8fCAoJ3BsYXlzSW5saW5lJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpKTsNCiAgICAgICAgfSkoKTsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlzTW9iaWxlOiBpc01vYmlsZSwNCiAgICAgICAgICAgIGlzQW5kcm9pZDogaXNBbmRyb2lkLA0KICAgICAgICAgICAgaXNTYW1zdW5nQnJvd3NlcjogaXNTYW1zdW5nQnJvd3NlciwNCiAgICAgICAgICAgIGlzU2FmYXJpOiBpc1NhZmFyaSwNCiAgICAgICAgICAgIGlzSW9zOiBpc0lvcywNCiAgICAgICAgICAgIGNhblBsYXlJbmxpbmU6IGNhblBsYXlJbmxpbmUNCiAgICAgICAgfTsNCiAgICB9DQogICAgZnVuY3Rpb24gZGVzZXJpYWxpemVTZXR0aW5ncyhzZXR0aW5ncykgew0KICAgICAgICB2YXIgcyA9IHt9Ow0KICAgICAgICAvLyBWaWRlbyBzZXR0aW5ncy9wcm9wZXJ0aWVzDQogICAgICAgIHMudXJsID0gc2V0dGluZ3MudXJsOw0KICAgICAgICBzLmF1dG9wbGF5ID0gc2V0dGluZ3MuYXV0b3BsYXk7DQogICAgICAgIHMubG9vcCA9IHNldHRpbmdzLmxvb3A7DQogICAgICAgIHMuY29udHJvbHMgPSBzZXR0aW5ncy5jb250cm9sczsNCiAgICAgICAgcy52b2x1bWUgPSBzZXR0aW5ncy52b2x1bWUgfHwgMDsNCiAgICAgICAgcy5zdGFydFRpbWUgPSBzZXR0aW5ncy5zdGFydFRpbWUgfHwgMDsNCiAgICAgICAgcy5lbmRUaW1lID0gc2V0dGluZ3MuZW5kVGltZTsNCiAgICAgICAgcy5wbGF5YmFja1JhdGUgPSAocGFyc2VGbG9hdChzZXR0aW5ncy5wbGF5YmFja1JhdGUpIHx8IDEpOw0KICAgICAgICBzLnBvc3RlciA9IGdldEFkanVzdGVkVXJsKHNldHRpbmdzLnBvc3RlciB8fCAnJyk7DQogICAgICAgIC8vIFNwZWNpYWwgc2V0dGluZ3MNCiAgICAgICAgcy5wbGF5ZXJCYWNrZ3JvdW5kID0gc2V0dGluZ3MucGxheWVyQmFja2dyb3VuZDsNCiAgICAgICAgcy5ncmF5U2NhbGUgPSBzZXR0aW5ncy5ncmF5U2NhbGU7DQogICAgICAgIHMubG9vcFdpdGhCYW5uZXIgPSBzZXR0aW5ncy5sb29wV2l0aEJhbm5lcjsNCiAgICAgICAgcy5zdG9wV2l0aENyZWF0aXZlID0gc2V0dGluZ3Muc3RvcFdpdGhDcmVhdGl2ZTsNCiAgICAgICAgcy5iYWNrZ3JvdW5kRmlsbCA9IHNldHRpbmdzLmJhY2tncm91bmRGaWxsOw0KICAgICAgICBzLmZhbGxiYWNrSW1hZ2UgPSBnZXRBZGp1c3RlZFVybChzZXR0aW5ncy5mYWxsYmFja0ltYWdlIHx8ICcnKTsNCiAgICAgICAgcy5wbGF5UGF1c2VCdXR0b25TaXplID0gc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSB8fCA0MDsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b24gPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b247DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemU7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3IgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uVG9wIHx8IDA7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0IHx8IDA7DQogICAgICAgIHJldHVybiBzOw0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0luTG9jYWxFbnZpcm9ubWVudCgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmICghd2luZG93KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHdpbmRvdy50b3AubG9jYXRpb24ucHJvdG9jb2wgPT09ICdmaWxlOicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHZhbGlkYXRlVXJsKHMpIHsNCiAgICAgICAgaWYgKCFpbkJmKCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAvXig/Oig/Omh0dHBzP3xmdHApOlwvXC8pPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKSkoPzo6XGR7Miw1fSk/KD86XC9cUyopPyQvLnRlc3Qocyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGluQmYoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBsZXQgdyA9IHdpbmRvdzsNCiAgICAgICAgICAgIC8vIEFzIGxvbmcgYXMgYSBwYXJlbnQgZXhpc3RzDQogICAgICAgICAgICB3aGlsZSAody5wYXJlbnQgJiYgdyAhPT0gdy5wYXJlbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICB3LnBhcmVudC5sb2NhdGlvbi5ocmVmOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXcucGFyZW50LmRvY3VtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB3ID0gdy5wYXJlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAhIXcubG9jYXRpb24ub3JpZ2luLm1hdGNoKC9iYW5uZXJmbG93fGxvY2FsaG9zdC8pIHx8ICEhd2luZG93LnRvcC5sb2NhdGlvbi5vcmlnaW4ubWF0Y2goL2Jhbm5lcmZsb3d8bG9jYWxob3N0Lyk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKF9hKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdG9GcmFjdGlvbnMobikgew0KICAgICAgICByZXR1cm4gbiA8IDEgPyBuDQogICAgICAgICAgICA6IG4gPiAxMDAgPyAxDQogICAgICAgICAgICAgICAgOiAhbiA/IDANCiAgICAgICAgICAgICAgICAgICAgOiBuIC8gMTAwOw0KICAgIH0NCiAgICBmdW5jdGlvbiBmb3JtYXRUaW1lKHQpIHsNCiAgICAgICAgcmV0dXJuIHQgPyAodCAtICh0ICU9IDYwKSkgLyA2MCArICg5LjUgPCB0ID8gJzonIDogJzowJykgKyBNYXRoLnJvdW5kKHQpIDogJzA6MDAnOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV4cG9zZQ0KICAgICovDQogICAgdGhpcy5zZXRWaWRlb1NldHRpbmdzID0gc2V0VmlkZW9TZXR0aW5nczsNCiAgICB0aGlzLmdldFZpZGVvU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfc2V0dGluZ3M7IH07DQogICAgdGhpcy5zZXRGaWxsT3B0aW9uID0gc2V0RmlsbE9wdGlvbjsNCiAgICB0aGlzLnBsYXkgPSBwbGF5VmlkZW87DQogICAgdGhpcy5yZXN0YXJ0ID0gcmVzdGFydFZpZGVvOw0KICAgIHRoaXMucGF1c2UgPSBwYXVzZVZpZGVvOw0KICAgIHRoaXMuc3RvcCA9IHN0b3BWaWRlbzsNCiAgICB0aGlzLmxvYWRWaWRlbyA9IGxvYWRWaWRlbzsNCiAgICB0aGlzLnNldFZvbHVtZSA9IHNldFZvbHVtZTsNCiAgICB0aGlzLnRvZ2dsZU11dGUgPSB0b2dnbGVNdXRlOw0KICAgIHRoaXMuc2Vla1RvID0gc2Vla1RvOw0KICAgIHRoaXMudmlkZW8gPSBfdmlkZW87DQogICAgdGhpcy5wb3N0ZXIgPSBwb3N0ZXI7DQp9DQpmdW5jdGlvbiBnZXRBZGp1c3RlZFVybCh0ZXh0KSB7DQogICAgbGV0IHVybCA9IHRleHQNCiAgICAgICAgLnJlcGxhY2UoL3ZpZGVvLmJhbm5lcmZsb3cuY29tL2csICdjLmJhbm5lcmZsb3cubmV0L2JmLXZpZGVvcycpDQogICAgICAgIC5yZXBsYWNlKC8oXHJcbnxcbnxccnxccykvZ20sICcnKTsNCiAgICBpZiAoQWQuY3VzdG9tRG9tYWluKSB7DQogICAgICAgIC8vIFJlbW92ZSBodHRwfHMgcmVwbGFjZW1lbnQgd2hlbiBBZC5jdXN0b21Eb21haW4gb25seSBnaXZlcyB0aGUgZG9tYWluDQogICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdjLmJhbm5lcmZsb3cubmV0JywgQWQuY3VzdG9tRG9tYWluLnJlcGxhY2UoLyhodHRwfGh0dHBzKTpcL1wvLywgJycpKTsNCiAgICB9DQogICAgcmV0dXJuIHVybDsNCn0NCmZ1bmN0aW9uIFZpZGVvVHJhY2tpbmcob3B0aW9ucykgew0KICAgIC8qDQogICAgKiogIFRoaXMgbWV0aG9kIGJ1YmJsZXMgdXAgZXZlbnRzIHRvIHRoZSBCYW5uZXIvQ3VzdG9tIHNjcmlwdA0KICAgICoqICBhbmQgaXMgdXNlZCB0byBzZW5kIHZpZGVvIHRyYWNraW5nIGV2ZW50cw0KICAgICovDQogICAgdmFyIHVybCA9IG9wdGlvbnMudXJsOw0KICAgIHZhciBmaWxlbmFtZSA9IG9wdGlvbnMuZmlsZW5hbWU7DQogICAgLy8gT25jZSBwZXIgdmlldyA9IE9QVg0KICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgaXNJbml0ID0gZmFsc2UsIC8vIE9QVg0KICAgIHN0YXJ0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgcmVhY2hlZEZRID0gZmFsc2UsIC8vIE9QVg0KICAgIHJlYWNoZWRNUCA9IGZhbHNlLCAvLyBPUFYNCiAgICByZWFjaGVkVFEgPSBmYWxzZTsgLy8gT1BWDQogICAgLy8gVmlkZW8gaW5pdGlhbGl6ZWQgDQogICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoaXNJbml0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBpc0luaXQgPSB0cnVlOw0KICAgIH07DQogICAgLy8gVmlkZW8gc3RhcnRlZCBvciBwbGF5aW5nIGZyb20gYmVnaW5uaW5nIGFnYWluDQogICAgdGhpcy5zdGFydGVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIGlmIChzdGFydGVkKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMCB9KTsNCiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBGaXJzdCBRdWFydGlsZQ0KICAgIHRoaXMuZnEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkRlEgfHwgIXN0YXJ0ZWQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC4yNSB9KTsNCiAgICAgICAgcmVhY2hlZEZRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIE1pZHBvaW50DQogICAgdGhpcy5tcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHJlYWNoZWRNUCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjUgfSk7DQogICAgICAgIHJlYWNoZWRNUCA9IHRydWU7DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBUaGlyZCBxdWFydGlsZQ0KICAgIHRoaXMudHEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkVFEpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC43NSB9KTsNCiAgICAgICAgcmVhY2hlZFRRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIGhhcyBjb21wbGV0ZWQNCiAgICB0aGlzLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKGhhc0NvbXBsZXRlZCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAxIH0pOw0KICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlOw0KICAgIH07DQp9DQppZiAoIUFycmF5LnByb3RvdHlwZS5maW5kKSB7DQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2ZpbmQnLCB7DQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAocHJlZGljYXRlKSB7DQogICAgICAgICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLg0KICAgICAgICAgICAgaWYgKHRoaXMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ0aGlzIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTsNCiAgICAgICAgICAgIC8vIDIuIExldCBsZW4gYmUgPyBUb0xlbmd0aCg/IEdldChPLCAibGVuZ3RoIikpLg0KICAgICAgICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwOw0KICAgICAgICAgICAgLy8gMy4gSWYgSXNDYWxsYWJsZShwcmVkaWNhdGUpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uDQogICAgICAgICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIDQuIElmIHRoaXNBcmcgd2FzIHN1cHBsaWVkLCBsZXQgVCBiZSB0aGlzQXJnOyBlbHNlIGxldCBUIGJlIHVuZGVmaW5lZC4NCiAgICAgICAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdOw0KICAgICAgICAgICAgLy8gNS4gTGV0IGsgYmUgMC4NCiAgICAgICAgICAgIHZhciBrID0gMDsNCiAgICAgICAgICAgIC8vIDYuIFJlcGVhdCwgd2hpbGUgayA8IGxlbg0KICAgICAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHsNCiAgICAgICAgICAgICAgICAvLyBhLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS4NCiAgICAgICAgICAgICAgICAvLyBiLiBMZXQga1ZhbHVlIGJlID8gR2V0KE8sIFBrKS4NCiAgICAgICAgICAgICAgICAvLyBjLiBMZXQgdGVzdFJlc3VsdCBiZSBUb0Jvb2xlYW4oPyBDYWxsKHByZWRpY2F0ZSwgVCwgwqsga1ZhbHVlLCBrLCBPIMK7KSkuDQogICAgICAgICAgICAgICAgLy8gZC4gSWYgdGVzdFJlc3VsdCBpcyB0cnVlLCByZXR1cm4ga1ZhbHVlLg0KICAgICAgICAgICAgICAgIHZhciBrVmFsdWUgPSBvW2tdOw0KICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCBrVmFsdWUsIGssIG8pKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBrVmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGUuIEluY3JlYXNlIGsgYnkgMS4NCiAgICAgICAgICAgICAgICBrKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyA3LiBSZXR1cm4gdW5kZWZpbmVkLg0KICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgfQ0KICAgIH0pOw0KfQ0K",customProperties:[{label:"Url",name:"url",unit:"text",value:"{\"text\":\"https://productsup.melia.com/production/letra_C_150px.mp4\",\"styles\":[{\"type\":\"word\",\"length\":57,\"position\":0,\"styleIds\":[]}]}",versionPropertyId:"21c57314-8d31-4610-a017-483d173502b9"},{label:"Use feed",name:"useFeed",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Feed",name:"dynamicContent",unit:"feed",value:"  1 1 loop  text",versionPropertyId:undefined},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"930c6530-40d5-4ebb-b09a-90f853e45bf0"},{label:"Feed index",name:"feedIndex",unit:"number",value:1,versionPropertyId:undefined},{label:"Static index",name:"staticIndex",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Autoplay",name:"autoplay",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Controls",name:"controls",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop",name:"loop",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithBanner",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Volume toggle button",name:"volumeToggleButton",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Volume",name:"volume",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button color",name:"volumeToggleButtonColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Volume button size",name:"volumeToggleButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button left",name:"volumeToggleButtonPositionLeft",unit:"number",value:5,versionPropertyId:undefined},{label:"Volume button top",name:"volumeToggleButtonPositionTop",unit:"number",value:5,versionPropertyId:undefined},{label:"Play/Pause button size",name:"playPauseButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Start time",name:"startTime",unit:"number",value:0,versionPropertyId:undefined},{label:"End time",name:"endTime",unit:"number",value:0,versionPropertyId:undefined},{label:"Preload image",name:"fallbackImage",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Poster",name:"poster",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Fill",name:"backgroundFill",unit:"select",value:"W3sidmFsdWUiOiJDb3ZlciIsInNlbGVjdGVkIjp0cnVlfSx7InZhbHVlIjoiQ29udGFpbiIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Playback rate",name:"playbackRate",unit:"select",value:"W3sidmFsdWUiOiIxIiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiIwLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMC41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjAuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIxLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMS41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjEuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIyIiwic2VsZWN0ZWQiOmZhbHNlfV0=",versionPropertyId:undefined},{label:"Gray Scale",name:"grayScale",unit:"number",value:0,versionPropertyId:undefined},{label:"Player background",name:"playerBackground",unit:"color",value:"rgba(0,0,0,0)",versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Round corners",name:"roundCorners",unit:"number",value:0,versionPropertyId:undefined}],},{kind:'widget',id:'e94961d2-01e5-48d8-bbc0-106afc0409ed',time:0,hidden:false,duration:6.93,animations:[{id:'f2320eef-4dff-4b77-b2e6-573930d8e5f8',name:'Animation',type:'keyframe',timingFunction:'easeInOutCubic',settings:{},keyframes:[{id:"7582b5fc-3f22-4f80-8848-eea3b53efd25",stateId:"f29efb35-52a5-4fb8-a095-4e90d83e8913",time:0,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"9000dadb-b3bb-452a-9976-52b83b05b3dd",stateId:"f5d5e986-842e-4c25-ba27-fe45dcad0385",time:0.8788246615769553,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"256babdf-c376-4a15-b333-0bdfe943ab1f",stateId:"165f5cce-6a2b-4711-bf33-8b02782d404d",time:1.5899788285109382,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"6e5891a0-3195-46ab-a857-c845725525f2",stateId:"cfd0ff0c-d5d3-4789-9484-84d28cb13df6",time:1.983137229742734,timingFunction:"easeInOutCubic",value:undefined,duration:0}]},],states:[{id:'f29efb35-52a5-4fb8-a095-4e90d83e8913',x:0,y:0,},{id:'f5d5e986-842e-4c25-ba27-fe45dcad0385',x:0,y:0,},{id:'165f5cce-6a2b-4711-bf33-8b02782d404d',x:0,y:-186,scaleX:0.6,scaleY:0.6,},{id:'cfd0ff0c-d5d3-4789-9484-84d28cb13df6',x:-22,y:-189,scaleX:0.6,scaleY:0.6,},],actions:[],x:714,y:436,width:75,height:74,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,html:"PGRpdiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGlkPSJpbnN0cnVjdGlvbnMiPgogICAgICAgICAgICA8c3Ryb25nPlZpZGVvIHBsYXllcjwvc3Ryb25nPjxicj5FbnRlciBhIFVSTCBpbiB0aGUgVVJMIHByb3BlcnR5IG9yIHNlbGVjdCBmZWVkIHdpdGggdmlkZW8gVVJMLgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InBsYXktcGF1c2Utb3ZlcmxheSIgY2xhc3M9InNob3ctcGxheSI+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9InBhdXNlIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjQwcHgiIGhlaWdodD0iNjQwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJMYXllcl8xIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjgwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4gCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9Ik01NDYuMjczLDkzLjcyNkM0ODUuODM0LDMzLjI4Niw0MDUuNDc2LDAsMzIwLDBDMjM0LjUyNSwwLDE1NC4xNjYsMzMuMjg2LDkzLjcyNiw5My43MjZTMCwyMzQuNTI1LDAsMzIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQzYwNi43MTQsNDg1LjgzNSw2NDAsNDA1LjQ3Niw2NDAsMzIwUzYwNi43MTQsMTU0LjE2Niw1NDYuMjczLDkzLjcyNnogTTMyMCw1ODJDMTc1LjUzMyw1ODIsNTgsNDY0LjQ2Nyw1OCwzMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNTgsMTc1LjUzMywxNzUuNTMzLDU4LDMyMCw1OGMxNDQuNDY3LDAsMjYyLDExNy41MzMsMjYyLDI2MkM1ODIsNDY0LjQ2Nyw0NjQuNDY3LDU4MiwzMjAsNTgyeiIgLz4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzPSIyNDMuMjg5LDMyMCAyNDMuMjg5LDE4OC42OTggMzU3LDI1NC4zNSA0NzAuNzExLDMyMCAzNTcsMzg1LjY1MSAyNDMuMjg5LDQ1MS4zMDIiIC8+CiAgICAgICAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjM3NSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzIiCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyBjbGFzcz0icGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjY0MHB4IiBoZWlnaHQ9IjY0MHB4IiB2aWV3Qm94PSIwIDAgNjQwIDY0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQwIDY0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iLTgwIgogICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iIzAwMDAwMCIKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iODAwIgogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNjA2LjcxNCw0ODUuODM1LDY0MCw0MDUuNDc2LDY0MCwzMjBTNjA2LjcxNCwxNTQuMTY2LDU0Ni4yNzMsOTMuNzI2eiBNMzIwLDU4MkMxNzUuNTMzLDU4Miw1OCw0NjQuNDY3LDU4LDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyIiAvPgogICAgICAgICAgICAgICAgICAgIDxnIGRpc3BsYXk9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSIzNzUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0iaW5saW5lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI1Mi40ODYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9IjE5Mi44NTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJpbmxpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMiIgCiAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIj48L2c+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InZpZGVvLWNvbnRyb2xzIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBsYXliYWNrIiBjbGFzcz0iaXNQYXVzZWQiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGF1c2UiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzEiPjxyZWN0IHg9Ii04MCIgeT0iLTgwIiBkaXNwbGF5PSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz48Zz48cmVjdCB4PSIzNzUiIHk9IjE5Mi44NTQiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI1Mi40ODYiIGhlaWdodD0iMjU0LjI5MSIvPjxyZWN0IHg9IjIxNSIgeT0iMTkyLjg1NCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+PHJlY3QgeD0iLTgwIiB5PSItODAiIGRpc3BsYXk9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyICIvPjxnIGRpc3BsYXk9Im5vbmUiPjxyZWN0IHg9IjM3NSIgeT0iMTkyLjg1NCIgZGlzcGxheT0iaW5saW5lIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTIuNDg2IiBoZWlnaHQ9IjI1NC4yOTEiLz48cmVjdCB4PSIyMTUiIHk9IjE5Mi44NTQiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJwcm9ncmVzcy10aW1lciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImJ1ZmZlckJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0idGltZUJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ2b2x1bWUtaWNvbiIgY2xhc3M9InVubXV0ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNNTMxIDQwNXYtMWMyNCAtMjcgMzYgLTU4IDM2IC05MHMtMTIgLTY0IC0zNiAtODljLTE1IC0xNSAtMzMgLTExIC00NCAxcy0xNiAzMCAtMSA0NWMyNSAyNCAyNSA2NCAwIDg4Yy0xNSAxNSAtMTAgMzMgMSA0NXMyOSAxNiA0NCAxek02MTkgNDkydi0zYzUxIC01MSA3NCAtMTEwIDc0IC0xNzhzLTIzIC0xMjcgLTc0IC0xNzggYy0xMyAtMTUgLTMyIC0xMSAtNDMgMHMtMTYgMzAgLTEgNDVjMzggMzkgNTUgODMgNTUgMTM0cy0xNyA5NSAtNTUgMTM0Yy0xNSAxNSAtMTAgMzQgMSA0NXMzMCAxNCA0MyAxek03MDkgNTc5djRjNzQgLTc4IDExMCAtMTY2IDExMCAtMjY4cy0zNiAtMTkwIC0xMTAgLTI2OGMtMTUgLTE1IC0zMyAtMTEgLTQ0IDBzLTE2IDMwIC0xIDQ1YzY0IDY0IDkzIDEzNyA5MyAyMjFzLTI5IDE1NyAtOTMgMjIxYy0xNSAxNSAtMTAgMzQgMSA0NSBzMjkgMTUgNDQgMHoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJtdXRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTg1MSA0MTBsLTk1IC05NWw5NSAtOTRsLTYzIC02M2wtOTUgOTRsLTk0IC05NGwtNjMgNjNsOTQgOTRsLTk0IDk1bDYzIDYzbDk0IC05NWw5NSA5NXoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUtY29udHJvbGxlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS12YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4iPgogICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDE3OTIgMTc5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0MTEgNTQxbC0zNTUgMzU1IDM1NSAzNTUgMTQ0LTE0NHEyOS0zMSA3MC0xNCAzOSAxNyAzOSA1OXY0NDhxMCAyNi0xOSA0NXQtNDUgMTloLTQ0OHEtNDIgMC01OS00MC0xNy0zOSAxNC02OWwxNDQtMTQ0LTM1NS0zNTUtMzU1IDM1NSAxNDQgMTQ0cTMxIDMwIDE0IDY5LTE3IDQwLTU5IDQwaC00NDhxLTI2IDAtNDUtMTl0LTE5LTQ1di00NDhxMC00MiA0MC01OSAzOS0xNyA2OSAxNGwxNDQgMTQ0IDM1NS0zNTUtMzU1LTM1NS0xNDQgMTQ0cS0xOSAxOS00NSAxOS0xMiAwLTI0LTUtNDAtMTctNDAtNTl2LTQ0OHEwLTI2IDE5LTQ1dDQ1LTE5aDQ0OHE0MiAwIDU5IDQwIDE3IDM5LTE0IDY5bC0xNDQgMTQ0IDM1NSAzNTUgMzU1LTM1NS0xNDQtMTQ0cS0zMS0zMC0xNC02OSAxNy00MCA1OS00MGg0NDhxMjYgMCA0NSAxOXQxOSA0NXY0NDhxMCA0Mi0zOSA1OS0xMyA1LTI1IDUtMjYgMC00NS0xOXoiIGZpbGw9IiNmZmYiLz4KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwb3N0ZXIiPjwvZGl2PgogICAgICAgIDxzcGFuIGlkPSJ2b2x1bWVUb2dnbGUiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0idW5tdXRlZCI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTUzMSA0MDV2LTFjMjQgLTI3IDM2IC01OCAzNiAtOTBzLTEyIC02NCAtMzYgLTg5Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMXMtMTYgMzAgLTEgNDVjMjUgMjQgMjUgNjQgMCA4OGMtMTUgMTUgLTEwIDMzIDEgNDVzMjkgMTYgNDQgMXpNNjE5IDQ5MnYtM2M1MSAtNTEgNzQgLTExMCA3NCAtMTc4cy0yMyAtMTI3IC03NCAtMTc4IGMtMTMgLTE1IC0zMiAtMTEgLTQzIDBzLTE2IDMwIC0xIDQ1YzM4IDM5IDU1IDgzIDU1IDEzNHMtMTcgOTUgLTU1IDEzNGMtMTUgMTUgLTEwIDM0IDEgNDVzMzAgMTQgNDMgMXpNNzA5IDU3OXY0Yzc0IC03OCAxMTAgLTE2NiAxMTAgLTI2OHMtMzYgLTE5MCAtMTEwIC0yNjhjLTE1IC0xNSAtMzMgLTExIC00NCAwcy0xNiAzMCAtMSA0NWM2NCA2NCA5MyAxMzcgOTMgMjIxcy0yOSAxNTcgLTkzIDIyMWMtMTUgMTUgLTEwIDM0IDEgNDUgczI5IDE1IDQ0IDB6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0ibXV0ZWQiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek04NTEgNDEwbC05NSAtOTVsOTUgLTk0bC02MyAtNjNsLTk1IDk0bC05NCAtOTRsLTYzIDYzbDk0IDk0bC05NCA5NWw2MyA2M2w5NCAtOTVsOTUgOTV6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8taG9sZGVyIj48L2Rpdj4KICAgIDwvZGl2Pg==",css:"KiB7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KaHRtbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQojY29udGFpbmVyIHsKICBvcGFjaXR5OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBmb250LWZhbWlseTogJ0hlbHZldGljYScsICdBcmlhbCcsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxNnB4Owp9Ci52aWRlby1ob2xkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogcG9pbnRlcjsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3ZlciB7CiAgd2lkdGg6IGF1dG87CiAgbGVmdDogNTAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyLXggewogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMTAwJTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3Zlci15IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KI3Bvc3RlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsKICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgei1pbmRleDogMTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwp9CiNwb3N0ZXIuY292ZXIgewogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmltYWdlR2VuZXJhdG9yTW9kZSAjcGxheS1wYXVzZS1vdmVybGF5LAouaW1hZ2VHZW5lcmF0b3JNb2RlICN2aWRlby1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNjb250YWluZXI6aG92ZXIgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNjb250YWluZXIuaXNQYXVzZWQgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgewogIGRpc3BsYXk6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAyOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAxOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5LnNob3cgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuaGlkZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wYXVzZSAucGF1c2UgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wbGF5IC5wbGF5IHsKICBkaXNwbGF5OiBibG9jazsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogNDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDAuNTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC41KTsKICBzdHJva2U6IHJnYmEoMCwwLDAsMC43KTsKICBzdHJva2Utd2lkdGg6IDFweDsKICBwYWRkaW5nOiAycHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgc3ZnICogewogIGZpbGw6IGluaGVyaXQ7Cn0KI3BsYXktcGF1c2Utb3ZlcmxheSBzdmc6aG92ZXIgewogIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKfQojdmlkZW8tY29udHJvbHMgewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41KTsKICBjb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwcHg7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKICBkaXNwbGF5OiBub25lOwogIHotaW5kZXg6IDM7Cn0KI3ZpZGVvLWNvbnRyb2xzLnNob3cgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7Cn0KI3ZpZGVvLWNvbnRyb2xzID5kaXY6bm90KCNwcm9ncmVzcykgewogIGZsb2F0OiBsZWZ0OwogIHdpZHRoOiAyNXB4OwogIGhlaWdodDogMzBweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQojdmlkZW8tY29udHJvbHMgPmRpdjpiZWZvcmUgewogIGNvbnRlbnQ6ICcnOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQojdmlkZW8tY29udHJvbHMgc3ZnIHsKICB3aWR0aDogMjVweDsKICBoZWlnaHQ6IDI1cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZpbGw6ICNmZmY7Cn0KI3BsYXliYWNrIHsKICB3aWR0aDogMzBweCAhaW1wb3J0YW50Owp9CiNwbGF5YmFjay5pc1BhdXNlZCAuaWNvbi1wbGF5IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KI3BsYXliYWNrLmlzUGxheWluZyAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CiNwbGF5YmFjayAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogbm9uZTsKfQojcGxheWJhY2sgLmljb24tcGxheSB7CiAgZGlzcGxheTogbm9uZTsKfQojcHJvZ3Jlc3MtYmFyIHsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7CiAgLW1zLWZsZXgtcGFjazogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtZmxleDogNTsKICAtbXMtZmxleC1wb3NpdGl2ZTogNTsKICBmbGV4LWdyb3c6IDU7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzLXRpbWVyIHsKICB3aWR0aDogODdweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxMXB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyBzcGFuIHsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3Byb2dyZXNzLWJhciAjcHJvZ3Jlc3MgI3RpbWVCYXIgewogIHotaW5kZXg6IDEwOwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuMXM7CiAgdHJhbnNpdGlvbjogd2lkdGggMC4xczsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyAjYnVmZmVyQmFyIHsKICB6LWluZGV4OiA1OwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKfQojdm9sdW1lIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtbXMtZmxleC1wb3NpdGl2ZTogMTsKICBmbGV4LWdyb3c6IDE7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LW9yaWVudDogaG9yaXpvbnRhbDsKICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsKICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdzsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIG1hcmdpbi1yaWdodDogNXB4Owp9CiN2b2x1bWUubW9iaWxlLXZvbHVtZSB7CiAgLXdlYmtpdC1ib3gtZmxleDogMDsKICAtbXMtZmxleC1wb3NpdGl2ZTogMDsKICBmbGV4LWdyb3c6IDA7Cn0KI3ZvbHVtZSAjdm9sdW1lLXZhbHVlIHsKICB6LWluZGV4OiAxMDsKICB3aWR0aDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7CiAgaGVpZ2h0OiAxMDAlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAwLjJzOwogIHRyYW5zaXRpb246IHdpZHRoIDAuMnM7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojdm9sdW1lICN2b2x1bWUtaWNvbiB7CiAgd2lkdGg6IDI1cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWNvbnRyb2xsZXIgewogIHdpZHRoOiA4MCU7CiAgaGVpZ2h0OiA3cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC40KTsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uIHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWljb24ubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lICN2b2x1bWUtaWNvbi51bm11dGVkIHN2Zy51bm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojZnVsbHNjcmVlbiB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQojZnVsbHNjcmVlbiBzdmcgewogIHdpZHRoOiAxNHB4OwogIG1hcmdpbi1yaWdodDogM3B4Owp9CiN2b2x1bWVUb2dnbGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA0OwogIHdpZHRoOiAxMCU7CiAgaGVpZ2h0OiAxMCU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CiN2b2x1bWVUb2dnbGUubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lVG9nZ2xlLnVubXV0ZWQgc3ZnLnVubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWVUb2dnbGUgc3ZnIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogbm9uZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgZmlsbDogI2ZmZjsKfQojdm9sdW1lVG9nZ2xlIHN2ZyAqIHsKICBmaWxsOiBpbmhlcml0Owp9CkBtZWRpYSAobWF4LXdpZHRoOiAyOTBweCkgewogICNwcm9ncmVzcy10aW1lciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KfQpAbWVkaWEgKG1heC13aWR0aDogMjAwcHgpIHsKICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1pY29uIHsKICAgIHdpZHRoOiBhdXRvOwogIH0KICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1jb250cm9sbGVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CiNpbnN0cnVjdGlvbnMgewogIGJhY2tncm91bmQ6ICMzNjM2MzY7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA5OTsKICBjb2xvcjogI2Y3ZjdmNzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdmVydGljYWwtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxNXB4OwogIGRpc3BsYXk6IG5vbmU7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOwogIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZm9udC1zaXplOiAwLjlyZW07Cn0KI2luc3RydWN0aW9ucyBzdHJvbmcgewogIGZvbnQtc2l6ZTogMS4xcmVtOwp9CiNpbnN0cnVjdGlvbnMuc2hvdyB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXN0YXJ0LXBsYXliYWNrLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQp2aWRlbzo6LWludGVybmFsLW1lZGlhLWNvbnRyb2xzLWRvd25sb2FkLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1lbmNsb3N1cmUgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KdmlkZW86Oi13ZWJraXQtbWVkaWEtY29udHJvbHMtcGFuZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgKyAzMHB4KTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqLwp9",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgfSk7DQp9Ow0KV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gdHJ1ZTsNCnZhciB2aWRlbzsNCnZhciBmaXJzdFBsYXlUaHJvdWdoID0gdHJ1ZTsNCnZhciB2aWRlb0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taG9sZGVyJyk7DQp2YXIgdmlkZW9TZXR0aW5ncyA9IHt9Ow0KdmFyIGhhc1N0b3BwZWQgPSBmYWxzZTsNCnZhciBtdXRlZFN0YXRlID0gdHJ1ZTsNCnZhciB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCnZhciBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zJyk7DQp2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOw0KdmFyIGZlZWQsIGZlZWRVcmwsIGZlZWRJdGVyYXRpb25JbmRleDsNCi8qDQoqKiBCYW5uZXJmbG93IGV2ZW50cw0KKi8NCmxldCBvbkxvYWRlZFByb21pc2VSZXNvbHZlcjsNCmlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgIFdpZGdldC5pc0xvYWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KICAgIH0pOw0KfQ0KdHJ5IHsNCiAgICBzZXRTZXR0aW5ncygpOw0KICAgIGNyZWF0ZVZpZGVvKCk7DQp9DQpjYXRjaCAoZSkgew0KICAgIC8vIGNvbnNvbGUuZXJyb3IoZS5zdGFjayk7IA0KfQ0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TZWVrLCB0aW1lID0+IHsNCiAgICAvLyBpZih2aWRlbyAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2NyZWF0aXZlJykgeyANCiAgICAvLyAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lICsgdGltZSAtIFdpZGdldC50aW1lKSk7DQogICAgLy8gfQ0KICAgIGlmICh2aWRlbykgew0KICAgICAgICB2aWRlby5zZWVrVG8oTWF0aC5hYnModmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgKyB0aW1lIC0gV2lkZ2V0LnRpbWUpKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGxheSwgdGltZSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbykgew0KICAgICAgICAgICAgdmlkZW8ucG9zdGVyLnN0eWxlLnNldFByb3BlcnR5KCJkaXNwbGF5IiwgIm5vbmUiLCAiaW1wb3J0YW50Iik7DQogICAgICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnICYmICh0aW1lID49IFdpZGdldC50aW1lICYmIHRpbWUgPCBXaWRnZXQuZHVyYXRpb24pKSB7DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsNCiAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LCAwKTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgdGltZSA9PiB7DQogICAgaWYgKHZpZGVvKSB7DQogICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHRpbWUgLSBXaWRnZXQudGltZSkpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuUmVzaXplLCAoKSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgdmlkZW8uc2V0RmlsbE9wdGlvbigpOw0KICAgICAgICB9DQogICAgfSwgMCk7DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5Qcm9wZXJ0eUNoYW5nZWQsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICB2aWRlb0VsZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gV2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzICsgJyUnOw0KICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRJbmRleCAtIDE7DQogICAgdHJ5IHsNCiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkICYmIFdpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmlkKSB7DQogICAgICAgICAgICBmZWVkID0geWllbGQgV2lkZ2V0LnByb3BlcnRpZXMuZHluYW1pY0NvbnRlbnQubG9hZCgpOw0KICAgICAgICAgICAgaWYgKGZlZWQgJiYgZmVlZC5kYXRhICYmIGZlZWQuZGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBmZWVkID0gZmVlZC5kYXRhOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChlKSB7IH0NCiAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJzsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICBmZWVkVXJsID0gZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0udmFsdWU7DQogICAgfQ0KICAgIGluc3RydWN0aW9ucy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgaWYgKCFXaWRnZXQucHJvcGVydGllcy51cmwgfHwgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgIWZlZWRVcmwpKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHVybCA9IFdpZGdldC5wcm9wZXJ0aWVzLnVybDsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHVybCA9IGZlZWRVcmw7DQogICAgfQ0KICAgIHNldFNldHRpbmdzKCk7DQogICAgaWYgKCF2aWRlbykgew0KICAgICAgICBjcmVhdGVWaWRlbygpOw0KICAgIH0NCiAgICBpZiAodXJsID09IHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS51cmwpIHsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICB9DQogICAgaWYgKHZpZGVvICYmIHVybCAhPT0gdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLnVybCkgew0KICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAodXJsKSk7DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQp9KSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuQW5pbWF0aW9uU3RhcnQsICgpID0+IHsNCiAgICBpZiAodmlkZW8gJiYgIWhhc1N0b3BwZWQpIHsNCiAgICAgICAgaWYgKHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS5hdXRvcGxheSkgew0KICAgICAgICAgICAgaWYgKGZpcnN0UGxheVRocm91Z2ggJiYgVGltZWxpbmUuaXNQbGF5aW5nKSB7DQogICAgICAgICAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLmxvb3BXaXRoQmFubmVyIHx8IGZpcnN0UGxheVRocm91Z2gpIHsNCiAgICAgICAgICAgICAgICAgICAgdmlkZW8uc2Vla1RvKFdpZGdldC5wcm9wZXJ0aWVzLnN0YXJ0VGltZSk7DQogICAgICAgICAgICAgICAgICAgIGZpcnN0UGxheVRocm91Z2ggPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgICAgICAgICBmaXJzdFBsYXlUaHJvdWdoID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSAmJiAhdmlkZW8udmlkZW8ucGF1c2VkKSB7DQogICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSkgew0KICAgICAgICAgICAgaWYgKFRpbWVsaW5lLmlzUGxheWluZykgew0KICAgICAgICAgICAgICAgIHZpZGVvLnNlZWtUbyhXaWRnZXQucHJvcGVydGllcy5zdGFydFRpbWUpOw0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdpbWFnZScpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKHZpZGVvICYmICF2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsNCiAgICAgICAgaWYgKFRpbWVsaW5lLmR1cmF0aW9uICE9PSBXaWRnZXQuZHVyYXRpb24pIHsNCiAgICAgICAgICAgIHZpZGVvLnRvZ2dsZU11dGUobXV0ZWRTdGF0ZSk7DQogICAgICAgIH0NCiAgICB9DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5BbmltYXRpb25FbmQsICgpID0+IHsNCiAgICBpZiAoVGltZWxpbmUuZHVyYXRpb24gIT09IFdpZGdldC5kdXJhdGlvbikgew0KICAgICAgICBtdXRlZFN0YXRlID0gdmlkZW8udmlkZW8ubXV0ZWQ7DQogICAgICAgIHZpZGVvLnRvZ2dsZU11dGUodHJ1ZSk7DQogICAgfQ0KICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMuc3RhdGljSW5kZXggJiYgV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCkgew0KICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleCArIDFdICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4ICsgMV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZEl0ZXJhdGlvbkluZGV4Kys7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBmZWVkSXRlcmF0aW9uSW5kZXggPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgZmVlZFVybCA9IGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XVtXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGRdLnZhbHVlOw0KICAgICAgICAgICAgc2V0U2V0dGluZ3MoKTsNCiAgICAgICAgICAgIHZpZGVvLmxvYWRWaWRlbyhzdHJpcChmZWVkVXJsKSk7DQogICAgICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuU2hvd1ByZWxvYWRJbWFnZSwgKCkgPT4gew0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJibG9jayIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgfQ0KICAgIH0sIDApOw0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50Lkxvb3AsICgpID0+IHsNCiAgICBpZiAoaGFzU3RvcHBlZCkgew0KICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkubG9vcFdpdGhCYW5uZXIgJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5KSB7DQogICAgICAgIC8vIHZpZGVvLnJlc3RhcnQoKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU3RvcCwgKCkgPT4gew0KICAgIGlmICh2aWRlbyAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuc3RvcFdpdGhDcmVhdGl2ZSkgew0KICAgICAgICB2aWRlby5zdG9wKCk7DQogICAgICAgIGhhc1N0b3BwZWQgPSB0cnVlOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgfQ0KfSk7DQpmdW5jdGlvbiBjcmVhdGVWaWRlbygpIHsNCiAgICBpZiAoIXZpZGVvKSB7DQogICAgICAgIHZpZGVvID0gbmV3IEJGVmlkZW8odmlkZW9FbGVtLCB2aWRlb1NldHRpbmdzLCBWaWRlb1RyYWNraW5nKTsNCiAgICB9DQp9DQpmdW5jdGlvbiBzZXRTZXR0aW5ncygpIHsNCiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIHNldHRpbmdzID0gV2lkZ2V0LnByb3BlcnRpZXM7DQogICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgdmlkZW9TZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgfQ0KICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoV2lkZ2V0LnByb3BlcnRpZXMudXJsKTsNCiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXNlRmVlZCAmJiBmZWVkVXJsKSB7DQogICAgICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoZmVlZFVybCk7DQogICAgfQ0KICAgIGxldCBwb3N0ZXI7DQogICAgbGV0IGZhbGxiYWNrSW1hZ2U7DQogICAgaWYgKHZpZGVvU2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgIHBvc3RlciA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLnBvc3Rlcik7DQogICAgfQ0KICAgIGlmICh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgZmFsbGJhY2tJbWFnZSA9IGdldE9wdGltYWxJbWFnZSh2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpOw0KICAgIH0NCiAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IHBvc3RlcjsNCiAgICB2aWRlb1NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgPSBmYWxsYmFja0ltYWdlOw0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJykgew0KICAgICAgICB2aWRlb1NldHRpbmdzLmNvbnRyb2xzID0gZmFsc2U7DQogICAgICAgIHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lID0gdmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgPD0gMSA/IDEgOiB2aWRlb1NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgdmlkZW9TZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOw0KICAgICAgICB2aWRlb1NldHRpbmdzLnBvc3RlciA9IG51bGw7DQogICAgfQ0KfQ0KZnVuY3Rpb24gZ2V0T3B0aW1hbEltYWdlKHNyYykgew0KICAgIHJldHVybiBXaWRnZXQuZ2V0T3B0aW1pemVkSW1hZ2VVcmwoc3JjLCB7IHdpZHRoOiBXaWRnZXQud2lkdGgsIGhlaWdodDogV2lkZ2V0LmhlaWdodCwgZml0T3B0aW9uOiBXaWRnZXQucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbC50b0xvd2VyQ2FzZSgpIH0pOw0KfQ0KZnVuY3Rpb24gc3RyaXAocykgew0KICAgIHZhciB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKTsNCiAgICB0bXAuaW5uZXJIVE1MID0gczsNCiAgICByZXR1cm4gdG1wLnRleHRDb250ZW50IHx8IHRtcC5pbm5lclRleHQgfHwgIiI7DQp9DQpmdW5jdGlvbiBjb3B5KGEpIHsNCiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7DQp9DQpmdW5jdGlvbiBCRlZpZGVvKGVsZW0sIG9wdGlvbnMsIFZpZGVvVHJhY2tpbmcpIHsNCiAgICB2YXIgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhvcHRpb25zKTsNCiAgICB2YXIgX3ZpZGVvOw0KICAgIHZhciBzZWxmID0gdGhpczsNCiAgICB2YXIgZWxCeUlkID0gZnVuY3Rpb24gKHNlbCkgew0KICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsKTsNCiAgICB9Ow0KICAgIHZhciBldmVudFF1ZXVlID0gW107DQogICAgdmFyIGRldmljZUluZm8gPSBnZXREZXZpY2VJbmZvKCk7DQogICAgdmFyIHBsYXlQcm9taXNlOw0KICAgIHZhciBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICB2YXIgdmlkZW9UcmFja2luZzsNCiAgICB2YXIgZGVmYXVsdFZpZGVvVHlwZXMgPSBbDQogICAgICAgIHsNCiAgICAgICAgICAgIGV4dGVuc2lvbjogJ21wNCcsDQogICAgICAgICAgICB0eXBlOiAndmlkZW8vbXA0Jw0KICAgICAgICB9DQogICAgXTsNCiAgICB2YXIgdG90YWxQbGF5dGltZTsNCiAgICB2YXIgdm9sdW1lID0gMDsNCiAgICB2YXIgaGFzUGxheWVkID0gZmFsc2U7DQogICAgdmFyIHJlYWR5U3RhdGUgPSAwOw0KICAgIHZhciBwbGF5ZXIgPSBlbEJ5SWQoJ3ZpZGVvLXBsYXllcicpOw0KICAgIHZhciB2aWRlb0NvbnRhaW5lciA9IGVsQnlJZCgnY29udGFpbmVyJyk7DQogICAgdmFyIHBsYXlQYXVzZU92ZXJsYXkgPSBlbEJ5SWQoJ3BsYXktcGF1c2Utb3ZlcmxheScpOw0KICAgIHZhciBwb3N0ZXIgPSBlbEJ5SWQoJ3Bvc3RlcicpOw0KICAgIC8vIEluaXRpYWxpemUgVmlkZW8gY29udHJvbHMNCiAgICB2YXIgdmlkZW9Db250cm9scyA9IGVsQnlJZCgndmlkZW8tY29udHJvbHMnKTsNCiAgICB2YXIgcGxheWJhY2sgPSBlbEJ5SWQoJ3BsYXliYWNrJyk7DQogICAgdmFyIHZvbHVtZUNvbnRhaW5lciA9IGVsQnlJZCgndm9sdW1lJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2wgPSBlbEJ5SWQoJ3ZvbHVtZS1jb250cm9sbGVyJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xWYWx1ZSA9IGVsQnlJZCgndm9sdW1lLXZhbHVlJyk7DQogICAgdmFyIHZvbHVtZUNvbnRyb2xUb2dnbGUgPSBlbEJ5SWQoJ3ZvbHVtZS1pY29uJyk7DQogICAgdmFyIHByb2dyZXNzID0gZWxCeUlkKCdwcm9ncmVzcycpOw0KICAgIHZhciB2aWRlb0R1cmF0aW9uID0gZWxCeUlkKCdwcm9ncmVzcy10aW1lcicpOw0KICAgIHZhciBmdWxsc2NyZWVuID0gZWxCeUlkKCdmdWxsc2NyZWVuJyk7DQogICAgdmFyIHRpbWVCYXIgPSBlbEJ5SWQoJ3RpbWVCYXInKTsNCiAgICBwbGF5YmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVG9nZ2xlUGxheVBhdXNlKTsNCiAgICB2b2x1bWVDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uVm9sdW1lRHJhZyk7DQogICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVm9sdW1lVG9nZ2xlKTsNCiAgICBwcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblRpbWVTZWVrRHJhZyk7DQogICAgZnVsbHNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUZ1bGxzY3JlZW4pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNvbnRyb2xzTW91c2VVcCk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Db250cm9sc01vdXNlRG93bik7DQogICAgdmFyIHZvbHVtZVRvZ2dsZUJ1dHRvbiA9IGVsQnlJZCgndm9sdW1lVG9nZ2xlJyk7DQogICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Wb2x1bWVUb2dnbGUpOw0KICAgIHRyeSB7DQogICAgICAgIGlmIChwbGF5ZXIpIHsNCiAgICAgICAgICAgIHBsYXllci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBsYXllcik7DQogICAgICAgICAgICBfdmlkZW8gPSBudWxsOw0KICAgICAgICB9DQogICAgICAgIGlmICghX3NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgX3NldHRpbmdzLnVybCA9ICcnOw0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1cmwuJyk7DQogICAgICAgIH0NCiAgICAgICAgLy8gU2V0IHBvc3RlciBiZWZvcmUgbG9hZGluZyB2aWRlbw0KICAgICAgICBpZiAoX3NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5wb3N0ZXIgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgJiYgZGV2aWNlSW5mby5pc01vYmlsZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvID0gY3JlYXRlVmlkZW9FbGVtZW50KF9zZXR0aW5ncy51cmwpOw0KICAgICAgICBlbGVtLmFwcGVuZENoaWxkKF92aWRlbyk7DQogICAgICAgIC8vIEltbWVkaWF0ZWx5IHNldCBmaWxsIG9wdGlvbiB0byBhdm9pZCByZXNpemluZyB0byBiZSBzZWVuDQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICAgICAgaWYgKEFkLnBhcmFtZXRlcnMuaXNPbW5pUmVuZGVyKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBvbk1ldGFMb2FkZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvblZpZGVvRW5kZWQpOw0KICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIG9uVmlkZW9QbGF5KTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgb25WaWRlb1BhdXNlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsIG9uVm9sdW1lQ2hhbmdlKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAvKg0KICAgICAgICAqIFdlIHVzZSBSQUYgaW5zdGVhZCBvZiBuYXRpdmUgdGltZXVwZGF0ZSBldmVudCBvbiB0aGUgbWVkaWEgQVBJIHRvDQogICAgICAgICogZ2V0IGEgbW9yZSBhY2N1cmF0ZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCB0aW1lIG9mIHRoZSB2aWRlbw0KICAgICAgICAqLw0KICAgICAgICBjb25zdCB3ID0gd2luZG93Ow0KICAgICAgICB2YXIgcmFmID0gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB3LnJlcXVlc3RBbmltYXRpb25GcmFtZQ0KICAgICAgICAgICAgICAgIHx8IHcud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgZnVuY3Rpb24gKGNiKSB7IHNldFRpbWVvdXQoY2IsIDEwMDAgLyAzMCk7IH07DQogICAgICAgIH0pKCk7DQogICAgICAgIGZ1bmN0aW9uIHRpbWVVcGRhdGUoKSB7DQogICAgICAgICAgICBvblRpbWVVcGRhdGVkKCk7DQogICAgICAgICAgICByYWYodGltZVVwZGF0ZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOw0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7DQogICAgfQ0KICAgIGNhdGNoIChlKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZS5zdGFjayk7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFVwZGF0ZXMgdmlkZW8ncyBzZXR0aW5ncw0KICAgICAqIE9ubHkgc2V0dGluZ3MgdGhhdCBhcmUgcGFzc2VkIGFyZSBjaGFuZ2VkLCByZXN0IHJlbWFpbiBwZXJzaXN0ZW50DQogICAgICogQHBhcmFtICB7fSBzZXR0aW5ncw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNldFZpZGVvU2V0dGluZ3Moc2V0dGluZ3MpIHsNCiAgICAgICAgLy8gTWVyZ2UgY3VycmVudCBzZXR0aW5ncyB3aXRoIHBvdGVudGlhbCBuZXcgc2V0dGluZ3MNCiAgICAgICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gc2V0dGluZ3MpIHsNCiAgICAgICAgICAgIF9zZXR0aW5nc1thdHRybmFtZV0gPSBzZXR0aW5nc1thdHRybmFtZV07DQogICAgICAgIH0NCiAgICAgICAgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhfc2V0dGluZ3MpOw0KICAgICAgICB2aWRlb1RyYWNraW5nID0gbmV3IFZpZGVvVHJhY2tpbmcoZ2V0VXJsTWV0YShfc2V0dGluZ3MudXJsKSk7DQogICAgICAgIHRvdGFsUGxheXRpbWUgPSAoX3NldHRpbmdzLnN0YXJ0VGltZSA+PSAxICYmIF9zZXR0aW5ncy5lbmRUaW1lID49IDEpDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5lbmRUaW1lIC0gX3NldHRpbmdzLnN0YXJ0VGltZQ0KICAgICAgICAgICAgOiBfdmlkZW8uZHVyYXRpb24gLSBfc2V0dGluZ3Muc3RhcnRUaW1lOw0KICAgICAgICBpZiAoX3NldHRpbmdzLmxvb3BXaXRoQmFubmVyKSB7DQogICAgICAgICAgICBpZiAoV2lkZ2V0LmR1cmF0aW9uID4gX3ZpZGVvLmR1cmF0aW9uKSB7DQogICAgICAgICAgICAgICAgdG90YWxQbGF5dGltZSA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRvdGFsUGxheXRpbWUgPSBXaWRnZXQuZHVyYXRpb247DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIE9ubHkgc2V0IGF1dG9wbGF5IHRvIHRydWUgaWYgdGhlIGRldmljZSBzdXBwb3J0cyBwbGF5c0lubGluZSBhdHRyaWJ1dGUgYW5kIGlzIG1vYmlsZSwNCiAgICAgICAgICogYXV0b3BsYXlpbmcgaXMgb3RoZXJ3aXNlIGhhbmRsZWQgZnJvbSBvbkNhblBsYXkgdG8gZW5zdXJlIHRoYXQgdGhlIHZpZGVvIGlzIHJlYWR5IGZvciBwbGF5YmFjay4NCiAgICAgICAgICogVGhpcyBpcyB0byBwcm9wZXJseSBzaG93L2hpZGUgdGhlIHBvc3RlciB3aGlsc3QgdmlkZW8gaXMgYnVmZmVyaW5nDQogICAgICAgICAqLw0KICAgICAgICBfdmlkZW8uYXV0b3BsYXkgPSBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZQ0KICAgICAgICAgICAgPyBfc2V0dGluZ3MuYXV0b3BsYXkNCiAgICAgICAgICAgIDogZmFsc2U7DQogICAgICAgIF92aWRlby5jb250cm9scyA9IGRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlDQogICAgICAgICAgICA/IF9zZXR0aW5ncy5jb250cm9scw0KICAgICAgICAgICAgOiBmYWxzZTsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgc2V0Vm9sdW1lKF9zZXR0aW5ncy52b2x1bWUpOw0KICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIGF1dG9wbGF5IGFuZCB0aGVyZSdzIHZvbHVtZSB0aGVyZSdzIG5vIHBvaW50IGluIG11dGluZyB0aGUgdmlkZW8gYnkgZGVmYXVsdA0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3Mudm9sdW1lKSB7DQogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8ucGxheWJhY2tSYXRlID0gX3NldHRpbmdzLnBsYXliYWNrUmF0ZTsNCiAgICAgICAgLy8gVXBkYXRlIHBvc3RlciBpZiBjaGFuZ2VkDQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2ltYWdlJyAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLnBvc3RlciArICcpJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIH0NCiAgICAgICAgdXBkYXRlRE9NKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFByb3BlclVybCh1cmwpIHsNCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyhcclxufFxufFxyfFxzKS9nbSwgIiIpOw0KICAgICAgICBsZXQgdXJscyA9IHVybC5zcGxpdCgnLCcpOw0KICAgICAgICBpZiAoKHVybHMubGVuZ3RoID09PSAyICYmICF1cmwubWF0Y2goL1wuKHdlYm18bW92KS8pKSB8fCB1cmxzLmxlbmd0aCA+IDIpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh1cmxzLmxlbmd0aCA9PT0gMSAmJiAhdXJsLm1hdGNoKCcubXA0JykpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodXJscy5sZW5ndGggPT09IDIpIHsNCiAgICAgICAgICAgIGlmIChnZXREZXZpY2VJbmZvKCkuaXNTYWZhcmkpIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmxzWzBdLm1hdGNoKCcubW92JykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHVybCA9IHVybHNbMF0ubWF0Y2goJy53ZWJtJykgPyB1cmxzWzBdIDogdXJsc1sxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpbnN0cnVjdGlvbnMuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICByZXR1cm4gdXJsOw0KICAgIH0NCiAgICBmdW5jdGlvbiBjcmVhdGVWaWRlb0VsZW1lbnQodXJsKSB7DQogICAgICAgIHVybCA9IGdldFByb3BlclVybCh1cmwpOw0KICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHZhciB1ID0gZ2V0VXJsTWV0YSh1cmwpOw0KICAgICAgICBjb25zdCB2aWRlb1R5cGUgPSBnZXRWaWRlb1R5cGVBbmRVcGRhdGVTb3VyY2VVcmwodSk7DQogICAgICAgIHZhciB1cmxTcmMgPSB1LnNvdXJjZVVybDsNCiAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gdS5wYXJhbXM7DQogICAgICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgIHZpZGVvLmlkID0gJ3ZpZGVvLXBsYXllcic7DQogICAgICAgIHZpZGVvLnByZWxvYWQgPSAnbWV0YWRhdGEnOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpOw0KICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICcnKTsNCiAgICAgICAgLy8gTXV0ZWQgaXMgc2V0IGhlcmUgaW5zdGVhZCBvZiBzZXRWaWRlb1NldHRpbmcgdG8gcHJldmVudCBpdCB0byBiZSBtdXRlZCB3aGVuIG5vdCB3YW50ZWQNCiAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlOw0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpIGluIHZpZGVvVHlwZSkgew0KICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW2ldLmV4dGVuc2lvbiArIHF1ZXJ5UGFyYW1zOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoInR5cGUiLCB2aWRlb1R5cGVbaV0udHlwZSk7DQogICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmlkZW87DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KSB7DQogICAgICAgIGxldCB2aWRlb1R5cGU7DQogICAgICAgIGlmICh1LmV4dC5tYXRjaCgvKHdlYm18bW92KS8pKSB7DQogICAgICAgICAgICBpZiAoZ2V0RGV2aWNlSW5mbygpLmlzU2FmYXJpKSB7DQogICAgICAgICAgICAgICAgdmlkZW9UeXBlID0gW3sNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogJ21vdicsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vcXVpY2t0aW1lJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZpZGVvVHlwZSA9IFt7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246ICd3ZWJtJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJw0KICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB2aWRlb1R5cGU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZpZGVvVHlwZXM7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdXBkYXRlRE9NKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIWRldmljZUluZm8uY2FuUGxheUlubGluZSAmJiBkZXZpY2VJbmZvLmlzTW9iaWxlKSB7DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3RhcnRUaW1lID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdtb2JpbGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5jb250cm9scyAmJiAhX3NldHRpbmdzLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ICE9PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICB9DQogICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsNCiAgICAgICAgfQ0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzBdLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnBsYXlQYXVzZUJ1dHRvblNpemUgKyAnJSc7DQogICAgICAgIHBsYXlQYXVzZU92ZXJsYXkucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUud2lkdGggPSBfc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSArICclJzsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5jb250cm9scyAmJiAhZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgdmlkZW9Db250cm9scy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2aWRlb0NvbnRyb2xzLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gX3NldHRpbmdzLnBsYXllckJhY2tncm91bmQ7DQogICAgICAgIF92aWRlby5zdHlsZS5maWx0ZXIgPSAnZ3JheXNjYWxlKCcgKyBfc2V0dGluZ3MuZ3JheVNjYWxlICsgJyUpJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLnRvcCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCArICclJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLmxlZnQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ICsgJyUnOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uc3R5bGUud2lkdGggPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5xdWVyeVNlbGVjdG9yQWxsKCdzdmcnKVswXS5zdHlsZS5maWxsID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbkNvbG9yOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24ucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMV0uc3R5bGUuZmlsbCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSArPSAiaW1hZ2VHZW5lcmF0b3JNb2RlIjsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwwLDAsMCknOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHNldEZpbGxPcHRpb24oKTsNCiAgICB9DQogICAgZnVuY3Rpb24gc2V0RmlsbE9wdGlvbigpIHsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5iYWNrZ3JvdW5kRmlsbCA9PT0gJ0NvdmVyJykgew0KICAgICAgICAgICAgcG9zdGVyLmNsYXNzTmFtZSA9ICdjb3Zlcic7DQogICAgICAgICAgICAoX3ZpZGVvLnZpZGVvSGVpZ2h0IC8gX3ZpZGVvLnZpZGVvV2lkdGgpIDw9ICh2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyB2aWRlb0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCkNCiAgICAgICAgICAgICAgICA/IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteCcNCiAgICAgICAgICAgICAgICA6IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteSc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwb3N0ZXIuY2xhc3NOYW1lID0gJyc7DQogICAgICAgICAgICBfdmlkZW8uY2xhc3NOYW1lID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5wb3N0ZXIpIHsNCiAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHJlc3RhcnRWaWRlbygpIHsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgLy8gaWYoX3NldHRpbmdzLmxvb3Apew0KICAgICAgICBwbGF5VmlkZW8oKTsNCiAgICAgICAgLy8gfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRSZWFkeVN0YXRlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnJlYWR5U3RhdGUgPiByZWFkeVN0YXRlKSB7DQogICAgICAgICAgICByZWFkeVN0YXRlID0gX3ZpZGVvLnJlYWR5U3RhdGU7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gcGxheVZpZGVvKGZvcmNlUGxheSkgew0KICAgICAgICAvKg0KICAgICAgICAgKiBDaGVjayBpZiB0aGUgdmlkZW8gaXMgcGxheWFibGUsIG90aGVyd2lzZSBhZGQgaXQgdG8gdGhlIGV2ZW50UXVldWUgd2hpY2gNCiAgICAgICAgICogdHJpZ2dlcnMgcGxheSBvbiBvbkNhblBsYXkgd2hpY2ggaXMgd2hlbiB2aWRlbyBpcyBwbGF5YWJsZQ0KICAgICAgICAgKi8NCiAgICAgICAgc2V0UmVhZHlTdGF0ZSgpOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkgfHwgaGFzUGxheWVkKSB7DQogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDE1MCk7DQogICAgICAgIGlmICgocmVhZHlTdGF0ZSA+PSAzICYmIF9zZXR0aW5ncy5hdXRvcGxheSkgfHwgaGFzUGxheWVkIHx8IGZvcmNlUGxheSkgew0KICAgICAgICAgICAgaWYgKF92aWRlby52b2x1bWUgPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSBfdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGRldmljZUluZm8uaXNNb2JpbGUgJiYgIWRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycgJiYgX3NldHRpbmdzLnBvc3RlciA/ICdibG9jaycgOiAnbm9uZSc7DQogICAgICAgICAgICAgICAgLy8gX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiBfc2V0dGluZ3MucG9zdGVyID8gJ25vbmUnIDogJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmNvbnRyb2xzICYmICFfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGV2ZW50UXVldWUucHVzaCgncGxheScpOw0KICAgICAgICAgICAgaWYgKHZpZGVvVHJhY2tpbmcpIHsNCiAgICAgICAgICAgICAgICB2aWRlb1RyYWNraW5nLnN0YXJ0ZWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZWVrVG8ocykgew0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IHM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHBhdXNlVmlkZW8oKSB7DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkICYmICFwZW5kaW5nUGF1c2UpIHsNCiAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkDQogICAgICAgICAgICBfdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgfQ0KICAgICAgICBwZW5kaW5nUGF1c2UgPSB0cnVlOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzdG9wVmlkZW8oKSB7DQogICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldFZvbHVtZSh2b2x1bWUpIHsNCiAgICAgICAgX3ZpZGVvLnZvbHVtZSA9IGRldmljZUluZm8uaXNNb2JpbGUgPyAwIDogdG9GcmFjdGlvbnModm9sdW1lKTsNCiAgICAgICAgLy8gQmFubmVyRmxvdy5yYWlzZUV2ZW50KCd2b2x1bWVDaGFuZ2VkJywgX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvZ2dsZU11dGUobXV0ZSkgew0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIF92aWRlby5tdXRlZCA9ICh0eXBlb2YgbXV0ZSA9PT0gJ2Jvb2xlYW4nKSA/IG11dGUgOiAhX3ZpZGVvLm11dGVkOw0KICAgICAgICAvLyBCYW5uZXJGbG93LnJhaXNlRXZlbnQoJ3ZvbHVtZUNoYW5nZWQnLCBfdmlkZW8ubXV0ZWQgPyAwIDogX3ZpZGVvLnZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGxvYWRWaWRlbyh1cmwpIHsNCiAgICAgICAgdXJsID0gZ2V0UHJvcGVyVXJsKHVybCk7DQogICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdXJsID0gZ2V0QWRqdXN0ZWRVcmwodXJsKTsNCiAgICAgICAgdmFyIHUgPSBnZXRVcmxNZXRhKHVybCk7DQogICAgICAgIGNvbnN0IHZpZGVvVHlwZSA9IGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KTsNCiAgICAgICAgdmFyIHVybFNyYyA9IHUuc291cmNlVXJsOw0KICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB1LnBhcmFtczsNCiAgICAgICAgLy8gVXBkYXRlIHNvdXJjZXMNCiAgICAgICAgZm9yICh2YXIgdnQgaW4gdmlkZW9UeXBlKSB7DQogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NvdXJjZScpW3Z0XTsNCiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW3Z0XS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgY3VycmVudFZvbHVtZSA9IF92aWRlby52b2x1bWU7DQogICAgICAgIF92aWRlby5sb2FkKCk7DQogICAgICAgIGlmIChfc2V0dGluZ3MuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGF1c2VWaWRlbygpOw0KICAgICAgICB9DQogICAgICAgIHNldFZpZGVvU2V0dGluZ3MoeyB1cmw6IHVybCB9KTsNCiAgICAgICAgc2V0Vm9sdW1lKGN1cnJlbnRWb2x1bWUpOw0KICAgIH0NCiAgICBmdW5jdGlvbiB0b2dnbGVQbGF5UGF1c2VCdXR0b24oKSB7DQogICAgICAgIGlmIChfdmlkZW8ucGF1c2VkKSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wbGF5Jyk7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3ctcGF1c2UnKTsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5wYXVzZWQgfHwgX3ZpZGVvLmVuZGVkKSB7DQogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gZ2V0VXJsTWV0YSh1cmwpIHsNCiAgICAgICAgdmFyIG8gPSB7fTsNCiAgICAgICAgLy8gaWYoIXZhbGlkYXRlVXJsKHVybCkpew0KICAgICAgICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWQgbm90IHJlY2VpdmUgYSB2YWxpZCBVUkwuJyk7DQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKHVybCAmJiB1cmwubGVuZ3RoKSB7DQogICAgICAgICAgICBvLnVybCA9IHVybC5zcGxpdCgnPycpWzBdOw0KICAgICAgICAgICAgby5zb3VyY2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXS5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCIuIikpOw0KICAgICAgICAgICAgby5wYXJhbXMgPSB1cmwuaW5kZXhPZignPycpICE9IC0xID8gJz8nICsgdXJsLnNwbGl0KCc/JylbMV0gOiAnJzsNCiAgICAgICAgICAgIG8uZXh0ID0gdXJsLnNwbGl0KCc/JylbMF0uc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZigiLiIpICsgMSkgfHwgJyc7DQogICAgICAgICAgICBvLmZpbGVuYW1lID0gdXJsLm1hdGNoKC8oW14vXSskKS8sICcnKVswXS5zcGxpdCgnPycpWzBdOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBvOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV2ZW50IGhhbmRsZXJzDQogICAgKi8NCiAgICBmdW5jdGlvbiBvbk1ldGFMb2FkZWQoKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIF9zZXR0aW5ncy5zdGFydFRpbWUgPSBfc2V0dGluZ3Muc3RhcnRUaW1lIDw9IF92aWRlby5kdXJhdGlvbiA/IF9zZXR0aW5ncy5zdGFydFRpbWUgOiAwOw0KICAgICAgICBzZXRWaWRlb1NldHRpbmdzKF9zZXR0aW5ncyk7DQogICAgICAgIHRpbWVVcGRhdGUoKTsNCiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gb25DYW5QbGF5KCkgew0KICAgICAgICBlbEJ5SWQoJ2luc3RydWN0aW9ucycpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgLy8gaWYoIWhhc1BsYXllZCAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2NyZWF0aXZlJykgew0KICAgICAgICAvLyAgICAgVGltZWxpbmUucmVzdGFydCgpOw0KICAgICAgICAvLyB9DQogICAgICAgIGlmIChvbkxvYWRlZFByb21pc2VSZXNvbHZlcikgew0KICAgICAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIoKTsNCiAgICAgICAgfQ0KICAgICAgICBzZXRSZWFkeVN0YXRlKCk7DQogICAgICAgIGZvciAodmFyIGkgaW4gZXZlbnRRdWV1ZSkgew0KICAgICAgICAgICAgX3ZpZGVvW2V2ZW50UXVldWVbaV1dKCk7DQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOw0KICAgICAgICAgICAgaWYgKGV2ZW50UXVldWVbaV0gPT09ICdwbGF5JyAmJiBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlUGxheVBhdXNlQnV0dG9uKCk7DQogICAgICAgIGlmIChyZWFkeVN0YXRlID49IDMgfHwgIV92aWRlby5wYXVzZWQpIHsNCiAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVVcGRhdGVkKCkgew0KICAgICAgICBpZiAoIV92aWRlbykgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICghdGltZUJhci5zdHlsZS53aWR0aCkgew0KICAgICAgICAgICAgdGltZUJhci5zdHlsZS53aWR0aCA9IF92aWRlby5kdXJhdGlvbiArICclJzsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZCgoX3ZpZGVvLmN1cnJlbnRUaW1lIC8gX3ZpZGVvLmR1cmF0aW9uKSAqIDEwMCkgKyAnJSc7DQogICAgICAgIGlmICh2aWRlb0R1cmF0aW9uLmlubmVySFRNTC5zcGxpdCgnLycpWzBdLnRyaW0oKSAhPT0gZm9ybWF0VGltZShfdmlkZW8uY3VycmVudFRpbWUpKSB7DQogICAgICAgICAgICB2aWRlb0R1cmF0aW9uLmlubmVySFRNTCA9IGZvcm1hdFRpbWUoX3ZpZGVvLmN1cnJlbnRUaW1lKSArICcgLyAnICsgZm9ybWF0VGltZShfdmlkZW8uZHVyYXRpb24pOw0KICAgICAgICB9DQogICAgICAgIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuOTUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC45NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuY29tcGxldGVkKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gQ2hlY2sgaWYgcmVhY2hlZCB0aGlyZCBxdWFydGlsZSAoNzUlKQ0KICAgICAgICBlbHNlIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuNzUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC43NSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcudHEoKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBDaGVjayBpZiByZWFjaGVkIG1pZHBvaW50ICg1MCUpDQogICAgICAgIGVsc2UgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC41MCAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjUwICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgdmlkZW9UcmFja2luZy5tcCgpOw0KICAgICAgICB9DQogICAgICAgIC8vIENoZWNrIGlmIHJlYWNoZWQgZmlyc3QgcXVhcnRpbGUgKDI1JSkNCiAgICAgICAgZWxzZSBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49IHRvdGFsUGxheXRpbWUgKiAwLjI1IC0gMSAmJiBfdmlkZW8uY3VycmVudFRpbWUgPD0gdG90YWxQbGF5dGltZSAqIDAuMjUgKyAxICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7DQogICAgICAgICAgICB2aWRlb1RyYWNraW5nLmZxKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSAoKF9zZXR0aW5ncy5lbmRUaW1lICYmIF9zZXR0aW5ncy5lbmRUaW1lIDwgX3ZpZGVvLmR1cmF0aW9uKSA/IF9zZXR0aW5ncy5lbmRUaW1lIDogX3ZpZGVvLmR1cmF0aW9uKSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgb25WaWRlb0VuZGVkKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25WaWRlb0VuZGVkKCkgew0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5sb29wKSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICByZXN0YXJ0VmlkZW8oKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGxheSgpIHsNCiAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvUGF1c2UoKSB7DQogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZvbHVtZUNoYW5nZSgpIHsNCiAgICAgICAgdm9sdW1lQ29udHJvbFZhbHVlLnN0eWxlLndpZHRoID0gIV92aWRlby5tdXRlZCA/IF92aWRlby52b2x1bWUgKiAxMDAgKyAnJScgOiAnMCc7DQogICAgICAgIGlmIChfdmlkZW8udm9sdW1lID09PSAwIHx8IF92aWRlby5tdXRlZCkgew0KICAgICAgICAgICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5jbGFzc05hbWUgPSAnbXV0ZWQnOw0KICAgICAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9ICdtdXRlZCc7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2b2x1bWVDb250cm9sVG9nZ2xlLmNsYXNzTmFtZSA9ICd1bm11dGVkJzsNCiAgICAgICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSAndW5tdXRlZCc7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25DbGljayhldmVudCkgew0KICAgICAgICB2YXIgY2xpY2tPblBsYXlQYXVzZUJ1dHRvbiA9IGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldDsNCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBjbGlja09uUGxheVBhdXNlQnV0dG9uKSB7DQogICAgICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCkgew0KICAgICAgICAgICAgICAgIHRvZ2dsZU11dGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIHBsYXlWaWRlbyh0cnVlKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgQ3JlYXRpdmUub3BlbihldmVudCwgdW5kZWZpbmVkKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKg0KICAgICoqIFZpZGVvIGNvbnRyb2xzDQogICAgKi8NCiAgICB2YXIgdm9sdW1lRHJhZyA9IGZhbHNlOw0KICAgIHZhciB0aW1lRHJhZyA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIG9uVG9nZ2xlUGxheVBhdXNlKCkgew0KICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCB8fCBfdmlkZW8uZW5kZWQpIHsNCiAgICAgICAgICAgIHBsYXlWaWRlbygpOw0KICAgICAgICAgICAgdXNlckluaXRpYXRlZFBhdXNlID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB2b2x1bWVEcmFnID0gdHJ1ZTsNCiAgICAgICAgdXBkYXRlVm9sdW1lKGUucGFnZVgpOw0KICAgIH0NCiAgICA7DQogICAgZnVuY3Rpb24gdXBkYXRlVm9sdW1lKHgpIHsNCiAgICAgICAgdmFyIG1heFZvbHVtZSA9IDE7DQogICAgICAgIHZhciBwb3NpdGlvbiA9IHggLSB2b2x1bWVDb250YWluZXIub2Zmc2V0TGVmdCAtIHZvbHVtZUNvbnRyb2wub2Zmc2V0TGVmdCAtIDI7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyB2b2x1bWVDb250cm9sLm9mZnNldFdpZHRoOw0KICAgICAgICBpZiAocGVyY2VudGFnZSA+IDEwMCkgew0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IDEwMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocGVyY2VudGFnZSA8IDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAwOw0KICAgICAgICB9DQogICAgICAgIHNldFZvbHVtZShtYXhWb2x1bWUgKiBwZXJjZW50YWdlIC8gMTAwKTsNCiAgICAgICAgdm9sdW1lID0gX3ZpZGVvLnZvbHVtZTsNCiAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgIG9uVm9sdW1lQ2hhbmdlKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lVG9nZ2xlKCkgew0KICAgICAgICBfdmlkZW8ubXV0ZWQgPSAhX3ZpZGVvLm11dGVkOw0KICAgICAgICBvblZvbHVtZUNoYW5nZSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvblRpbWVTZWVrRHJhZyhlKSB7DQogICAgICAgIGlmIChlLmJ1dHRvbiAhPSAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB0aW1lRHJhZyA9IHRydWU7DQogICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNvbnRyb2xzTW91c2VVcChlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB2b2x1bWVEcmFnID0gZmFsc2U7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB0aW1lRHJhZyA9IGZhbHNlOw0KICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3NiYXIoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25Db250cm9sc01vdXNlRG93bihlKSB7DQogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRpbWVEcmFnKSB7DQogICAgICAgICAgICB1cGRhdGVQcm9ncmVzc2JhcihlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzc2Jhcih4KSB7DQogICAgICAgIHZhciBtYXhkdXJhdGlvbiA9IF92aWRlby5kdXJhdGlvbjsNCiAgICAgICAgdmFyIHBvc2l0aW9uID0geCAtIHByb2dyZXNzLm9mZnNldExlZnQ7DQogICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICogcG9zaXRpb24gLyBwcm9ncmVzcy5vZmZzZXRXaWR0aDsNCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPiAxMDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAxMDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPCAwKSB7DQogICAgICAgICAgICBwZXJjZW50YWdlID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gcGVyY2VudGFnZSArICclJzsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gbWF4ZHVyYXRpb24gKiBwZXJjZW50YWdlIC8gMTAwOw0KICAgIH0NCiAgICBjb25zdCBkb2MgPSBkb2N1bWVudDsNCiAgICAvLyBGdWxsc2NyZWVuDQogICAgdmFyIGZ1bGxTY3JlZW5FbmFibGVkID0gISEoZG9jLmZ1bGxzY3JlZW5FbmFibGVkDQogICAgICAgIHx8IGRvYy5tb3pGdWxsU2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2MubXNGdWxsc2NyZWVuRW5hYmxlZA0KICAgICAgICB8fCBkb2Mud2Via2l0U3VwcG9ydHNGdWxsc2NyZWVuDQogICAgICAgIHx8IGRvYy53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCk7DQogICAgaWYgKCFmdWxsU2NyZWVuRW5hYmxlZCkgew0KICAgICAgICBmdWxsc2NyZWVuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGhhbmRsZUZ1bGxzY3JlZW4oKSB7DQogICAgICAgIGlmIChpc0Z1bGxTY3JlZW4oKSkgew0KICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmIChkb2MubW96Q2FuY2VsRnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICBkb2MubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4pDQogICAgICAgICAgICAgICAgZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGRvYy5tc0V4aXRGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvYy5tc0V4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YShmYWxzZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZiAodmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4pDQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKQ0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmICh2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmlkZW9Db250YWluZXIubXNSZXF1ZXN0RnVsbHNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSh0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0Z1bGxTY3JlZW4oKSB7DQogICAgICAgIHJldHVybiAhIShkb2MuZnVsbFNjcmVlbiB8fCBkb2Mud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvYy5tb3pGdWxsU2NyZWVuIHx8IGRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldEZ1bGxzY3JlZW5EYXRhKHN0YXRlKSB7DQogICAgICAgIHZpZGVvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1mdWxsc2NyZWVuJywgJycgKyAhIXN0YXRlKTsNCiAgICAgICAgc3RhdGUgPyB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmdWxsc2NyZWVuJykgOiB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7DQogICAgfQ0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhKGRvYy5mdWxsU2NyZWVuIHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCkpOw0KICAgIH0pOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhZG9jLndlYmtpdElzRnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISFkb2MubW96RnVsbFNjcmVlbik7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSghIWRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCiAgICB9KTsNCiAgICAvKg0KICAgICoqIFV0aWxzDQogICAgKi8NCiAgICBmdW5jdGlvbiBnZXREZXZpY2VJbmZvKCkgew0KICAgICAgICB2YXIgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xTYW1zdW5nQnJvd3NlcnxpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgICAgIHZhciBpc0FuZHJvaWQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImFuZHJvaWQiKSA+IC0xOw0KICAgICAgICB2YXIgaXNTYW1zdW5nQnJvd3NlciA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhbXN1bmdCcm93c2VyL2kpIHx8IGZhbHNlOw0KICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOw0KICAgICAgICB2YXIgaXNJb3MgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NU1N0cmVhbSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG1hdGNoID0gKG5hdmlnYXRvci5hcHBWZXJzaW9uKS5tYXRjaCgvT1MgKFxkKylfKFxkKylfPyhcZCspPy8pLCB2ZXJzaW9uOw0KICAgICAgICAgICAgaWYgKG1hdGNoICE9PSB1bmRlZmluZWQgJiYgbWF0Y2ggIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gWw0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsxXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsyXSwgMTApLA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFszXSB8fCAwLCAxMCkNCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZlcnNpb24uam9pbignLicpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KSgpOw0KICAgICAgICB2YXIgY2FuUGxheUlubGluZSA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgICAgICB2Lm11dGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHYucGxheSgpOw0KICAgICAgICAgICAgcmV0dXJuICF2LnBhdXNlZCB8fCAoJ3BsYXlzSW5saW5lJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpKTsNCiAgICAgICAgfSkoKTsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlzTW9iaWxlOiBpc01vYmlsZSwNCiAgICAgICAgICAgIGlzQW5kcm9pZDogaXNBbmRyb2lkLA0KICAgICAgICAgICAgaXNTYW1zdW5nQnJvd3NlcjogaXNTYW1zdW5nQnJvd3NlciwNCiAgICAgICAgICAgIGlzU2FmYXJpOiBpc1NhZmFyaSwNCiAgICAgICAgICAgIGlzSW9zOiBpc0lvcywNCiAgICAgICAgICAgIGNhblBsYXlJbmxpbmU6IGNhblBsYXlJbmxpbmUNCiAgICAgICAgfTsNCiAgICB9DQogICAgZnVuY3Rpb24gZGVzZXJpYWxpemVTZXR0aW5ncyhzZXR0aW5ncykgew0KICAgICAgICB2YXIgcyA9IHt9Ow0KICAgICAgICAvLyBWaWRlbyBzZXR0aW5ncy9wcm9wZXJ0aWVzDQogICAgICAgIHMudXJsID0gc2V0dGluZ3MudXJsOw0KICAgICAgICBzLmF1dG9wbGF5ID0gc2V0dGluZ3MuYXV0b3BsYXk7DQogICAgICAgIHMubG9vcCA9IHNldHRpbmdzLmxvb3A7DQogICAgICAgIHMuY29udHJvbHMgPSBzZXR0aW5ncy5jb250cm9sczsNCiAgICAgICAgcy52b2x1bWUgPSBzZXR0aW5ncy52b2x1bWUgfHwgMDsNCiAgICAgICAgcy5zdGFydFRpbWUgPSBzZXR0aW5ncy5zdGFydFRpbWUgfHwgMDsNCiAgICAgICAgcy5lbmRUaW1lID0gc2V0dGluZ3MuZW5kVGltZTsNCiAgICAgICAgcy5wbGF5YmFja1JhdGUgPSAocGFyc2VGbG9hdChzZXR0aW5ncy5wbGF5YmFja1JhdGUpIHx8IDEpOw0KICAgICAgICBzLnBvc3RlciA9IGdldEFkanVzdGVkVXJsKHNldHRpbmdzLnBvc3RlciB8fCAnJyk7DQogICAgICAgIC8vIFNwZWNpYWwgc2V0dGluZ3MNCiAgICAgICAgcy5wbGF5ZXJCYWNrZ3JvdW5kID0gc2V0dGluZ3MucGxheWVyQmFja2dyb3VuZDsNCiAgICAgICAgcy5ncmF5U2NhbGUgPSBzZXR0aW5ncy5ncmF5U2NhbGU7DQogICAgICAgIHMubG9vcFdpdGhCYW5uZXIgPSBzZXR0aW5ncy5sb29wV2l0aEJhbm5lcjsNCiAgICAgICAgcy5zdG9wV2l0aENyZWF0aXZlID0gc2V0dGluZ3Muc3RvcFdpdGhDcmVhdGl2ZTsNCiAgICAgICAgcy5iYWNrZ3JvdW5kRmlsbCA9IHNldHRpbmdzLmJhY2tncm91bmRGaWxsOw0KICAgICAgICBzLmZhbGxiYWNrSW1hZ2UgPSBnZXRBZGp1c3RlZFVybChzZXR0aW5ncy5mYWxsYmFja0ltYWdlIHx8ICcnKTsNCiAgICAgICAgcy5wbGF5UGF1c2VCdXR0b25TaXplID0gc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSB8fCA0MDsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b24gPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b247DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemU7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3IgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uVG9wIHx8IDA7DQogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0ID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25MZWZ0IHx8IDA7DQogICAgICAgIHJldHVybiBzOw0KICAgIH0NCiAgICBmdW5jdGlvbiBpc0luTG9jYWxFbnZpcm9ubWVudCgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmICghd2luZG93KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHdpbmRvdy50b3AubG9jYXRpb24ucHJvdG9jb2wgPT09ICdmaWxlOicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHZhbGlkYXRlVXJsKHMpIHsNCiAgICAgICAgaWYgKCFpbkJmKCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAvXig/Oig/Omh0dHBzP3xmdHApOlwvXC8pPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKSkoPzo6XGR7Miw1fSk/KD86XC9cUyopPyQvLnRlc3Qocyk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGluQmYoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBsZXQgdyA9IHdpbmRvdzsNCiAgICAgICAgICAgIC8vIEFzIGxvbmcgYXMgYSBwYXJlbnQgZXhpc3RzDQogICAgICAgICAgICB3aGlsZSAody5wYXJlbnQgJiYgdyAhPT0gdy5wYXJlbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICB3LnBhcmVudC5sb2NhdGlvbi5ocmVmOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXcucGFyZW50LmRvY3VtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB3ID0gdy5wYXJlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAhIXcubG9jYXRpb24ub3JpZ2luLm1hdGNoKC9iYW5uZXJmbG93fGxvY2FsaG9zdC8pIHx8ICEhd2luZG93LnRvcC5sb2NhdGlvbi5vcmlnaW4ubWF0Y2goL2Jhbm5lcmZsb3d8bG9jYWxob3N0Lyk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKF9hKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdG9GcmFjdGlvbnMobikgew0KICAgICAgICByZXR1cm4gbiA8IDEgPyBuDQogICAgICAgICAgICA6IG4gPiAxMDAgPyAxDQogICAgICAgICAgICAgICAgOiAhbiA/IDANCiAgICAgICAgICAgICAgICAgICAgOiBuIC8gMTAwOw0KICAgIH0NCiAgICBmdW5jdGlvbiBmb3JtYXRUaW1lKHQpIHsNCiAgICAgICAgcmV0dXJuIHQgPyAodCAtICh0ICU9IDYwKSkgLyA2MCArICg5LjUgPCB0ID8gJzonIDogJzowJykgKyBNYXRoLnJvdW5kKHQpIDogJzA6MDAnOw0KICAgIH0NCiAgICAvKg0KICAgICoqIEV4cG9zZQ0KICAgICovDQogICAgdGhpcy5zZXRWaWRlb1NldHRpbmdzID0gc2V0VmlkZW9TZXR0aW5nczsNCiAgICB0aGlzLmdldFZpZGVvU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfc2V0dGluZ3M7IH07DQogICAgdGhpcy5zZXRGaWxsT3B0aW9uID0gc2V0RmlsbE9wdGlvbjsNCiAgICB0aGlzLnBsYXkgPSBwbGF5VmlkZW87DQogICAgdGhpcy5yZXN0YXJ0ID0gcmVzdGFydFZpZGVvOw0KICAgIHRoaXMucGF1c2UgPSBwYXVzZVZpZGVvOw0KICAgIHRoaXMuc3RvcCA9IHN0b3BWaWRlbzsNCiAgICB0aGlzLmxvYWRWaWRlbyA9IGxvYWRWaWRlbzsNCiAgICB0aGlzLnNldFZvbHVtZSA9IHNldFZvbHVtZTsNCiAgICB0aGlzLnRvZ2dsZU11dGUgPSB0b2dnbGVNdXRlOw0KICAgIHRoaXMuc2Vla1RvID0gc2Vla1RvOw0KICAgIHRoaXMudmlkZW8gPSBfdmlkZW87DQogICAgdGhpcy5wb3N0ZXIgPSBwb3N0ZXI7DQp9DQpmdW5jdGlvbiBnZXRBZGp1c3RlZFVybCh0ZXh0KSB7DQogICAgbGV0IHVybCA9IHRleHQNCiAgICAgICAgLnJlcGxhY2UoL3ZpZGVvLmJhbm5lcmZsb3cuY29tL2csICdjLmJhbm5lcmZsb3cubmV0L2JmLXZpZGVvcycpDQogICAgICAgIC5yZXBsYWNlKC8oXHJcbnxcbnxccnxccykvZ20sICcnKTsNCiAgICBpZiAoQWQuY3VzdG9tRG9tYWluKSB7DQogICAgICAgIC8vIFJlbW92ZSBodHRwfHMgcmVwbGFjZW1lbnQgd2hlbiBBZC5jdXN0b21Eb21haW4gb25seSBnaXZlcyB0aGUgZG9tYWluDQogICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdjLmJhbm5lcmZsb3cubmV0JywgQWQuY3VzdG9tRG9tYWluLnJlcGxhY2UoLyhodHRwfGh0dHBzKTpcL1wvLywgJycpKTsNCiAgICB9DQogICAgcmV0dXJuIHVybDsNCn0NCmZ1bmN0aW9uIFZpZGVvVHJhY2tpbmcob3B0aW9ucykgew0KICAgIC8qDQogICAgKiogIFRoaXMgbWV0aG9kIGJ1YmJsZXMgdXAgZXZlbnRzIHRvIHRoZSBCYW5uZXIvQ3VzdG9tIHNjcmlwdA0KICAgICoqICBhbmQgaXMgdXNlZCB0byBzZW5kIHZpZGVvIHRyYWNraW5nIGV2ZW50cw0KICAgICovDQogICAgdmFyIHVybCA9IG9wdGlvbnMudXJsOw0KICAgIHZhciBmaWxlbmFtZSA9IG9wdGlvbnMuZmlsZW5hbWU7DQogICAgLy8gT25jZSBwZXIgdmlldyA9IE9QVg0KICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgaXNJbml0ID0gZmFsc2UsIC8vIE9QVg0KICAgIHN0YXJ0ZWQgPSBmYWxzZSwgLy8gT1BWDQogICAgcmVhY2hlZEZRID0gZmFsc2UsIC8vIE9QVg0KICAgIHJlYWNoZWRNUCA9IGZhbHNlLCAvLyBPUFYNCiAgICByZWFjaGVkVFEgPSBmYWxzZTsgLy8gT1BWDQogICAgLy8gVmlkZW8gaW5pdGlhbGl6ZWQgDQogICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoaXNJbml0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBpc0luaXQgPSB0cnVlOw0KICAgIH07DQogICAgLy8gVmlkZW8gc3RhcnRlZCBvciBwbGF5aW5nIGZyb20gYmVnaW5uaW5nIGFnYWluDQogICAgdGhpcy5zdGFydGVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIGlmIChzdGFydGVkKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMCB9KTsNCiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBGaXJzdCBRdWFydGlsZQ0KICAgIHRoaXMuZnEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkRlEgfHwgIXN0YXJ0ZWQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC4yNSB9KTsNCiAgICAgICAgcmVhY2hlZEZRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIE1pZHBvaW50DQogICAgdGhpcy5tcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHJlYWNoZWRNUCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjUgfSk7DQogICAgICAgIHJlYWNoZWRNUCA9IHRydWU7DQogICAgfTsNCiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBUaGlyZCBxdWFydGlsZQ0KICAgIHRoaXMudHEgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChyZWFjaGVkVFEpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMC43NSB9KTsNCiAgICAgICAgcmVhY2hlZFRRID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIGhhcyBjb21wbGV0ZWQNCiAgICB0aGlzLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKGhhc0NvbXBsZXRlZCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAxIH0pOw0KICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlOw0KICAgIH07DQp9DQppZiAoIUFycmF5LnByb3RvdHlwZS5maW5kKSB7DQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2ZpbmQnLCB7DQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAocHJlZGljYXRlKSB7DQogICAgICAgICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLg0KICAgICAgICAgICAgaWYgKHRoaXMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ0aGlzIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTsNCiAgICAgICAgICAgIC8vIDIuIExldCBsZW4gYmUgPyBUb0xlbmd0aCg/IEdldChPLCAibGVuZ3RoIikpLg0KICAgICAgICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwOw0KICAgICAgICAgICAgLy8gMy4gSWYgSXNDYWxsYWJsZShwcmVkaWNhdGUpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uDQogICAgICAgICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIDQuIElmIHRoaXNBcmcgd2FzIHN1cHBsaWVkLCBsZXQgVCBiZSB0aGlzQXJnOyBlbHNlIGxldCBUIGJlIHVuZGVmaW5lZC4NCiAgICAgICAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdOw0KICAgICAgICAgICAgLy8gNS4gTGV0IGsgYmUgMC4NCiAgICAgICAgICAgIHZhciBrID0gMDsNCiAgICAgICAgICAgIC8vIDYuIFJlcGVhdCwgd2hpbGUgayA8IGxlbg0KICAgICAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHsNCiAgICAgICAgICAgICAgICAvLyBhLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS4NCiAgICAgICAgICAgICAgICAvLyBiLiBMZXQga1ZhbHVlIGJlID8gR2V0KE8sIFBrKS4NCiAgICAgICAgICAgICAgICAvLyBjLiBMZXQgdGVzdFJlc3VsdCBiZSBUb0Jvb2xlYW4oPyBDYWxsKHByZWRpY2F0ZSwgVCwgwqsga1ZhbHVlLCBrLCBPIMK7KSkuDQogICAgICAgICAgICAgICAgLy8gZC4gSWYgdGVzdFJlc3VsdCBpcyB0cnVlLCByZXR1cm4ga1ZhbHVlLg0KICAgICAgICAgICAgICAgIHZhciBrVmFsdWUgPSBvW2tdOw0KICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCBrVmFsdWUsIGssIG8pKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBrVmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGUuIEluY3JlYXNlIGsgYnkgMS4NCiAgICAgICAgICAgICAgICBrKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyA3LiBSZXR1cm4gdW5kZWZpbmVkLg0KICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgfQ0KICAgIH0pOw0KfQ0K",customProperties:[{label:"Url",name:"url",unit:"text",value:"{\"text\":\"https://productsup.melia.com/production/letra_K_150px.mp4\",\"styles\":[{\"type\":\"word\",\"length\":57,\"position\":0,\"styleIds\":[]}]}",versionPropertyId:"41e2117f-54fa-4a42-a785-d4dd987342d6"},{label:"Use feed",name:"useFeed",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Feed",name:"dynamicContent",unit:"feed",value:"  1 1 loop  text",versionPropertyId:undefined},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"07e435d7-841e-47ff-8bf2-cafbf46c924b"},{label:"Feed index",name:"feedIndex",unit:"number",value:1,versionPropertyId:undefined},{label:"Static index",name:"staticIndex",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Autoplay",name:"autoplay",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Controls",name:"controls",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop",name:"loop",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithBanner",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Volume toggle button",name:"volumeToggleButton",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Volume",name:"volume",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button color",name:"volumeToggleButtonColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Volume button size",name:"volumeToggleButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button left",name:"volumeToggleButtonPositionLeft",unit:"number",value:5,versionPropertyId:undefined},{label:"Volume button top",name:"volumeToggleButtonPositionTop",unit:"number",value:5,versionPropertyId:undefined},{label:"Play/Pause button size",name:"playPauseButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Start time",name:"startTime",unit:"number",value:0,versionPropertyId:undefined},{label:"End time",name:"endTime",unit:"number",value:0,versionPropertyId:undefined},{label:"Preload image",name:"fallbackImage",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Poster",name:"poster",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Fill",name:"backgroundFill",unit:"select",value:"W3sidmFsdWUiOiJDb3ZlciIsInNlbGVjdGVkIjp0cnVlfSx7InZhbHVlIjoiQ29udGFpbiIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Playback rate",name:"playbackRate",unit:"select",value:"W3sidmFsdWUiOiIxIiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiIwLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMC41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjAuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIxLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMS41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjEuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIyIiwic2VsZWN0ZWQiOmZhbHNlfV0=",versionPropertyId:undefined},{label:"Gray Scale",name:"grayScale",unit:"number",value:0,versionPropertyId:undefined},{label:"Player background",name:"playerBackground",unit:"color",value:"rgba(0,0,0,0)",versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Round corners",name:"roundCorners",unit:"number",value:0,versionPropertyId:undefined}],},{kind:'image',id:'e2d4a905-470d-463d-8edf-a6c980f68322',time:0,hidden:false,duration:6.93,animations:[{id:'61d704d2-1a38-4dca-924d-ff4efb0581d5',name:'Animation',type:'keyframe',timingFunction:'easeInOutCubic',settings:{},keyframes:[{id:"76085bc2-f7ea-4a25-a55a-d436f5b4a869",stateId:"271b8390-bbf9-4f7a-8158-6373d42b4ba0",time:0,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"98a0f097-7684-4158-9d6e-12ca370c9473",stateId:"5607592f-e692-46c8-b69e-b4026adad645",time:0.8788246615769553,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"5a8ec1a4-b046-48ee-97a2-da4cd3e25c02",stateId:"fb1c1114-de5d-474f-972a-1924bb1deba7",time:1.5899788285109382,timingFunction:"easeInOutCubic",value:undefined,duration:0},{id:"3b6801a9-7836-474c-be33-4711fa013161",stateId:"aff62b02-e9d9-4c72-bec6-5e3e8a33c368",time:1.983137229742734,timingFunction:"easeInOutCubic",value:undefined,duration:0}]},],states:[{id:'271b8390-bbf9-4f7a-8158-6373d42b4ba0',x:0,y:0,},{id:'5607592f-e692-46c8-b69e-b4026adad645',x:0,y:0,},{id:'fb1c1114-de5d-474f-972a-1924bb1deba7',x:0,y:-122,scaleX:0.6,scaleY:0.6,},{id:'aff62b02-e9d9-4c72-bec6-5e3e8a33c368',x:-22,y:-124,scaleX:0.6,scaleY:0.6,},],actions:[],x:612,y:39,width:273,height:545,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,fitOption:"contain",fitPositionX:0,fitPositionY:0,imageAsset:{id:"258989",url:"https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/7de119d9-5ff4-4914-bb3b-6fe340bd550a.png",width:362,height:724},quality:85},{kind:'image',id:'05b9871b-5352-4743-bf66-6efd4e4b7d34',time:0,hidden:false,duration:6.93,animations:[],states:[],actions:[],x:13,y:16,width:133,height:18,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,fitOption:"contain",fitPositionX:0,fitPositionY:0,imageAsset:{id:"183318",url:"https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/fd99968e-74c8-412b-85f0-8ae9ea45cbd0.svg",width:506,height:62},quality:85},{kind:'text',id:'00f62551-9962-499a-93ab-d6be8a2e3141',time:2.96,hidden:false,duration:3.97,animations:[{id:'f3f41835-3b01-4eab-a2ab-3723adc08683',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":90},distance:{"name":"Distance","value":10}},keyframes:[{id:"fcb0594e-9df6-42c1-bc17-3ae2d0cf3641",stateId:"0d0174a9-a244-415b-9b44-569d47fa706d",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"67e40062-9476-4c99-b5e5-ea19628893f9",stateId:undefined,time:0.47262140188969465,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'0d0174a9-a244-415b-9b44-569d47fa706d',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:694,y:16,width:167,height:349,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"center",maxRows:0,lineHeight:1.2,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0.73,uppercase:false,underline:false,strikethrough:false,fontSize:28,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"F",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"R",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"I",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"D",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"A",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"Y",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:3},{kind:'text',id:'65860b05-0b86-44f8-beea-2270b267d138',time:1.2,hidden:false,duration:5.73,animations:[{id:'e6c36c7b-cf35-4af8-9bfb-2b8cabc424d3',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"1ab6079f-dcaa-4726-a212-9686fbf41e2f",stateId:"f6aba629-2720-40f3-a2fa-09eb5f589f8a",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"f400aae0-567d-447f-9920-380a8828ddce",stateId:undefined,time:1.9806451612903224,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'f6aba629-2720-40f3-a2fa-09eb5f589f8a',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:35,y:486,width:89,height:15,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"bottom",horizontalAlignment:"center",maxRows:0,lineHeight:1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0.1,uppercase:false,underline:false,strikethrough:false,fontSize:11,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"HASTA",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:4},{kind:'text',id:'76aaffec-a9b6-4a91-b836-f2e2abf1affa',time:1.2,hidden:false,duration:5.73,animations:[{id:'8044bbe5-c77e-458f-b32f-9d2e5947ed3e',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"87394263-e75d-48db-b591-2bfc9a998fc5",stateId:"738a7b2c-8506-4258-a2e4-fa12682a181b",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"c2e45a18-c72c-4da5-bbe7-c4d69694ddb9",stateId:undefined,time:1.9806451612903226,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'738a7b2c-8506-4258-a2e4-fa12682a181b',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:52,y:493,width:56,height:56,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"center",maxRows:0,lineHeight:0.1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:-0.02,uppercase:false,underline:false,strikethrough:false,fontSize:42,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"50",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:3},{kind:'text',id:'b7a3956e-5185-489b-9b72-611944251bd0',time:1.2,hidden:false,duration:5.73,animations:[{id:'ccb287ad-199b-4c61-8192-8a45ec0b8a9c',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"6515840c-eef6-4924-af3a-13744451086d",stateId:"c8f3c3ec-9f13-4551-b235-d546868711c6",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"4729c77b-4729-4130-94c1-36fad3262cb8",stateId:undefined,time:1.9806451612903224,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'c8f3c3ec-9f13-4551-b235-d546868711c6',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:13,y:502,width:37,height:35,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"right",maxRows:0,lineHeight:0.1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0.01,uppercase:false,underline:false,strikethrough:false,fontSize:44,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"-",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:4},{kind:'text',id:'2ffbf967-7ecd-41b8-a394-e3890865351a',time:1.2,hidden:false,duration:5.73,animations:[{id:'0ceca427-eb2a-412a-936f-7be8c94cfa02',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"410bd2e1-1e79-4de3-b772-4b58bea52b26",stateId:"33db29df-e537-4c90-80f1-191aceeadec8",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"a06544b9-2b21-4b87-9e4a-2e4ddecefaa0",stateId:undefined,time:1.9806451612903224,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'33db29df-e537-4c90-80f1-191aceeadec8',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:110,y:503,width:35,height:21,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"top",horizontalAlignment:"left",maxRows:0,lineHeight:0.1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,fontSize:22,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"%",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:4},{kind:'text',id:'16698d33-9a61-4902-ad45-734263d39e57',time:1.2,hidden:false,duration:5.73,animations:[{id:'ffaab1b1-e1b5-484e-a8ed-104558f744d9',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"12e72027-65d0-444d-890f-9766e301b4e5",stateId:"2764b470-c4f9-463a-8b3d-737664651c62",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"10bc8b9b-aca1-45ce-ad16-d034336008d4",stateId:undefined,time:1.9806451612903224,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'2764b470-c4f9-463a-8b3d-737664651c62',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:110,y:522,width:37,height:15,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"bottom",horizontalAlignment:"left",maxRows:0,lineHeight:0.1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,fontSize:11,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:4},{kind:'text',id:'ee43463c-27b3-4c58-bccf-339490a5507e',time:1.2,hidden:false,duration:5.73,animations:[{id:'6a9debc3-737c-4424-a5b0-abbcde7da35a',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"f7de0eee-aaf0-4cae-b25f-736499e3d07d",stateId:"34c32113-e266-4c5b-a7da-84b7a7e4a2e6",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"ab1561b7-03d7-4dc2-ac59-d5d1f185dc93",stateId:undefined,time:1.9806451612903224,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'34c32113-e266-4c5b-a7da-84b7a7e4a2e6',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:16,y:556,width:129,height:36,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"top",horizontalAlignment:"center",maxRows:0,lineHeight:1.2,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0.04,uppercase:false,underline:false,strikethrough:false,fontSize:13,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"CANCELACIN",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"GRATUITA*",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:4},{kind:'rectangle',id:'2a39d42f-1c0e-4779-a91c-8084590ad4ba',time:1.2,hidden:false,duration:5.73,animations:[{id:'04101443-93f1-4185-b45f-209548f86ba7',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"0219be79-f79a-492e-b0cf-c83b4fb4c6c3",stateId:"8dc61c3a-8e3f-4b0d-8a9c-dae16ffcc2e6",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"49489c0d-1251-4b06-94f8-25e9378db21d",stateId:undefined,time:1.9806451612903226,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'8dc61c3a-8e3f-4b0d-8a9c-dae16ffcc2e6',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:79,y:486,width:1,height:120,fill:Color.parse('rgba(255,255,255,1)'),radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:1.57,scaleX:1,scaleY:1,mirrorX:true,mirrorY:false,opacity:1},{kind:'rectangle',id:'43851ac6-33e1-4b2d-8650-d91f2218beb7',time:4.69,hidden:false,duration:2.24,animations:[{id:'f5a9b057-7ffa-47bf-95b1-1a148460a223',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":180},distance:{"name":"Distance","value":10}},keyframes:[{id:"78a9ff66-e0d3-4f9f-9fda-a8a5539ba73e",stateId:"cf7c8bdf-1157-41f7-ade5-a8c17f143822",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"ee37bb57-f1d0-487b-abd5-3205707bb0ff",stateId:undefined,time:1.3756097560975604,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'cf7c8bdf-1157-41f7-ade5-a8c17f143822',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:373,y:493,width:47,height:47,fill:Color.parse('rgba(255,255,255,1)'),radius:1,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,border:{thickness:1,style:"solid",color:Color.parse('rgba(116,166,164,1)')},filters:{}},{kind:'rectangle',id:'7b5fdd53-b929-4163-96c3-b5af6039b3c6',time:4.69,hidden:false,duration:2.24,animations:[{id:'25032b6c-ed55-4517-bed0-f7bc5cd4bb6a',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":180},distance:{"name":"Distance","value":10}},keyframes:[{id:"c1b4b8f1-09f7-47f7-9281-a1450ebaf713",stateId:"8eab2fc4-0ab8-4274-8a8c-a5ddafe57905",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"7f66ef07-7f19-41f7-981f-4b0abb4083e4",stateId:undefined,time:1.3756097560975604,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'8eab2fc4-0ab8-4274-8a8c-a5ddafe57905',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:322,y:493,width:47,height:47,fill:Color.parse('rgba(255,255,255,1)'),radius:1,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,border:{thickness:1,style:"solid",color:Color.parse('rgba(116,166,164,1)')},filters:{}},{kind:'rectangle',id:'043f75a1-81f2-46ca-b750-b7a0df1b9826',time:4.69,hidden:false,duration:2.24,animations:[{id:'bfaa439b-6e23-46bf-b1f5-5bd8a54da483',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":180},distance:{"name":"Distance","value":10}},keyframes:[{id:"b8f3ba29-c2e1-45a6-a4cd-49dfcd351493",stateId:"9eb65e60-df0c-4900-80e7-86a1c5fc839e",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"6ef3ced6-5534-4301-bab7-d30f4adc1423",stateId:undefined,time:1.3756097560975604,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'9eb65e60-df0c-4900-80e7-86a1c5fc839e',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:271,y:493,width:47,height:47,fill:Color.parse('rgba(255,255,255,1)'),radius:1,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,border:{thickness:1,style:"solid",color:Color.parse('rgba(116,166,164,1)')},filters:{}},{kind:'widget',id:'c4f79eae-fabc-4da2-835a-dc48746aa27b',time:4.69,hidden:false,duration:2.24,animations:[{id:'f96bc513-c081-4f11-9cd6-d9025c998728',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":180},distance:{"name":"Distance","value":10}},keyframes:[{id:"e03bc35f-ed6f-415a-a17f-e98d28e5439f",stateId:"1b6dfd8c-e5fa-464f-baf5-04ea5c734467",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"d09a50d2-0b51-47d4-ab46-28cee09e5fc6",stateId:undefined,time:1.3756097560975609,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'1b6dfd8c-e5fa-464f-baf5-04ea5c734467',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:269,y:506,width:153,height:28,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,html:"PGRpdiBpZD0ibm8tdmFsdWUiPjwvZGl2Pgo8ZGl2IGlkPSJ0aW1lciI+CiAgICA8ZGl2IGlkPSJkYXlzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJsYWJlbCI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idmFsdWUiIGlkPSJkLXZhbHVlIj4wPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZGVsaW1pdGVyIj48L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0iaG91cnMiPgogICAgICAgIDxkaXYgY2xhc3M9ImxhYmVsIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ2YWx1ZSIgaWQ9ImgtdmFsdWUiPjA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJkZWxpbWl0ZXIiPjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSJtaW51dGVzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJsYWJlbCI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idmFsdWUiIGlkPSJtLXZhbHVlIj4wPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZGVsaW1pdGVyIj48L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0ic2Vjb25kcyI+CiAgICAgICAgPGRpdiBjbGFzcz0ibGFiZWwiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InZhbHVlIiBpZD0icy12YWx1ZSI+MDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImRlbGltaXRlciI+PC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9Im1pbGxpc2Vjb25kcyI+CiAgICAgICAgPGRpdiBjbGFzcz0ibGFiZWwiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InZhbHVlIiBpZD0ibXMtdmFsdWUiPjA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4=",css:"Ym9keXsKICAgIHdpZHRoOiAxMDAlOwogICAgZGlzcGxheTogdGFibGU7Cn0KaHRtbCwgYm9keSB7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9CiN0aW1lciwgI25vLWRhdGUgewogICAgd2lkdGg6IDEwMCU7CiAgICBmb250LXNpemU6IDIycHg7CiAgICBjb2xvcjogIzAwMDsKICAgIGRpc3BsYXk6IHRhYmxlOwp9CiNuby12YWx1ZXsKICAgIGRpc3BsYXk6IG5vbmU7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgZm9udC1zaXplOiAxMXB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgY29sb3I6ICM1NTU7CiAgICBwYWRkaW5nOiA3cHggMTBweDsKfQpzdHJvbmd7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIHBhZGRpbmctYm90dG9tOiAzcHg7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGZvbnQtc2l6ZTogMTNweDsKfQojdGltZXI+ZGl2IHsKICAgIHdpZHRoOiAyNSU7CiAgICBmbG9hdDogbGVmdDsKICAgIHRleHQtYWxpZ246Y2VudGVyOwogICAgZGlzcGxheTogbm9uZTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQojdGltZXIgLmRlbGltaXRlcnsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAxMnB4OwogICAgcmlnaHQ6IDA7Cn0KLmxhYmVsIHsgZm9udC1zaXplOiAxMHB4OyBjb2xvcjogIzAwMDsgbWFyZ2luLWJvdHRvbTogM3B4O30K",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgfSk7DQp9Ow0KV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gZmFsc2U7DQpsZXQgcGF1c2U7DQpsZXQgZmVlZDsNCmxldCBwcm9taXNlUmVzb2x2ZXI7DQpsZXQgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOw0KV2lkZ2V0LmlzTG9hZGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICBwcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KfSk7DQpjbGFzcyBUaW1lciB7DQogICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgIHRoaXMuZGlzcGxheUNvdW50ID0gMDsNCiAgICAgICAgdGhpcy5jb3VudFVwID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2Vjb25kID0gMTAwMDsNCiAgICAgICAgdGhpcy5taW51dGUgPSA2MDAwMDsNCiAgICAgICAgdGhpcy5ob3VyID0gMzYwMDAwMDsNCiAgICAgICAgdGhpcy5kYXkgPSA4NjQwMDAwMDsNCiAgICAgICAgdGhpcy5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImQtdmFsdWUiKTsNCiAgICAgICAgdGhpcy5oID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImgtdmFsdWUiKTsNCiAgICAgICAgdGhpcy5tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm0tdmFsdWUiKTsNCiAgICAgICAgdGhpcy5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInMtdmFsdWUiKTsNCiAgICAgICAgdGhpcy5tcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtcy12YWx1ZSIpOw0KICAgICAgICB0aGlzLnRpbWVyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRpbWVyIik7DQogICAgICAgIHRoaXMubGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJsYWJlbCIpOw0KICAgICAgICB0aGlzLmRlbGltaXRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImRlbGltaXRlciIpOw0KICAgICAgICB0aGlzLnZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidmFsdWUiKTsNCiAgICAgICAgdGhpcy5kYXlMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXlzIC5sYWJlbCcpOw0KICAgICAgICB0aGlzLmhvdXJMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNob3VycyAubGFiZWwnKTsNCiAgICAgICAgdGhpcy5taW51dGVMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtaW51dGVzIC5sYWJlbCcpOw0KICAgICAgICB0aGlzLnNlY29uZHNMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRzIC5sYWJlbCcpOw0KICAgICAgICB0aGlzLm1pbGxpc2Vjb25kc0xhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21pbGxpc2Vjb25kcyAubGFiZWwnKTsNCiAgICB9DQogICAgc2V0RGF0ZShmZWVkVmFsdWUpIHsNCiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnRleHREYXRlKSB7DQogICAgICAgICAgICBsZXQgdGV4dEFyciA9IFdpZGdldC5wcm9wZXJ0aWVzLnRleHREYXRlLnNwbGl0KCcsJykubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkpOw0KICAgICAgICAgICAgdGhpcy5kYXRlID0gdGV4dEFyclswXS5yZXBsYWNlKC9cLS9nLCAnLycpOw0KICAgICAgICAgICAgaWYgKGZlZWRWYWx1ZSAmJiB0aGlzLnVzZUZlZWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGUgPSBmZWVkVmFsdWUucmVwbGFjZSgvXC0vZywgJy8nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmRhdGUubWF0Y2goL1xkezR9XC8vKSAmJiB0aGlzLmRhdGUubWF0Y2goL1xzLykpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGUgPSB0aGlzLmRhdGUucmVwbGFjZSgvXC8vZywgJy0nKS5yZXBsYWNlKC9ccy8sICdUJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmRheUxhYmVsLmlubmVySFRNTCA9IHRleHRBcnJbMV0gJiYgdGV4dEFyclsxXS5sZW5ndGggPyB0ZXh0QXJyWzFdIDogJ0RBWVMnOw0KICAgICAgICAgICAgdGhpcy5ob3VyTGFiZWwuaW5uZXJIVE1MID0gdGV4dEFyclsyXSAmJiB0ZXh0QXJyWzJdLmxlbmd0aCA/IHRleHRBcnJbMl0gOiAnSE9VUlMnOw0KICAgICAgICAgICAgdGhpcy5taW51dGVMYWJlbC5pbm5lckhUTUwgPSB0ZXh0QXJyWzNdICYmIHRleHRBcnJbM10ubGVuZ3RoID8gdGV4dEFyclszXSA6ICdNSU5VVEVTJzsNCiAgICAgICAgICAgIHRoaXMuc2Vjb25kc0xhYmVsLmlubmVySFRNTCA9IHRleHRBcnJbNF0gJiYgdGV4dEFycls0XS5sZW5ndGggPyB0ZXh0QXJyWzRdIDogJ1NFQ09ORFMnOw0KICAgICAgICAgICAgdGhpcy5taWxsaXNlY29uZHNMYWJlbC5pbm5lckhUTUwgPSB0ZXh0QXJyWzVdICYmIHRleHRBcnJbNV0ubGVuZ3RoID8gdGV4dEFycls1XSA6ICdNaWxsaXNlY29uZHMnOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5vLXZhbHVlIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIHRoaXMudGltZXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJ0YWJsZSI7DQogICAgICAgICAgICB0aGlzLnRpbWVyQ29udGFpbmVyLnN0eWxlLnRleHRUcmFuc2Zvcm0gPSAndXBwZXJjYXNlJzsNCiAgICAgICAgICAgIHRoaXMuY291bnREb3duVGltZXIodGhpcy5kYXRlKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuby12YWx1ZSIpLmlubmVySFRNTCA9ICI8cD48c3Ryb25nPkVudGVyIGEgZGF0ZS48L3N0cm9uZz48L3A+IjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuby12YWx1ZSIpLnN0eWxlLmRpc3BsYXkgPSAidW5zZXQiOw0KICAgICAgICAgICAgdGhpcy50aW1lckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICB9DQogICAgfQ0KICAgIGNvdW50RG93blRpbWVyKGRhdGUpIHsNCiAgICAgICAgaWYgKGlzU2FmYXJpKSB7DQogICAgICAgICAgICB0aGlzLmVuZCA9IG5ldyBEYXRlKG5ldyBEYXRlKGRhdGUpLnRvVVRDU3RyaW5nKCkuc3Vic3RyKDAsIDI1KSkuZ2V0VGltZSgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5lbmQgPSBuZXcgRGF0ZShkYXRlKS5nZXRUaW1lKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMudGltZXIpIHsNCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zaG93UmVtYWluaW5nKCk7DQogICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCh0aGlzLnNob3dSZW1haW5pbmcuYmluZCh0aGlzKSwgV2lkZ2V0LnByb3BlcnRpZXMubWlsbGlzZWNvbmRzID8gMzUgOiAxMDAwKTsNCiAgICB9DQogICAgc2hvd1JlbWFpbmluZygpIHsNCiAgICAgICAgaWYgKCFwYXVzZSB8fCBUaW1lbGluZS5pc1BsYXlpbmcpIHsNCiAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IHRoaXMuZW5kIC0gbm93Ow0KICAgICAgICAgICAgbGV0IGFoZWFkID0gbm93IC0gdGhpcy5lbmQ7DQogICAgICAgICAgICBsZXQgeWVhcnM7DQogICAgICAgICAgICBsZXQgZGF5czsNCiAgICAgICAgICAgIGxldCBob3VyczsNCiAgICAgICAgICAgIGxldCBtaW51dGVzOw0KICAgICAgICAgICAgbGV0IHNlY29uZHM7DQogICAgICAgICAgICBsZXQgbWlsbGlTZWNvbmRzOw0KICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgMCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvdW50VXApIHsNCiAgICAgICAgICAgICAgICAgICAgZGF5cyA9IE1hdGguZmxvb3IoYWhlYWQgLyB0aGlzLmRheSk7DQogICAgICAgICAgICAgICAgICAgIGhvdXJzID0gTWF0aC5mbG9vcigoYWhlYWQgJSB0aGlzLmRheSkgLyB0aGlzLmhvdXIpOw0KICAgICAgICAgICAgICAgICAgICBtaW51dGVzID0gTWF0aC5mbG9vcigoYWhlYWQgJSB0aGlzLmhvdXIpIC8gdGhpcy5taW51dGUpOw0KICAgICAgICAgICAgICAgICAgICBzZWNvbmRzID0gTWF0aC5mbG9vcigoYWhlYWQgJSB0aGlzLm1pbnV0ZSkgLyB0aGlzLnNlY29uZCk7DQogICAgICAgICAgICAgICAgICAgIG1pbGxpU2Vjb25kcyA9IE1hdGguZmxvb3IoKGFoZWFkICUgdGhpcy5zZWNvbmQpIC8gMSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZC5pbm5lckhUTUwgPSBkYXlzICsgJyc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaC5pbm5lckhUTUwgPSBob3VycyArICcnOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm0uaW5uZXJIVE1MID0gbWludXRlcyArICcnOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnMuaW5uZXJIVE1MID0gc2Vjb25kcyArICcnOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1zLmlubmVySFRNTCA9IG1pbGxpU2Vjb25kcyArICcnOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kLmlubmVySFRNTCA9ICcwMCc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubS5pbm5lckhUTUwgPSAnMDAnOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmguaW5uZXJIVE1MID0gJzAwJzsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmlubmVySFRNTCA9ICcwMCc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubXMuaW5uZXJIVE1MID0gJzAwJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgZGF5cyA9IE1hdGguZmxvb3IoZGlzdGFuY2UgLyB0aGlzLmRheSk7DQogICAgICAgICAgICAgICAgaG91cnMgPSBNYXRoLmZsb29yKChkaXN0YW5jZSAlIHRoaXMuZGF5KSAvIHRoaXMuaG91cik7DQogICAgICAgICAgICAgICAgbWludXRlcyA9IE1hdGguZmxvb3IoKGRpc3RhbmNlICUgdGhpcy5ob3VyKSAvIHRoaXMubWludXRlKTsNCiAgICAgICAgICAgICAgICBzZWNvbmRzID0gTWF0aC5mbG9vcigoZGlzdGFuY2UgJSB0aGlzLm1pbnV0ZSkgLyB0aGlzLnNlY29uZCk7DQogICAgICAgICAgICAgICAgbWlsbGlTZWNvbmRzID0gTWF0aC5mbG9vcigoZGlzdGFuY2UgJSB0aGlzLnNlY29uZCkgLyAxKTsNCiAgICAgICAgICAgICAgICBpZiAoIWRheXMpIHsNCiAgICAgICAgICAgICAgICAgICAgZGF5cyA9ICcwJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5kLmlubmVySFRNTCA9IChkYXlzIDwgMTApID8gKCcwJyArIGRheXMpIDogZGF5czsNCiAgICAgICAgICAgICAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzLmRheXMpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLmlubmVySFRNTCA9IGRheXMgKiAyNCArIGhvdXJzOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLmlubmVySFRNTCA9IChob3VycyA8IDEwKSA/ICgnMCcgKyBob3VycykgOiBob3VyczsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5tLmlubmVySFRNTCA9IChtaW51dGVzIDwgMTApID8gKCcwJyArIG1pbnV0ZXMpIDogbWludXRlczsNCiAgICAgICAgICAgICAgICB0aGlzLnMuaW5uZXJIVE1MID0gKHNlY29uZHMgPCAxMCkgPyAoJzAnICsgc2Vjb25kcykgOiBzZWNvbmRzOw0KICAgICAgICAgICAgICAgIHRoaXMubXMuaW5uZXJIVE1MID0gKG1pbGxpU2Vjb25kcyA8IDEwMCA/ICcwJyA6ICcnKSArIChtaWxsaVNlY29uZHMgPCAxMCA/ICcwJyA6ICcnKSArIG1pbGxpU2Vjb25kczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZmVlZENoYW5nZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICB1cGRhdGVGb250KCkgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgLy8gZ2V0IHRleHQgZnJvbSBXaWRnZXQgcHJvcGVydGllcyBhbmQgZ2V0IG51bWJlcnMNCiAgICAgICAgICAgIGxldCB0ZXh0ID0gV2lkZ2V0LnByb3BlcnRpZXMuZGVsaW1pdGVyICsgJzEyMzQ1Njc4OTAnOw0KICAgICAgICAgICAgY29uc3QgdGV4dEJsb2NrcyA9IFt0aGlzLmRheUxhYmVsLCB0aGlzLmhvdXJMYWJlbCwgdGhpcy5taW51dGVMYWJlbCwgdGhpcy5zZWNvbmRzTGFiZWwsIHRoaXMubWlsbGlzZWNvbmRzTGFiZWxdOw0KICAgICAgICAgICAgLy8gZ2V0IHRleHQgZnJvbSBodG1sIG1hcmt1cCANCiAgICAgICAgICAgIHRleHRCbG9ja3MuZm9yRWFjaChiID0+IHsNCiAgICAgICAgICAgICAgICB0ZXh0ICs9IGIuaW5uZXJUZXh0LnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGV4dCBmb3IgY3JlYXRlRm9udEZhY2U6ICVzJywgdGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB5aWVsZCBXaWRnZXQucHJvcGVydGllcy53aWRnZXRGb250LmNyZWF0ZUZvbnRGYWNlKHRleHQpOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250RmFtaWx5ID0gV2lkZ2V0LnByb3BlcnRpZXMud2lkZ2V0Rm9udC5pZDsNCiAgICAgICAgfSk7DQogICAgfQ0KICAgIGRlbGltaXRlclBvc2l0aW9uaW5nKCkgew0KICAgICAgICBsZXQgZGVsaW1pdGVyUG9zaXRpb24gPSBXaWRnZXQucHJvcGVydGllcy5kZWxpbWl0ZXJQb3NpdGlvbiArICdweCc7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kZWxpbWl0ZXIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHRoaXMuZGVsaW1pdGVyW2ldLnN0eWxlLnRvcCA9IGRlbGltaXRlclBvc2l0aW9uOw0KICAgICAgICB9DQogICAgfQ0KICAgIGxhYmVsU3BhY2luZygpIHsNCiAgICAgICAgbGV0IGxhYmVsVmVydGljYWxTcGFjZSA9IFdpZGdldC5wcm9wZXJ0aWVzLmxhYmVsVmVydGljYWxTcGFjZSArICdweCc7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sYWJlbC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdGhpcy5sYWJlbFtpXS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBsYWJlbFZlcnRpY2FsU3BhY2U7DQogICAgICAgIH0NCiAgICB9DQp9DQpsZXQgdGltZXIgPSBuZXcgVGltZXIoKTsNCmxldCB0aW1lb3V0Ow0KV2lkZ2V0Lm9uKFdpZGdldEV2ZW50LlByb3BlcnR5Q2hhbmdlZCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgIGlmIChXaWRnZXQucHJvcGVydGllcy5mZWVkUHJvcC5pZCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgZmVlZCA9IHlpZWxkIFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRQcm9wLmxvYWQoKTsNCiAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmZWVkJywgZmVlZCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciB3aGlsZSBmZXRjaGluZyBmZWVkOiAnLCBlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBwYXVzZSA9IGZhbHNlOw0KICAgIHRpbWVyLnN0YXJ0SXRlbSA9IFdpZGdldC5wcm9wZXJ0aWVzLnN0YXJ0SXRlbTsNCiAgICB0aW1lci51c2VGaXhlZEl0ZW0gPSBXaWRnZXQucHJvcGVydGllcy51c2VGaXhlZEl0ZW07DQogICAgdGltZXIudXNlRmVlZCA9IFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQ7DQogICAgdGltZXIuY291bnRVcCA9IFdpZGdldC5wcm9wZXJ0aWVzLmNvdW50VXA7DQogICAgdGltZXIuZGVsaW1pdGVyUG9zaXRpb25pbmcoKTsNCiAgICB0aW1lci5sYWJlbFNwYWNpbmcoKTsNCiAgICBpZiAoZmVlZCAmJiBXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGQgJiYgZmVlZC5kYXRhW3RpbWVyLnN0YXJ0SXRlbV0gJiYgZmVlZC5kYXRhW3RpbWVyLnN0YXJ0SXRlbV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICB0aW1lci5zZXREYXRlKGZlZWQuZGF0YVt0aW1lci5zdGFydEl0ZW1dW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0udmFsdWUpOw0KICAgIH0NCiAgICBlbHNlIHsNCiAgICAgICAgdGltZXIuc2V0RGF0ZSgpOw0KICAgIH0NCiAgICB5aWVsZCB0aW1lci51cGRhdGVGb250KCk7DQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aW1lci5sYWJlbC5sZW5ndGg7IGkrKykgew0KICAgICAgICB0aW1lci5sYWJlbFtpXS5zdHlsZS5jb2xvciA9IFdpZGdldC5wcm9wZXJ0aWVzLmxhYmVsQ29sb3I7DQogICAgICAgIHRpbWVyLmxhYmVsW2ldLnN0eWxlLmZvbnRTaXplID0gV2lkZ2V0LnByb3BlcnRpZXMubGFiZWxUZXh0U2l6ZSArICJweCI7DQogICAgICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMubGFiZWxzKSB7DQogICAgICAgICAgICB0aW1lci5sYWJlbFtpXS5zdHlsZS5vcGFjaXR5ID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHRpbWVyLmxhYmVsW2ldLnN0eWxlLm9wYWNpdHkgPSAxOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMuZGVsaW1pdGVyKSB7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZXIuZGVsaW1pdGVyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB0aW1lci5kZWxpbWl0ZXJbaV0uaW5uZXJIVE1MID0gIiI7DQogICAgICAgIH0NCiAgICB9DQogICAgZWxzZSB7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZXIuZGVsaW1pdGVyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMuZGVsaW1pdGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aW1lci5kZWxpbWl0ZXJbaV0uaW5uZXJIVE1MID0gV2lkZ2V0LnByb3BlcnRpZXMuZGVsaW1pdGVyLnN1YnN0cmluZygwLCAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRpbWVyLmRlbGltaXRlcltpXS5zdHlsZS5jb2xvciA9IFdpZGdldC5wcm9wZXJ0aWVzLnRpbWVyQ29sb3I7DQogICAgICAgICAgICB0aW1lci5kZWxpbWl0ZXJbaV0uc3R5bGUuZm9udFNpemUgPSBXaWRnZXQucHJvcGVydGllcy50aW1lclNpemUgKyAicHgiOw0KICAgICAgICAgICAgaWYgKHRpbWVyLmRlbGltaXRlcltpXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVySFRNTC5sZW5ndGggPT0gMikgew0KICAgICAgICAgICAgICAgIHRpbWVyLmRlbGltaXRlcltpXS5zdHlsZS5yaWdodCA9ICItOCUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRpbWVyLmRlbGltaXRlclt0aW1lci5kZWxpbWl0ZXIubGVuZ3RoIC0gMV0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICB9DQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aW1lci52YWx1ZS5sZW5ndGg7IGkrKykgew0KICAgICAgICB0aW1lci52YWx1ZVtpXS5zdHlsZS5mb250U2l6ZSA9IFdpZGdldC5wcm9wZXJ0aWVzLnRpbWVyU2l6ZSArICJweCI7DQogICAgICAgIHRpbWVyLnZhbHVlW2ldLnN0eWxlLmNvbG9yID0gV2lkZ2V0LnByb3BlcnRpZXMudGltZXJDb2xvcjsNCiAgICB9DQogICAgdGltZXIuZGlzcGxheUNvdW50ID0gMDsNCiAgICAvLyB0b2dnbGUgZGF5cw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYXlzIikuc3R5bGUuZGlzcGxheSA9IFdpZGdldC5wcm9wZXJ0aWVzLmRheXMgPyAidGFibGUtY2VsbCIgOiAibm9uZSI7DQogICAgLy8gdG9nZ2xlIGhvdXJzIHZpc2liaWxpdHkNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaG91cnMiKS5zdHlsZS5kaXNwbGF5ID0gV2lkZ2V0LnByb3BlcnRpZXMuaG91cnMgPyAidGFibGUtY2VsbCIgOiAibm9uZSI7DQogICAgLy8gdG9nZ2xlIG1pbnV0ZXMgdmlzaWJpbGl0eQ0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtaW51dGVzIikuc3R5bGUuZGlzcGxheSA9IFdpZGdldC5wcm9wZXJ0aWVzLm1pbnV0ZXMgPyAidGFibGUtY2VsbCIgOiAibm9uZSI7DQogICAgLy8gdG9nZ2xlIHNlY29uZHMgdmlzaWJpbGl0eQ0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZWNvbmRzIikuc3R5bGUuZGlzcGxheSA9IFdpZGdldC5wcm9wZXJ0aWVzLnNlY29uZHMgPyAidGFibGUtY2VsbCIgOiAibm9uZSI7DQogICAgLy8gdG9nZ2xlIG1pbGxpc2Vjb25kcyB2aXNpYmlsaXR5DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1pbGxpc2Vjb25kcyIpLnN0eWxlLmRpc3BsYXkgPSBXaWRnZXQucHJvcGVydGllcy5taWxsaXNlY29uZHMgPyAidGFibGUtY2VsbCIgOiAibm9uZSI7DQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aW1lci50aW1lckNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGltZXIudGltZXJDb250YWluZXIuY2hpbGRyZW5baV0uc3R5bGUuZGlzcGxheSA9PSAidGFibGUtY2VsbCIpDQogICAgICAgICAgICB0aW1lci5kaXNwbGF5Q291bnQrKzsNCiAgICB9DQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aW1lci50aW1lckNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7IGkrKykgew0KICAgICAgICB0aW1lci50aW1lckNvbnRhaW5lci5jaGlsZHJlbltpXS5zdHlsZS53aWR0aCA9ICgxMDAgLyBNYXRoLm1heCh0aW1lci5kaXNwbGF5Q291bnQsIDEpKS50b1N0cmluZygpICsgJyUnOw0KICAgIH0NCiAgICBpZiAodGltZXIuZGF0ZSkgew0KICAgICAgICB0aW1lci5jb3VudERvd25UaW1lcih0aW1lci5kYXRlKTsNCiAgICB9DQogICAgcHJvbWlzZVJlc29sdmVyKCk7DQp9KSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50Lkxvb3AsICgpID0+IHsNCiAgICAvLyBjaGFuZ2UgZmVlZCBjdXJyZW50IGl0ZW0gaW4gY2FzZSBpZiB3ZSBhcmUgbm90IHN0aWNrIHRvIHNpbmdsZSBleGFjdCBmZWVkIGl0ZW0NCiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzLnVzZUZpeGVkSXRlbSkgew0KICAgICAgICB0aW1lci5zdGFydEl0ZW0rKzsNCiAgICAgICAgaWYgKGZlZWQgJiYgV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkICYmIGZlZWQuZGF0YVt0aW1lci5zdGFydEl0ZW1dICYmIGZlZWQuZGF0YVt0aW1lci5zdGFydEl0ZW1dW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0pIHsNCiAgICAgICAgICAgIHRpbWVyLnNldERhdGUoZmVlZC5kYXRhW3RpbWVyLnN0YXJ0SXRlbV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXS52YWx1ZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0aW1lci5zdGFydEl0ZW0gPSAwOw0KICAgICAgICAgICAgaWYgKGZlZWQgJiYgZmVlZC5kYXRhW3RpbWVyLnN0YXJ0SXRlbV0gJiYgZmVlZC5kYXRhW3RpbWVyLnN0YXJ0SXRlbV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgew0KICAgICAgICAgICAgICAgIHRpbWVyLnNldERhdGUoZmVlZC5kYXRhW3RpbWVyLnN0YXJ0SXRlbV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXS52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU2VlaywgKCkgPT4gew0KICAgIHBhdXNlID0gZmFsc2U7DQogICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOw0KICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgcGF1c2UgPSB0cnVlOw0KICAgIH0sIDUwMCk7DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGF1c2UsICgpID0+IHsNCiAgICBwYXVzZSA9IHRydWU7DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGxheSwgKCkgPT4gew0KICAgIHBhdXNlID0gZmFsc2U7DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU3RvcCwgKCkgPT4gew0KICAgIGlmIChXaWRnZXQucHJvcGVydGllcy5zdG9wV2l0aENyZWF0aXZlKSB7DQogICAgICAgIHBhdXNlID0gdHJ1ZTsNCiAgICB9DQogICAgZWxzZSB7DQogICAgICAgIHBhdXNlID0gZmFsc2U7DQogICAgfQ0KfSk7DQo=",customProperties:[{label:"Date & labels",name:"textDate",unit:"text",value:"{\"text\":\"2021-11-28, DIAS,HORAS,MINUTOS,SEGUNDOS\",\"styles\":[{\"type\":\"word\",\"length\":11,\"position\":0,\"styleIds\":[]},{\"type\":\"space\",\"length\":1,\"position\":11,\"styleIds\":[]},{\"type\":\"word\",\"length\":27,\"position\":12,\"styleIds\":[]}]}",versionPropertyId:"bfcb0014-8e84-4764-887a-e6ca8f6fc947"},{label:"Font",name:"widgetFont",unit:"font",value:"6113af64d53fae5fc8cb0983 500 normal https://fontmanagerstorage.blob.core.windows.net/fontmanagerfonts/59c910d931ae9c0318638256/94b335b5-55ca-4418-95d8-b8f5c646a01d.woff 6113af69d53fae5fc8cb098d",versionPropertyId:undefined},{label:"Date text size",name:"timerSize",unit:"number",value:12,versionPropertyId:undefined},{label:"Date color",name:"timerColor",unit:"color",value:"rgba(116,166,164,1)",versionPropertyId:undefined},{label:"Labels visible",name:"labels",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Label text size",name:"labelTextSize",unit:"number",value:9,versionPropertyId:undefined},{label:"Label color",name:"labelColor",unit:"color",value:"rgba(116,166,164,1)",versionPropertyId:undefined},{label:"Days",name:"days",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Hours",name:"hours",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Minutes",name:"minutes",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Seconds",name:"seconds",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Milliseconds",name:"milliseconds",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Count up when ended",name:"countUp",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Delimiter",name:"delimiter",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"6d0cd5b2-b6d4-4e93-b840-3863952d9ecd"},{label:"Label vertical space",name:"labelVerticalSpace",unit:"number",value:2,versionPropertyId:undefined},{label:"Delimiter position",name:"delimiterPosition",unit:"number",value:13,versionPropertyId:undefined},{label:"Use feed",name:"useFeed",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Use Fixed Item",name:"useFixedItem",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Feed",name:"feedProp",unit:"feed",value:"  1 1 loop  text",versionPropertyId:undefined},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"eb466018-b54c-46f9-950e-30b5290dc23e"},{label:"Start item",name:"startItem",unit:"number",value:1,versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:"false",versionPropertyId:undefined}],},{kind:'rectangle',id:'f758c021-159c-44b1-b5c2-25f7a9ff17ca',time:5.95,hidden:false,duration:0.98,animations:[{id:'7b968d2b-4b43-46b1-8726-500d5872d9b8',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"76c402f2-132d-489a-831c-2aa829d344c8",stateId:"e0c9ca43-4146-4422-930c-d986a6ca789d",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"fad33091-4503-46d5-8c8e-faed19d64837",stateId:undefined,time:0.9589743589743587,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'e0c9ca43-4146-4422-930c-d986a6ca789d',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:272,y:554,width:147,height:29,fill:Color.parse('rgba(255,255,255,1)'),radius:2,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{}},{kind:'text',id:'f6d1631d-f23e-4dac-8d55-291e5e5aa364',time:5.95,hidden:false,duration:0.98,animations:[{id:'d29ee4fd-9e99-403c-8916-4a8be700a457',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"69b707ea-19b9-49a3-9536-caca7b95addf",stateId:"3ce838bc-3e2e-462c-a186-cc81c6d11d18",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"e046b6ca-b598-45ad-a76c-ec3e467012e8",stateId:undefined,time:0.9504273504273505,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'3ce838bc-3e2e-462c-a186-cc81c6d11d18',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},],actions:[],x:277,y:558,width:138,height:22,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(116,166,164,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"center",maxRows:0,lineHeight:1.2,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0.06,uppercase:false,underline:false,strikethrough:false,fontSize:14,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"RESERVA",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"HOY!",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:4},{kind:'widget',id:'fa5417c1-8276-4727-b197-f18f43183a3a',time:0,hidden:false,duration:6.93,animations:[{id:'3e5a78b4-04d3-4fb7-8ea3-119de2afa651',name:'Ascend in',type:'in',timingFunction:'easeOutQuad',templateId:'ascend-in',settings:{direction:{"name":"Direction","value":0},distance:{"name":"Distance","value":10}},keyframes:[{id:"645bf432-bbc8-442e-b792-728c71ffa801",stateId:"a8a76afd-e6f5-4e96-a79d-d1f9b0e6959e",time:0,timingFunction:undefined,value:undefined,duration:0},{id:"53e98ee6-a4bc-47db-b82f-ad365f935377",stateId:undefined,time:0.9612903225806452,timingFunction:"@timingFunction",value:undefined,duration:0}]},{id:'fec46aa9-a8ee-4034-81d5-a7daf7d54e50',name:'Fade out',type:'out',timingFunction:'linear',templateId:'fade-out',settings:{},keyframes:[{id:"eb91b48c-ce44-4052-9cd1-4a5d9fe46f46",stateId:undefined,time:6.403333333333334,timingFunction:undefined,value:undefined,duration:0},{id:"283ee592-e9e9-45b5-8b82-0ed20d66d4d6",stateId:"9f380e62-4e91-405f-86c7-3a2a0f61daf6",time:6.932307692307694,timingFunction:"@timingFunction",value:undefined,duration:0}]},],states:[{id:'a8a76afd-e6f5-4e96-a79d-d1f9b0e6959e',x:"sin(@transition.direction * (pi / 180)) * @transition.distance",y:"-cos(@transition.direction * (pi / 180)) * @transition.distance",opacity:0,},{id:'9f380e62-4e91-405f-86c7-3a2a0f61daf6',opacity:0,},],actions:[],x:7,y:102,width:146,height:376,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,html:"PGRpdiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGlkPSJpbnN0cnVjdGlvbnMiPgogICAgICAgICAgICA8c3Ryb25nPlZpZGVvIHBsYXllcjwvc3Ryb25nPjxicj5FbnRlciBhIFVSTCBpbiB0aGUgVVJMIHByb3BlcnR5IG9yIHNlbGVjdCBmZWVkIHdpdGggdmlkZW8gVVJMLgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InBsYXktcGF1c2Utb3ZlcmxheSIgY2xhc3M9InNob3ctcGxheSI+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9InBhdXNlIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjQwcHgiIGhlaWdodD0iNjQwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJMYXllcl8xIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjgwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4gCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9Ik01NDYuMjczLDkzLjcyNkM0ODUuODM0LDMzLjI4Niw0MDUuNDc2LDAsMzIwLDBDMjM0LjUyNSwwLDE1NC4xNjYsMzMuMjg2LDkzLjcyNiw5My43MjZTMCwyMzQuNTI1LDAsMzIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQzYwNi43MTQsNDg1LjgzNSw2NDAsNDA1LjQ3Niw2NDAsMzIwUzYwNi43MTQsMTU0LjE2Niw1NDYuMjczLDkzLjcyNnogTTMyMCw1ODJDMTc1LjUzMyw1ODIsNTgsNDY0LjQ2Nyw1OCwzMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNTgsMTc1LjUzMywxNzUuNTMzLDU4LDMyMCw1OGMxNDQuNDY3LDAsMjYyLDExNy41MzMsMjYyLDI2MkM1ODIsNDY0LjQ2Nyw0NjQuNDY3LDU4MiwzMjAsNTgyeiIgLz4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzPSIyNDMuMjg5LDMyMCAyNDMuMjg5LDE4OC42OTggMzU3LDI1NC4zNSA0NzAuNzExLDMyMCAzNTcsMzg1LjY1MSAyNDMuMjg5LDQ1MS4zMDIiIC8+CiAgICAgICAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjM3NSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzIiCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyBjbGFzcz0icGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjY0MHB4IiBoZWlnaHQ9IjY0MHB4IiB2aWV3Qm94PSIwIDAgNjQwIDY0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQwIDY0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iLTgwIgogICAgICAgICAgICAgICAgICAgICAgICB5PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT0iIzAwMDAwMCIKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIgogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iODAwIgogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNjA2LjcxNCw0ODUuODM1LDY0MCw0MDUuNDc2LDY0MCwzMjBTNjA2LjcxNCwxNTQuMTY2LDU0Ni4yNzMsOTMuNzI2eiBNMzIwLDU4MkMxNzUuNTMzLDU4Miw1OCw0NjQuNDY3LDU4LDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyIiAvPgogICAgICAgICAgICAgICAgICAgIDxnIGRpc3BsYXk9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSIzNzUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0iaW5saW5lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI1Mi40ODYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9IjE5Mi44NTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJpbmxpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMiIgCiAgICAgICAgICAgICAgICBkaXNwbGF5PSJub25lIj48L2c+CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InZpZGVvLWNvbnRyb2xzIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBsYXliYWNrIiBjbGFzcz0iaXNQYXVzZWQiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGF1c2UiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA2NDAgNjQwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzEiPjxyZWN0IHg9Ii04MCIgeT0iLTgwIiBkaXNwbGF5PSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz48Zz48cmVjdCB4PSIzNzUiIHk9IjE5Mi44NTQiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI1Mi40ODYiIGhlaWdodD0iMjU0LjI5MSIvPjxyZWN0IHg9IjIxNSIgeT0iMTkyLjg1NCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+PHJlY3QgeD0iLTgwIiB5PSItODAiIGRpc3BsYXk9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyICIvPjxnIGRpc3BsYXk9Im5vbmUiPjxyZWN0IHg9IjM3NSIgeT0iMTkyLjg1NCIgZGlzcGxheT0iaW5saW5lIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTIuNDg2IiBoZWlnaHQ9IjI1NC4yOTEiLz48cmVjdCB4PSIyMTUiIHk9IjE5Mi44NTQiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PC9nPjwvZz48ZyBpZD0iTGF5ZXJfMiIgZGlzcGxheT0ibm9uZSI+PC9nPgogICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9ncmVzcy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJwcm9ncmVzcy10aW1lciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImJ1ZmZlckJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0idGltZUJhciI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ2b2x1bWUtaWNvbiIgY2xhc3M9InVubXV0ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNNTMxIDQwNXYtMWMyNCAtMjcgMzYgLTU4IDM2IC05MHMtMTIgLTY0IC0zNiAtODljLTE1IC0xNSAtMzMgLTExIC00NCAxcy0xNiAzMCAtMSA0NWMyNSAyNCAyNSA2NCAwIDg4Yy0xNSAxNSAtMTAgMzMgMSA0NXMyOSAxNiA0NCAxek02MTkgNDkydi0zYzUxIC01MSA3NCAtMTEwIDc0IC0xNzhzLTIzIC0xMjcgLTc0IC0xNzggYy0xMyAtMTUgLTMyIC0xMSAtNDMgMHMtMTYgMzAgLTEgNDVjMzggMzkgNTUgODMgNTUgMTM0cy0xNyA5NSAtNTUgMTM0Yy0xNSAxNSAtMTAgMzQgMSA0NXMzMCAxNCA0MyAxek03MDkgNTc5djRjNzQgLTc4IDExMCAtMTY2IDExMCAtMjY4cy0zNiAtMTkwIC0xMTAgLTI2OGMtMTUgLTE1IC0zMyAtMTEgLTQ0IDBzLTE2IDMwIC0xIDQ1YzY0IDY0IDkzIDEzNyA5MyAyMjFzLTI5IDE1NyAtOTMgMjIxYy0xNSAxNSAtMTAgMzQgMSA0NSBzMjkgMTUgNDQgMHoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJtdXRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTg1MSA0MTBsLTk1IC05NWw5NSAtOTRsLTYzIC02M2wtOTUgOTRsLTk0IC05NGwtNjMgNjNsOTQgOTRsLTk0IDk1bDYzIDYzbDk0IC05NWw5NSA5NXoiLz48L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ2b2x1bWUtY29udHJvbGxlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS12YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4iPgogICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDE3OTIgMTc5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0MTEgNTQxbC0zNTUgMzU1IDM1NSAzNTUgMTQ0LTE0NHEyOS0zMSA3MC0xNCAzOSAxNyAzOSA1OXY0NDhxMCAyNi0xOSA0NXQtNDUgMTloLTQ0OHEtNDIgMC01OS00MC0xNy0zOSAxNC02OWwxNDQtMTQ0LTM1NS0zNTUtMzU1IDM1NSAxNDQgMTQ0cTMxIDMwIDE0IDY5LTE3IDQwLTU5IDQwaC00NDhxLTI2IDAtNDUtMTl0LTE5LTQ1di00NDhxMC00MiA0MC01OSAzOS0xNyA2OSAxNGwxNDQgMTQ0IDM1NS0zNTUtMzU1LTM1NS0xNDQgMTQ0cS0xOSAxOS00NSAxOS0xMiAwLTI0LTUtNDAtMTctNDAtNTl2LTQ0OHEwLTI2IDE5LTQ1dDQ1LTE5aDQ0OHE0MiAwIDU5IDQwIDE3IDM5LTE0IDY5bC0xNDQgMTQ0IDM1NSAzNTUgMzU1LTM1NS0xNDQtMTQ0cS0zMS0zMC0xNC02OSAxNy00MCA1OS00MGg0NDhxMjYgMCA0NSAxOXQxOSA0NXY0NDhxMCA0Mi0zOSA1OS0xMyA1LTI1IDUtMjYgMC00NS0xOXoiIGZpbGw9IiNmZmYiLz4KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJwb3N0ZXIiPjwvZGl2PgogICAgICAgIDxzcGFuIGlkPSJ2b2x1bWVUb2dnbGUiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0idW5tdXRlZCI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDgxOSkiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyNiA0NDFsMjUyIDE4OWg2M3YtNjMwaC02M2wtMjUyIDE4OWgtMTI2djI1MmgxMjZ6TTUzMSA0MDV2LTFjMjQgLTI3IDM2IC01OCAzNiAtOTBzLTEyIC02NCAtMzYgLTg5Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMXMtMTYgMzAgLTEgNDVjMjUgMjQgMjUgNjQgMCA4OGMtMTUgMTUgLTEwIDMzIDEgNDVzMjkgMTYgNDQgMXpNNjE5IDQ5MnYtM2M1MSAtNTEgNzQgLTExMCA3NCAtMTc4cy0yMyAtMTI3IC03NCAtMTc4IGMtMTMgLTE1IC0zMiAtMTEgLTQzIDBzLTE2IDMwIC0xIDQ1YzM4IDM5IDU1IDgzIDU1IDEzNHMtMTcgOTUgLTU1IDEzNGMtMTUgMTUgLTEwIDM0IDEgNDVzMzAgMTQgNDMgMXpNNzA5IDU3OXY0Yzc0IC03OCAxMTAgLTE2NiAxMTAgLTI2OHMtMzYgLTE5MCAtMTEwIC0yNjhjLTE1IC0xNSAtMzMgLTExIC00NCAwcy0xNiAzMCAtMSA0NWM2NCA2NCA5MyAxMzcgOTMgMjIxcy0yOSAxNTcgLTkzIDIyMWMtMTUgMTUgLTEwIDM0IDEgNDUgczI5IDE1IDQ0IDB6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0ibXV0ZWQiPgogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek04NTEgNDEwbC05NSAtOTVsOTUgLTk0bC02MyAtNjNsLTk1IDk0bC05NCAtOTRsLTYzIDYzbDk0IDk0bC05NCA5NWw2MyA2M2w5NCAtOTVsOTUgOTV6Ii8+PC9nPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8taG9sZGVyIj48L2Rpdj4KICAgIDwvZGl2Pg==",css:"KiB7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KaHRtbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQojY29udGFpbmVyIHsKICBvcGFjaXR5OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBmb250LWZhbWlseTogJ0hlbHZldGljYScsICdBcmlhbCcsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxNnB4Owp9Ci52aWRlby1ob2xkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogcG9pbnRlcjsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3ZlciB7CiAgd2lkdGg6IGF1dG87CiAgbGVmdDogNTAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyLXggewogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMTAwJTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3Zlci15IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KI3Bvc3RlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsKICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgei1pbmRleDogMTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwp9CiNwb3N0ZXIuY292ZXIgewogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmltYWdlR2VuZXJhdG9yTW9kZSAjcGxheS1wYXVzZS1vdmVybGF5LAouaW1hZ2VHZW5lcmF0b3JNb2RlICN2aWRlby1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNjb250YWluZXI6aG92ZXIgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNjb250YWluZXIuaXNQYXVzZWQgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgewogIGRpc3BsYXk6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAyOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAxOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5LnNob3cgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuaGlkZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wYXVzZSAucGF1c2UgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wbGF5IC5wbGF5IHsKICBkaXNwbGF5OiBibG9jazsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogNDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDAuNTsKICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC41KTsKICBzdHJva2U6IHJnYmEoMCwwLDAsMC43KTsKICBzdHJva2Utd2lkdGg6IDFweDsKICBwYWRkaW5nOiAycHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgc3ZnICogewogIGZpbGw6IGluaGVyaXQ7Cn0KI3BsYXktcGF1c2Utb3ZlcmxheSBzdmc6aG92ZXIgewogIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKfQojdmlkZW8tY29udHJvbHMgewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41KTsKICBjb2xvcjogI2ZmZjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwcHg7CiAgb3BhY2l0eTogMDsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKICBkaXNwbGF5OiBub25lOwogIHotaW5kZXg6IDM7Cn0KI3ZpZGVvLWNvbnRyb2xzLnNob3cgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7Cn0KI3ZpZGVvLWNvbnRyb2xzID5kaXY6bm90KCNwcm9ncmVzcykgewogIGZsb2F0OiBsZWZ0OwogIHdpZHRoOiAyNXB4OwogIGhlaWdodDogMzBweDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQojdmlkZW8tY29udHJvbHMgPmRpdjpiZWZvcmUgewogIGNvbnRlbnQ6ICcnOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQojdmlkZW8tY29udHJvbHMgc3ZnIHsKICB3aWR0aDogMjVweDsKICBoZWlnaHQ6IDI1cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIGZpbGw6ICNmZmY7Cn0KI3BsYXliYWNrIHsKICB3aWR0aDogMzBweCAhaW1wb3J0YW50Owp9CiNwbGF5YmFjay5pc1BhdXNlZCAuaWNvbi1wbGF5IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KI3BsYXliYWNrLmlzUGxheWluZyAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CiNwbGF5YmFjayAuaWNvbi1wYXVzZSB7CiAgZGlzcGxheTogbm9uZTsKfQojcGxheWJhY2sgLmljb24tcGxheSB7CiAgZGlzcGxheTogbm9uZTsKfQojcHJvZ3Jlc3MtYmFyIHsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7CiAgLW1zLWZsZXgtcGFjazogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtZmxleDogNTsKICAtbXMtZmxleC1wb3NpdGl2ZTogNTsKICBmbGV4LWdyb3c6IDU7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzLXRpbWVyIHsKICB3aWR0aDogODdweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxMXB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyBzcGFuIHsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3Byb2dyZXNzLWJhciAjcHJvZ3Jlc3MgI3RpbWVCYXIgewogIHotaW5kZXg6IDEwOwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuMXM7CiAgdHJhbnNpdGlvbjogd2lkdGggMC4xczsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyAjYnVmZmVyQmFyIHsKICB6LWluZGV4OiA1OwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsKfQojdm9sdW1lIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtbXMtZmxleC1wb3NpdGl2ZTogMTsKICBmbGV4LWdyb3c6IDE7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7CiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LW9yaWVudDogaG9yaXpvbnRhbDsKICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDsKICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdzsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIG1hcmdpbi1yaWdodDogNXB4Owp9CiN2b2x1bWUubW9iaWxlLXZvbHVtZSB7CiAgLXdlYmtpdC1ib3gtZmxleDogMDsKICAtbXMtZmxleC1wb3NpdGl2ZTogMDsKICBmbGV4LWdyb3c6IDA7Cn0KI3ZvbHVtZSAjdm9sdW1lLXZhbHVlIHsKICB6LWluZGV4OiAxMDsKICB3aWR0aDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7CiAgaGVpZ2h0OiAxMDAlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAwLjJzOwogIHRyYW5zaXRpb246IHdpZHRoIDAuMnM7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojdm9sdW1lICN2b2x1bWUtaWNvbiB7CiAgd2lkdGg6IDI1cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWNvbnRyb2xsZXIgewogIHdpZHRoOiA4MCU7CiAgaGVpZ2h0OiA3cHg7CiAgZmxvYXQ6IGxlZnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC40KTsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uIHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWljb24ubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lICN2b2x1bWUtaWNvbi51bm11dGVkIHN2Zy51bm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojZnVsbHNjcmVlbiB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQojZnVsbHNjcmVlbiBzdmcgewogIHdpZHRoOiAxNHB4OwogIG1hcmdpbi1yaWdodDogM3B4Owp9CiN2b2x1bWVUb2dnbGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA0OwogIHdpZHRoOiAxMCU7CiAgaGVpZ2h0OiAxMCU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CiN2b2x1bWVUb2dnbGUubXV0ZWQgc3ZnLm11dGVkIHsKICBkaXNwbGF5OiBibG9jazsKfQojdm9sdW1lVG9nZ2xlLnVubXV0ZWQgc3ZnLnVubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWVUb2dnbGUgc3ZnIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZGlzcGxheTogbm9uZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgZmlsbDogI2ZmZjsKfQojdm9sdW1lVG9nZ2xlIHN2ZyAqIHsKICBmaWxsOiBpbmhlcml0Owp9CkBtZWRpYSAobWF4LXdpZHRoOiAyOTBweCkgewogICNwcm9ncmVzcy10aW1lciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KfQpAbWVkaWEgKG1heC13aWR0aDogMjAwcHgpIHsKICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1pY29uIHsKICAgIHdpZHRoOiBhdXRvOwogIH0KICAjdmlkZW8tY29udHJvbHMgI3ZvbHVtZS1jb250cm9sbGVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CiNpbnN0cnVjdGlvbnMgewogIGJhY2tncm91bmQ6ICMzNjM2MzY7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiA5OTsKICBjb2xvcjogI2Y3ZjdmNzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdmVydGljYWwtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxNXB4OwogIGRpc3BsYXk6IG5vbmU7CiAgLXdlYmtpdC1ib3gtcGFjazogY2VudGVyOwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsOwogIC13ZWJraXQtYm94LWRpcmVjdGlvbjogbm9ybWFsOwogIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZm9udC1zaXplOiAwLjlyZW07Cn0KI2luc3RydWN0aW9ucyBzdHJvbmcgewogIGZvbnQtc2l6ZTogMS4xcmVtOwp9CiNpbnN0cnVjdGlvbnMuc2hvdyB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXN0YXJ0LXBsYXliYWNrLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQp2aWRlbzo6LWludGVybmFsLW1lZGlhLWNvbnRyb2xzLWRvd25sb2FkLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1lbmNsb3N1cmUgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KdmlkZW86Oi13ZWJraXQtbWVkaWEtY29udHJvbHMtcGFuZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgKyAzMHB4KTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqLwp9",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgfSk7DQp9Ow0KV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gdHJ1ZTsNCnZhciB2aWRlbzsNCnZhciBmaXJzdFBsYXlUaHJvdWdoID0gdHJ1ZTsNCnZhciB2aWRlb0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8taG9sZGVyJyk7DQp2YXIgdmlkZW9TZXR0aW5ncyA9IHt9Ow0KdmFyIGhhc1N0b3BwZWQgPSBmYWxzZTsNCnZhciBtdXRlZFN0YXRlID0gdHJ1ZTsNCnZhciB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCnZhciBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zJyk7DQp2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOw0KdmFyIGZlZWQsIGZlZWRVcmwsIGZlZWRJdGVyYXRpb25JbmRleDsNCi8qDQoqKiBCYW5uZXJmbG93IGV2ZW50cw0KKi8NCmxldCBvbkxvYWRlZFByb21pc2VSZXNvbHZlcjsNCmlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgIFdpZGdldC5pc0xvYWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgb25Mb2FkZWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KICAgIH0pOw0KfQ0KdHJ5IHsNCiAgICBzZXRTZXR0aW5ncygpOw0KICAgIGNyZWF0ZVZpZGVvKCk7DQp9DQpjYXRjaCAoZSkgew0KICAgIC8vIGNvbnNvbGUuZXJyb3IoZS5zdGFjayk7IA0KfQ0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TZWVrLCB0aW1lID0+IHsNCiAgICAvLyBpZih2aWRlbyAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2NyZWF0aXZlJykgeyANCiAgICAvLyAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lICsgdGltZSAtIFdpZGdldC50aW1lKSk7DQogICAgLy8gfQ0KICAgIGlmICh2aWRlbykgew0KICAgICAgICB2aWRlby5zZWVrVG8oTWF0aC5hYnModmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgKyB0aW1lIC0gV2lkZ2V0LnRpbWUpKTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuUGxheSwgdGltZSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbykgew0KICAgICAgICAgICAgdmlkZW8ucG9zdGVyLnN0eWxlLnNldFByb3BlcnR5KCJkaXNwbGF5IiwgIm5vbmUiLCAiaW1wb3J0YW50Iik7DQogICAgICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5ICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnICYmICh0aW1lID49IFdpZGdldC50aW1lICYmIHRpbWUgPCBXaWRnZXQuZHVyYXRpb24pKSB7DQogICAgICAgICAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsNCiAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsNCiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LCAwKTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgdGltZSA9PiB7DQogICAgaWYgKHZpZGVvKSB7DQogICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICAgICAgdmlkZW8udG9nZ2xlTXV0ZSh0cnVlKTsNCiAgICAgICAgICAgIHVzZXJJbml0aWF0ZWRQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHRpbWUgLSBXaWRnZXQudGltZSkpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuUmVzaXplLCAoKSA9PiB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh2aWRlbyAmJiB2aWRlb1NldHRpbmdzLnVybCkgew0KICAgICAgICAgICAgdmlkZW8uc2V0RmlsbE9wdGlvbigpOw0KICAgICAgICB9DQogICAgfSwgMCk7DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5Qcm9wZXJ0eUNoYW5nZWQsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICB2aWRlb0VsZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gV2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzICsgJ3B4JzsNCiAgICBmZWVkSXRlcmF0aW9uSW5kZXggPSBXaWRnZXQucHJvcGVydGllcy5mZWVkSW5kZXggLSAxOw0KICAgIHRyeSB7DQogICAgICAgIGlmIChXaWRnZXQucHJvcGVydGllcy51c2VGZWVkICYmIFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZCAmJiBXaWRnZXQucHJvcGVydGllcy5keW5hbWljQ29udGVudC5pZCkgew0KICAgICAgICAgICAgZmVlZCA9IHlpZWxkIFdpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmxvYWQoKTsNCiAgICAgICAgICAgIGlmIChmZWVkICYmIGZlZWQuZGF0YSAmJiBmZWVkLmRhdGEubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgZmVlZCA9IGZlZWQuZGF0YTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBjYXRjaCAoZSkgeyB9DQogICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7DQogICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF0gJiYgZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0pIHsNCiAgICAgICAgZmVlZFVybCA9IGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XVtXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGRdLnZhbHVlOw0KICAgIH0NCiAgICBpbnN0cnVjdGlvbnMuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgIGlmICghV2lkZ2V0LnByb3BlcnRpZXMudXJsIHx8IChXaWRnZXQucHJvcGVydGllcy51c2VGZWVkICYmICFmZWVkVXJsKSkgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIHZhciB1cmwgPSBXaWRnZXQucHJvcGVydGllcy51cmw7DQogICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgZmVlZFVybCkgew0KICAgICAgICB1cmwgPSBmZWVkVXJsOw0KICAgIH0NCiAgICBzZXRTZXR0aW5ncygpOw0KICAgIGlmICghdmlkZW8pIHsNCiAgICAgICAgY3JlYXRlVmlkZW8oKTsNCiAgICB9DQogICAgaWYgKHVybCA9PSB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkudXJsKSB7DQogICAgICAgIGluc3RydWN0aW9ucy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiB1cmwgIT09IHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS51cmwpIHsNCiAgICAgICAgdmlkZW8ubG9hZFZpZGVvKHN0cmlwKHVybCkpOw0KICAgIH0NCiAgICBpZiAodmlkZW8gJiYgdmlkZW9TZXR0aW5ncy51cmwpIHsNCiAgICAgICAgdmlkZW8uc2V0VmlkZW9TZXR0aW5ncyh2aWRlb1NldHRpbmdzKTsNCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnKSB7DQogICAgICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICB9DQogICAgfQ0KfSkpOw0KV2lkZ2V0Lm9uKFdpZGdldEV2ZW50LkFuaW1hdGlvblN0YXJ0LCAoKSA9PiB7DQogICAgaWYgKHZpZGVvICYmICFoYXNTdG9wcGVkKSB7DQogICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsNCiAgICAgICAgICAgIGlmIChmaXJzdFBsYXlUaHJvdWdoICYmIFRpbWVsaW5lLmlzUGxheWluZykgew0KICAgICAgICAgICAgICAgIGlmIChXaWRnZXQucHJvcGVydGllcy5sb29wV2l0aEJhbm5lciB8fCBmaXJzdFBsYXlUaHJvdWdoKSB7DQogICAgICAgICAgICAgICAgICAgIHZpZGVvLnNlZWtUbyhXaWRnZXQucHJvcGVydGllcy5zdGFydFRpbWUpOw0KICAgICAgICAgICAgICAgICAgICBmaXJzdFBsYXlUaHJvdWdoID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsNCiAgICAgICAgICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgICAgICAgICAgICAgZmlyc3RQbGF5VGhyb3VnaCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmxvb3BXaXRoQmFubmVyICYmICF1c2VySW5pdGlhdGVkUGF1c2UgJiYgIXZpZGVvLnZpZGVvLnBhdXNlZCkgew0KICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmxvb3BXaXRoQmFubmVyICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsNCiAgICAgICAgICAgIGlmIChUaW1lbGluZS5pc1BsYXlpbmcpIHsNCiAgICAgICAgICAgICAgICB2aWRlby5zZWVrVG8oV2lkZ2V0LnByb3BlcnRpZXMuc3RhcnRUaW1lKTsNCiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7DQogICAgICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmICh2aWRlbyAmJiAhdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5KSB7DQogICAgICAgIGlmIChUaW1lbGluZS5kdXJhdGlvbiAhPT0gV2lkZ2V0LmR1cmF0aW9uKSB7DQogICAgICAgICAgICB2aWRlby50b2dnbGVNdXRlKG11dGVkU3RhdGUpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQpXaWRnZXQub24oV2lkZ2V0RXZlbnQuQW5pbWF0aW9uRW5kLCAoKSA9PiB7DQogICAgaWYgKFRpbWVsaW5lLmR1cmF0aW9uICE9PSBXaWRnZXQuZHVyYXRpb24pIHsNCiAgICAgICAgbXV0ZWRTdGF0ZSA9IHZpZGVvLnZpZGVvLm11dGVkOw0KICAgICAgICB2aWRlby50b2dnbGVNdXRlKHRydWUpOw0KICAgIH0NCiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzLnN0YXRpY0luZGV4ICYmIFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQpIHsNCiAgICAgICAgaWYgKGZlZWQgJiYgZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXggKyAxXSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleCArIDFdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0pIHsNCiAgICAgICAgICAgIGZlZWRJdGVyYXRpb25JbmRleCsrOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgZmVlZEl0ZXJhdGlvbkluZGV4ID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF0gJiYgZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0pIHsNCiAgICAgICAgICAgIGZlZWRVcmwgPSBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXS52YWx1ZTsNCiAgICAgICAgICAgIHNldFNldHRpbmdzKCk7DQogICAgICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAoZmVlZFVybCkpOw0KICAgICAgICAgICAgdmlkZW8uc2V0VmlkZW9TZXR0aW5ncyh2aWRlb1NldHRpbmdzKTsNCiAgICAgICAgfQ0KICAgIH0NCn0pOw0KV2lkZ2V0Lm9uKFdpZGdldEV2ZW50LlNob3dQcmVsb2FkSW1hZ2UsICgpID0+IHsNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAiYmxvY2siLCAiaW1wb3J0YW50Iik7DQogICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgIH0NCiAgICB9LCAwKTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5Mb29wLCAoKSA9PiB7DQogICAgaWYgKGhhc1N0b3BwZWQpIHsNCiAgICAgICAgdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpZiAodmlkZW8gJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmxvb3BXaXRoQmFubmVyICYmIHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS5hdXRvcGxheSkgew0KICAgICAgICAvLyB2aWRlby5yZXN0YXJ0KCk7DQogICAgfQ0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50LlN0b3AsICgpID0+IHsNCiAgICBpZiAodmlkZW8gJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLnN0b3BXaXRoQ3JlYXRpdmUpIHsNCiAgICAgICAgdmlkZW8uc3RvcCgpOw0KICAgICAgICBoYXNTdG9wcGVkID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdjcmVhdGl2ZScpIHsNCiAgICAgICAgdmlkZW8ucGxheSgpOw0KICAgIH0NCn0pOw0KZnVuY3Rpb24gY3JlYXRlVmlkZW8oKSB7DQogICAgaWYgKCF2aWRlbykgew0KICAgICAgICB2aWRlbyA9IG5ldyBCRlZpZGVvKHZpZGVvRWxlbSwgdmlkZW9TZXR0aW5ncywgVmlkZW9UcmFja2luZyk7DQogICAgfQ0KfQ0KZnVuY3Rpb24gc2V0U2V0dGluZ3MoKSB7DQogICAgaWYgKCFXaWRnZXQucHJvcGVydGllcykgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIHZhciBzZXR0aW5ncyA9IFdpZGdldC5wcm9wZXJ0aWVzOw0KICAgIGZvciAodmFyIGF0dHJuYW1lIGluIHNldHRpbmdzKSB7DQogICAgICAgIHZpZGVvU2V0dGluZ3NbYXR0cm5hbWVdID0gc2V0dGluZ3NbYXR0cm5hbWVdOw0KICAgIH0NCiAgICB2aWRlb1NldHRpbmdzLnVybCA9IGdldEFkanVzdGVkVXJsKFdpZGdldC5wcm9wZXJ0aWVzLnVybCk7DQogICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgZmVlZFVybCkgew0KICAgICAgICB2aWRlb1NldHRpbmdzLnVybCA9IGdldEFkanVzdGVkVXJsKGZlZWRVcmwpOw0KICAgIH0NCiAgICBsZXQgcG9zdGVyOw0KICAgIGxldCBmYWxsYmFja0ltYWdlOw0KICAgIGlmICh2aWRlb1NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICBwb3N0ZXIgPSBnZXRPcHRpbWFsSW1hZ2UodmlkZW9TZXR0aW5ncy5wb3N0ZXIpOw0KICAgIH0NCiAgICBpZiAodmlkZW9TZXR0aW5ncy5mYWxsYmFja0ltYWdlKSB7DQogICAgICAgIGZhbGxiYWNrSW1hZ2UgPSBnZXRPcHRpbWFsSW1hZ2UodmlkZW9TZXR0aW5ncy5mYWxsYmFja0ltYWdlKTsNCiAgICB9DQogICAgdmlkZW9TZXR0aW5ncy5wb3N0ZXIgPSBwb3N0ZXI7DQogICAgdmlkZW9TZXR0aW5ncy5mYWxsYmFja0ltYWdlID0gZmFsbGJhY2tJbWFnZTsNCiAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdpbWFnZScpIHsNCiAgICAgICAgdmlkZW9TZXR0aW5ncy5jb250cm9scyA9IGZhbHNlOw0KICAgICAgICB2aWRlb1NldHRpbmdzLnN0YXJ0VGltZSA9IHZpZGVvU2V0dGluZ3Muc3RhcnRUaW1lIDw9IDEgPyAxIDogdmlkZW9TZXR0aW5ncy5zdGFydFRpbWU7DQogICAgICAgIHZpZGVvU2V0dGluZ3MuYXV0b3BsYXkgPSBmYWxzZTsNCiAgICAgICAgdmlkZW9TZXR0aW5ncy5wb3N0ZXIgPSBudWxsOw0KICAgIH0NCn0NCmZ1bmN0aW9uIGdldE9wdGltYWxJbWFnZShzcmMpIHsNCiAgICByZXR1cm4gV2lkZ2V0LmdldE9wdGltaXplZEltYWdlVXJsKHNyYywgeyB3aWR0aDogV2lkZ2V0LndpZHRoLCBoZWlnaHQ6IFdpZGdldC5oZWlnaHQsIGZpdE9wdGlvbjogV2lkZ2V0LnByb3BlcnRpZXMuYmFja2dyb3VuZEZpbGwudG9Mb3dlckNhc2UoKSB9KTsNCn0NCmZ1bmN0aW9uIHN0cmlwKHMpIHsNCiAgICB2YXIgdG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiRElWIik7DQogICAgdG1wLmlubmVySFRNTCA9IHM7DQogICAgcmV0dXJuIHRtcC50ZXh0Q29udGVudCB8fCB0bXAuaW5uZXJUZXh0IHx8ICIiOw0KfQ0KZnVuY3Rpb24gY29weShhKSB7DQogICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYSkpOw0KfQ0KZnVuY3Rpb24gQkZWaWRlbyhlbGVtLCBvcHRpb25zLCBWaWRlb1RyYWNraW5nKSB7DQogICAgdmFyIF9zZXR0aW5ncyA9IGRlc2VyaWFsaXplU2V0dGluZ3Mob3B0aW9ucyk7DQogICAgdmFyIF92aWRlbzsNCiAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgdmFyIGVsQnlJZCA9IGZ1bmN0aW9uIChzZWwpIHsNCiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbCk7DQogICAgfTsNCiAgICB2YXIgZXZlbnRRdWV1ZSA9IFtdOw0KICAgIHZhciBkZXZpY2VJbmZvID0gZ2V0RGV2aWNlSW5mbygpOw0KICAgIHZhciBwbGF5UHJvbWlzZTsNCiAgICB2YXIgcGVuZGluZ1BhdXNlID0gZmFsc2U7DQogICAgdmFyIHZpZGVvVHJhY2tpbmc7DQogICAgdmFyIGRlZmF1bHRWaWRlb1R5cGVzID0gWw0KICAgICAgICB7DQogICAgICAgICAgICBleHRlbnNpb246ICdtcDQnLA0KICAgICAgICAgICAgdHlwZTogJ3ZpZGVvL21wNCcNCiAgICAgICAgfQ0KICAgIF07DQogICAgdmFyIHRvdGFsUGxheXRpbWU7DQogICAgdmFyIHZvbHVtZSA9IDA7DQogICAgdmFyIGhhc1BsYXllZCA9IGZhbHNlOw0KICAgIHZhciByZWFkeVN0YXRlID0gMDsNCiAgICB2YXIgcGxheWVyID0gZWxCeUlkKCd2aWRlby1wbGF5ZXInKTsNCiAgICB2YXIgdmlkZW9Db250YWluZXIgPSBlbEJ5SWQoJ2NvbnRhaW5lcicpOw0KICAgIHZhciBwbGF5UGF1c2VPdmVybGF5ID0gZWxCeUlkKCdwbGF5LXBhdXNlLW92ZXJsYXknKTsNCiAgICB2YXIgcG9zdGVyID0gZWxCeUlkKCdwb3N0ZXInKTsNCiAgICAvLyBJbml0aWFsaXplIFZpZGVvIGNvbnRyb2xzDQogICAgdmFyIHZpZGVvQ29udHJvbHMgPSBlbEJ5SWQoJ3ZpZGVvLWNvbnRyb2xzJyk7DQogICAgdmFyIHBsYXliYWNrID0gZWxCeUlkKCdwbGF5YmFjaycpOw0KICAgIHZhciB2b2x1bWVDb250YWluZXIgPSBlbEJ5SWQoJ3ZvbHVtZScpOw0KICAgIHZhciB2b2x1bWVDb250cm9sID0gZWxCeUlkKCd2b2x1bWUtY29udHJvbGxlcicpOw0KICAgIHZhciB2b2x1bWVDb250cm9sVmFsdWUgPSBlbEJ5SWQoJ3ZvbHVtZS12YWx1ZScpOw0KICAgIHZhciB2b2x1bWVDb250cm9sVG9nZ2xlID0gZWxCeUlkKCd2b2x1bWUtaWNvbicpOw0KICAgIHZhciBwcm9ncmVzcyA9IGVsQnlJZCgncHJvZ3Jlc3MnKTsNCiAgICB2YXIgdmlkZW9EdXJhdGlvbiA9IGVsQnlJZCgncHJvZ3Jlc3MtdGltZXInKTsNCiAgICB2YXIgZnVsbHNjcmVlbiA9IGVsQnlJZCgnZnVsbHNjcmVlbicpOw0KICAgIHZhciB0aW1lQmFyID0gZWxCeUlkKCd0aW1lQmFyJyk7DQogICAgcGxheWJhY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblRvZ2dsZVBsYXlQYXVzZSk7DQogICAgdm9sdW1lQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblZvbHVtZURyYWcpOw0KICAgIHZvbHVtZUNvbnRyb2xUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZvbHVtZVRvZ2dsZSk7DQogICAgcHJvZ3Jlc3MuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25UaW1lU2Vla0RyYWcpOw0KICAgIGZ1bGxzY3JlZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVGdWxsc2NyZWVuKTsNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Db250cm9sc01vdXNlVXApOw0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uQ29udHJvbHNNb3VzZURvd24pOw0KICAgIHZhciB2b2x1bWVUb2dnbGVCdXR0b24gPSBlbEJ5SWQoJ3ZvbHVtZVRvZ2dsZScpOw0KICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVm9sdW1lVG9nZ2xlKTsNCiAgICB0cnkgew0KICAgICAgICBpZiAocGxheWVyKSB7DQogICAgICAgICAgICBwbGF5ZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwbGF5ZXIpOw0KICAgICAgICAgICAgX3ZpZGVvID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIV9zZXR0aW5ncy51cmwpIHsNCiAgICAgICAgICAgIF9zZXR0aW5ncy51cmwgPSAnJzsNCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXJsLicpOw0KICAgICAgICB9DQogICAgICAgIC8vIFNldCBwb3N0ZXIgYmVmb3JlIGxvYWRpbmcgdmlkZW8NCiAgICAgICAgaWYgKF9zZXR0aW5ncy5wb3N0ZXIpIHsNCiAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MucG9zdGVyICsgJyknOw0KICAgICAgICB9DQogICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJykgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICsgJyknOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmIGRldmljZUluZm8uaXNNb2JpbGUgJiYgIWRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICsgJyknOw0KICAgICAgICB9DQogICAgICAgIF92aWRlbyA9IGNyZWF0ZVZpZGVvRWxlbWVudChfc2V0dGluZ3MudXJsKTsNCiAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChfdmlkZW8pOw0KICAgICAgICAvLyBJbW1lZGlhdGVseSBzZXQgZmlsbCBvcHRpb24gdG8gYXZvaWQgcmVzaXppbmcgdG8gYmUgc2Vlbg0KICAgICAgICBzZXRGaWxsT3B0aW9uKCk7DQogICAgICAgIGlmIChBZC5wYXJhbWV0ZXJzLmlzT21uaVJlbmRlcikgew0KICAgICAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgb25NZXRhTG9hZGVkKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgb25WaWRlb0VuZGVkKTsNCiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCBvblZpZGVvUGxheSk7DQogICAgICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIG9uVmlkZW9QYXVzZSk7DQogICAgICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKCd2b2x1bWVjaGFuZ2UnLCBvblZvbHVtZUNoYW5nZSk7DQogICAgICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgLyoNCiAgICAgICAgKiBXZSB1c2UgUkFGIGluc3RlYWQgb2YgbmF0aXZlIHRpbWV1cGRhdGUgZXZlbnQgb24gdGhlIG1lZGlhIEFQSSB0bw0KICAgICAgICAqIGdldCBhIG1vcmUgYWNjdXJhdGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgdGltZSBvZiB0aGUgdmlkZW8NCiAgICAgICAgKi8NCiAgICAgICAgY29uc3QgdyA9IHdpbmRvdzsNCiAgICAgICAgdmFyIHJhZiA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUNCiAgICAgICAgICAgICAgICB8fCB3LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZQ0KICAgICAgICAgICAgICAgIHx8IHcubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lDQogICAgICAgICAgICAgICAgfHwgdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZQ0KICAgICAgICAgICAgICAgIHx8IGZ1bmN0aW9uIChjYikgeyBzZXRUaW1lb3V0KGNiLCAxMDAwIC8gMzApOyB9Ow0KICAgICAgICB9KSgpOw0KICAgICAgICBmdW5jdGlvbiB0aW1lVXBkYXRlKCkgew0KICAgICAgICAgICAgb25UaW1lVXBkYXRlZCgpOw0KICAgICAgICAgICAgcmFmKHRpbWVVcGRhdGUpOw0KICAgICAgICB9DQogICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTsNCiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOw0KICAgIH0NCiAgICBjYXRjaCAoZSkgew0KICAgICAgICBlbEJ5SWQoJ2luc3RydWN0aW9ucycpLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUuc3RhY2spOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBVcGRhdGVzIHZpZGVvJ3Mgc2V0dGluZ3MNCiAgICAgKiBPbmx5IHNldHRpbmdzIHRoYXQgYXJlIHBhc3NlZCBhcmUgY2hhbmdlZCwgcmVzdCByZW1haW4gcGVyc2lzdGVudA0KICAgICAqIEBwYXJhbSAge30gc2V0dGluZ3MNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBzZXRWaWRlb1NldHRpbmdzKHNldHRpbmdzKSB7DQogICAgICAgIC8vIE1lcmdlIGN1cnJlbnQgc2V0dGluZ3Mgd2l0aCBwb3RlbnRpYWwgbmV3IHNldHRpbmdzDQogICAgICAgIGZvciAodmFyIGF0dHJuYW1lIGluIHNldHRpbmdzKSB7DQogICAgICAgICAgICBfc2V0dGluZ3NbYXR0cm5hbWVdID0gc2V0dGluZ3NbYXR0cm5hbWVdOw0KICAgICAgICB9DQogICAgICAgIF9zZXR0aW5ncyA9IGRlc2VyaWFsaXplU2V0dGluZ3MoX3NldHRpbmdzKTsNCiAgICAgICAgdmlkZW9UcmFja2luZyA9IG5ldyBWaWRlb1RyYWNraW5nKGdldFVybE1ldGEoX3NldHRpbmdzLnVybCkpOw0KICAgICAgICB0b3RhbFBsYXl0aW1lID0gKF9zZXR0aW5ncy5zdGFydFRpbWUgPj0gMSAmJiBfc2V0dGluZ3MuZW5kVGltZSA+PSAxKQ0KICAgICAgICAgICAgPyBfc2V0dGluZ3MuZW5kVGltZSAtIF9zZXR0aW5ncy5zdGFydFRpbWUNCiAgICAgICAgICAgIDogX3ZpZGVvLmR1cmF0aW9uIC0gX3NldHRpbmdzLnN0YXJ0VGltZTsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5sb29wV2l0aEJhbm5lcikgew0KICAgICAgICAgICAgaWYgKFdpZGdldC5kdXJhdGlvbiA+IF92aWRlby5kdXJhdGlvbikgew0KICAgICAgICAgICAgICAgIHRvdGFsUGxheXRpbWUgPSBfdmlkZW8uZHVyYXRpb247DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0b3RhbFBsYXl0aW1lID0gV2lkZ2V0LmR1cmF0aW9uOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBPbmx5IHNldCBhdXRvcGxheSB0byB0cnVlIGlmIHRoZSBkZXZpY2Ugc3VwcG9ydHMgcGxheXNJbmxpbmUgYXR0cmlidXRlIGFuZCBpcyBtb2JpbGUsDQogICAgICAgICAqIGF1dG9wbGF5aW5nIGlzIG90aGVyd2lzZSBoYW5kbGVkIGZyb20gb25DYW5QbGF5IHRvIGVuc3VyZSB0aGF0IHRoZSB2aWRlbyBpcyByZWFkeSBmb3IgcGxheWJhY2suDQogICAgICAgICAqIFRoaXMgaXMgdG8gcHJvcGVybHkgc2hvdy9oaWRlIHRoZSBwb3N0ZXIgd2hpbHN0IHZpZGVvIGlzIGJ1ZmZlcmluZw0KICAgICAgICAgKi8NCiAgICAgICAgX3ZpZGVvLmF1dG9wbGF5ID0gZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lICYmIGRldmljZUluZm8uaXNNb2JpbGUNCiAgICAgICAgICAgID8gX3NldHRpbmdzLmF1dG9wbGF5DQogICAgICAgICAgICA6IGZhbHNlOw0KICAgICAgICBfdmlkZW8uY29udHJvbHMgPSBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZQ0KICAgICAgICAgICAgPyBfc2V0dGluZ3MuY29udHJvbHMNCiAgICAgICAgICAgIDogZmFsc2U7DQogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IF9zZXR0aW5ncy5zdGFydFRpbWU7DQogICAgICAgIHNldFZvbHVtZShfc2V0dGluZ3Mudm9sdW1lKTsNCiAgICAgICAgLy8gSWYgdGhlcmUncyBubyBhdXRvcGxheSBhbmQgdGhlcmUncyB2b2x1bWUgdGhlcmUncyBubyBwb2ludCBpbiBtdXRpbmcgdGhlIHZpZGVvIGJ5IGRlZmF1bHQNCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuYXV0b3BsYXkgJiYgX3NldHRpbmdzLnZvbHVtZSkgew0KICAgICAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvLnBsYXliYWNrUmF0ZSA9IF9zZXR0aW5ncy5wbGF5YmFja1JhdGU7DQogICAgICAgIC8vIFVwZGF0ZSBwb3N0ZXIgaWYgY2hhbmdlZA0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgIT09ICdpbWFnZScgJiYgX3NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5wb3N0ZXIgKyAnKSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnKSB7DQogICAgICAgICAgICB2aWRlby5wYXVzZSgpOw0KICAgICAgICB9DQogICAgICAgIHVwZGF0ZURPTSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBnZXRQcm9wZXJVcmwodXJsKSB7DQogICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC8oXHJcbnxcbnxccnxccykvZ20sICIiKTsNCiAgICAgICAgbGV0IHVybHMgPSB1cmwuc3BsaXQoJywnKTsNCiAgICAgICAgaWYgKCh1cmxzLmxlbmd0aCA9PT0gMiAmJiAhdXJsLm1hdGNoKC9cLih3ZWJtfG1vdikvKSkgfHwgdXJscy5sZW5ndGggPiAyKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAodXJscy5sZW5ndGggPT09IDEgJiYgIXVybC5tYXRjaCgnLm1wNCcpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKHVybHMubGVuZ3RoID09PSAyKSB7DQogICAgICAgICAgICBpZiAoZ2V0RGV2aWNlSW5mbygpLmlzU2FmYXJpKSB7DQogICAgICAgICAgICAgICAgdXJsID0gdXJsc1swXS5tYXRjaCgnLm1vdicpID8gdXJsc1swXSA6IHVybHNbMV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmxzWzBdLm1hdGNoKCcud2VibScpID8gdXJsc1swXSA6IHVybHNbMV07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgcmV0dXJuIHVybDsNCiAgICB9DQogICAgZnVuY3Rpb24gY3JlYXRlVmlkZW9FbGVtZW50KHVybCkgew0KICAgICAgICB1cmwgPSBnZXRQcm9wZXJVcmwodXJsKTsNCiAgICAgICAgaWYgKCF1cmwpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgdSA9IGdldFVybE1ldGEodXJsKTsNCiAgICAgICAgY29uc3QgdmlkZW9UeXBlID0gZ2V0VmlkZW9UeXBlQW5kVXBkYXRlU291cmNlVXJsKHUpOw0KICAgICAgICB2YXIgdXJsU3JjID0gdS5zb3VyY2VVcmw7DQogICAgICAgIHZhciBxdWVyeVBhcmFtcyA9IHUucGFyYW1zOw0KICAgICAgICB2YXIgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOw0KICAgICAgICB2aWRlby5pZCA9ICd2aWRlby1wbGF5ZXInOw0KICAgICAgICB2aWRlby5wcmVsb2FkID0gJ21ldGFkYXRhJzsNCiAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKTsNCiAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCd3ZWJraXQtcGxheXNpbmxpbmUnLCAnJyk7DQogICAgICAgIC8vIE11dGVkIGlzIHNldCBoZXJlIGluc3RlYWQgb2Ygc2V0VmlkZW9TZXR0aW5nIHRvIHByZXZlbnQgaXQgdG8gYmUgbXV0ZWQgd2hlbiBub3Qgd2FudGVkDQogICAgICAgIHZpZGVvLm11dGVkID0gdHJ1ZTsNCiAgICAgICAgaWYgKGRldmljZUluZm8uaXNNb2JpbGUpIHsNCiAgICAgICAgICAgIHZpZGVvLnNldEF0dHJpYnV0ZSgnbXV0ZWQnLCAnJyk7DQogICAgICAgIH0NCiAgICAgICAgZm9yICh2YXIgaSBpbiB2aWRlb1R5cGUpIHsNCiAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7DQogICAgICAgICAgICBzLnNyYyA9IHVybFNyYyArICcuJyArIHZpZGVvVHlwZVtpXS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsNCiAgICAgICAgICAgIHMuc2V0QXR0cmlidXRlKCJ0eXBlIiwgdmlkZW9UeXBlW2ldLnR5cGUpOw0KICAgICAgICAgICAgdmlkZW8uYXBwZW5kQ2hpbGQocyk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHZpZGVvOw0KICAgIH0NCiAgICBmdW5jdGlvbiBnZXRWaWRlb1R5cGVBbmRVcGRhdGVTb3VyY2VVcmwodSkgew0KICAgICAgICBsZXQgdmlkZW9UeXBlOw0KICAgICAgICBpZiAodS5leHQubWF0Y2goLyh3ZWJtfG1vdikvKSkgew0KICAgICAgICAgICAgaWYgKGdldERldmljZUluZm8oKS5pc1NhZmFyaSkgew0KICAgICAgICAgICAgICAgIHZpZGVvVHlwZSA9IFt7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246ICdtb3YnLA0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvL3F1aWNrdGltZScNCiAgICAgICAgICAgICAgICAgICAgfV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB2aWRlb1R5cGUgPSBbew0KICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiAnd2VibScsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vd2VibScNCiAgICAgICAgICAgICAgICAgICAgfV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdmlkZW9UeXBlOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWaWRlb1R5cGVzOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHVwZGF0ZURPTSgpIHsNCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuYXV0b3BsYXkgJiYgX3NldHRpbmdzLnBvc3Rlcikgew0KICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnJzsNCiAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZSkgew0KICAgICAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlKSB7DQogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICsgJyknOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgX3ZpZGVvLnN0YXJ0VGltZSA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKGRldmljZUluZm8uaXNNb2JpbGUpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbW9iaWxlJyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2ltYWdlJykgew0KICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgJiYgIWRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7DQogICAgICAgIH0NCiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5xdWVyeVNlbGVjdG9yQWxsKCdzdmcnKVswXS5zdHlsZS53aWR0aCA9IF9zZXR0aW5ncy5wbGF5UGF1c2VCdXR0b25TaXplICsgJyUnOw0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzFdLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnBsYXlQYXVzZUJ1dHRvblNpemUgKyAnJSc7DQogICAgICAgIGlmIChfc2V0dGluZ3MuY29udHJvbHMgJiYgIWRldmljZUluZm8uaXNNb2JpbGUpIHsNCiAgICAgICAgICAgIHZpZGVvQ29udHJvbHMuY2xhc3NMaXN0LmFkZCgnc2hvdycpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdmlkZW9Db250cm9scy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IF9zZXR0aW5ncy5wbGF5ZXJCYWNrZ3JvdW5kOw0KICAgICAgICBfdmlkZW8uc3R5bGUuZmlsdGVyID0gJ2dyYXlzY2FsZSgnICsgX3NldHRpbmdzLmdyYXlTY2FsZSArICclKSc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbiA/ICdibG9jaycgOiAnbm9uZSc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS50b3AgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25Ub3AgKyAnJSc7DQogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5sZWZ0ID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uTGVmdCArICclJzsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemUgKyAncHgnOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uc3R5bGUuaGVpZ2h0ID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemUgKyAncHgnOw0KICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24ucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMF0uc3R5bGUuZmlsbCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsNCiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzFdLnN0eWxlLmZpbGwgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3I7DQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJykgew0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgKz0gImltYWdlR2VuZXJhdG9yTW9kZSI7DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsNCiAgICAgICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgKyAnKSc7DQogICAgICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsMCwwLDApJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBzZXRGaWxsT3B0aW9uKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNldEZpbGxPcHRpb24oKSB7DQogICAgICAgIGlmIChfc2V0dGluZ3MuYmFja2dyb3VuZEZpbGwgPT09ICdDb3ZlcicpIHsNCiAgICAgICAgICAgIHBvc3Rlci5jbGFzc05hbWUgPSAnY292ZXInOw0KICAgICAgICAgICAgKF92aWRlby52aWRlb0hlaWdodCAvIF92aWRlby52aWRlb1dpZHRoKSA8PSAodmlkZW9Db250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC8gdmlkZW9Db250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpDQogICAgICAgICAgICAgICAgPyBfdmlkZW8uY2xhc3NOYW1lID0gJ2NvdmVyIGNvdmVyLXgnDQogICAgICAgICAgICAgICAgOiBfdmlkZW8uY2xhc3NOYW1lID0gJ2NvdmVyIGNvdmVyLXknOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcG9zdGVyLmNsYXNzTmFtZSA9ICcnOw0KICAgICAgICAgICAgX3ZpZGVvLmNsYXNzTmFtZSA9ICcnOw0KICAgICAgICB9DQogICAgICAgIGlmIChfc2V0dGluZ3MucG9zdGVyKSB7DQogICAgICAgICAgICBfdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiByZXN0YXJ0VmlkZW8oKSB7DQogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IF9zZXR0aW5ncy5zdGFydFRpbWU7DQogICAgICAgIC8vIGlmKF9zZXR0aW5ncy5sb29wKXsNCiAgICAgICAgcGxheVZpZGVvKCk7DQogICAgICAgIC8vIH0NCiAgICB9DQogICAgZnVuY3Rpb24gc2V0UmVhZHlTdGF0ZSgpIHsNCiAgICAgICAgaWYgKF92aWRlby5yZWFkeVN0YXRlID4gcmVhZHlTdGF0ZSkgew0KICAgICAgICAgICAgcmVhZHlTdGF0ZSA9IF92aWRlby5yZWFkeVN0YXRlOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHBsYXlWaWRlbyhmb3JjZVBsYXkpIHsNCiAgICAgICAgLyoNCiAgICAgICAgICogQ2hlY2sgaWYgdGhlIHZpZGVvIGlzIHBsYXlhYmxlLCBvdGhlcndpc2UgYWRkIGl0IHRvIHRoZSBldmVudFF1ZXVlIHdoaWNoDQogICAgICAgICAqIHRyaWdnZXJzIHBsYXkgb24gb25DYW5QbGF5IHdoaWNoIGlzIHdoZW4gdmlkZW8gaXMgcGxheWFibGUNCiAgICAgICAgICovDQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmF1dG9wbGF5IHx8IGhhc1BsYXllZCkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCAxNTApOw0KICAgICAgICBpZiAoKHJlYWR5U3RhdGUgPj0gMyAmJiBfc2V0dGluZ3MuYXV0b3BsYXkpIHx8IGhhc1BsYXllZCB8fCBmb3JjZVBsYXkpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSB1bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIG9uQ2FuUGxheSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSBfdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZSA9IF92aWRlby5wbGF5KCk7DQogICAgICAgICAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgcHJvbWlzZXMgYXJlIG5vdCBzdXBwb3J0ZWQNCiAgICAgICAgICAgICAgICBfdmlkZW8ucGxheSgpOw0KICAgICAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5KTsNCiAgICAgICAgICAgICAgICB2aWRlb1RyYWNraW5nLnN0YXJ0ZWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhhc1BsYXllZCA9IHRydWU7DQogICAgICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7DQogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSBDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiBfc2V0dGluZ3MucG9zdGVyID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgICAgICAgICAgICAvLyBfdmlkZW8uc3R5bGUuZGlzcGxheSA9IENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnICYmIF9zZXR0aW5ncy5wb3N0ZXIgPyAnbm9uZScgOiAnYmxvY2snOw0KICAgICAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSkgew0KICAgICAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgZXZlbnRRdWV1ZS5wdXNoKCdwbGF5Jyk7DQogICAgICAgICAgICBpZiAodmlkZW9UcmFja2luZykgew0KICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHNlZWtUbyhzKSB7DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gczsNCiAgICB9DQogICAgZnVuY3Rpb24gcGF1c2VWaWRlbygpIHsNCiAgICAgICAgc2V0UmVhZHlTdGF0ZSgpOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgaWYgKHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQgJiYgIXBlbmRpbmdQYXVzZSkgew0KICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucGF1c2UoKTsNCiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1BhdXNlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgICAgIHBlbmRpbmdQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgcGVuZGluZ1BhdXNlID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgIC8vIEluIGNhc2UgcHJvbWlzZXMgYXJlIG5vdCBzdXBwb3J0ZWQNCiAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOw0KICAgICAgICB9DQogICAgICAgIHBlbmRpbmdQYXVzZSA9IHRydWU7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHN0b3BWaWRlbygpIHsNCiAgICAgICAgcGF1c2VWaWRlbygpOw0KICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICB9DQogICAgZnVuY3Rpb24gc2V0Vm9sdW1lKHZvbHVtZSkgew0KICAgICAgICBfdmlkZW8udm9sdW1lID0gZGV2aWNlSW5mby5pc01vYmlsZSA/IDAgOiB0b0ZyYWN0aW9ucyh2b2x1bWUpOw0KICAgICAgICAvLyBCYW5uZXJGbG93LnJhaXNlRXZlbnQoJ3ZvbHVtZUNoYW5nZWQnLCBfdmlkZW8udm9sdW1lKTsNCiAgICB9DQogICAgZnVuY3Rpb24gdG9nZ2xlTXV0ZShtdXRlKSB7DQogICAgICAgIGlmIChkZXZpY2VJbmZvLmlzTW9iaWxlKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgX3ZpZGVvLm11dGVkID0gKHR5cGVvZiBtdXRlID09PSAnYm9vbGVhbicpID8gbXV0ZSA6ICFfdmlkZW8ubXV0ZWQ7DQogICAgICAgIC8vIEJhbm5lckZsb3cucmFpc2VFdmVudCgndm9sdW1lQ2hhbmdlZCcsIF92aWRlby5tdXRlZCA/IDAgOiBfdmlkZW8udm9sdW1lKTsNCiAgICB9DQogICAgZnVuY3Rpb24gbG9hZFZpZGVvKHVybCkgew0KICAgICAgICB1cmwgPSBnZXRQcm9wZXJVcmwodXJsKTsNCiAgICAgICAgaWYgKCF1cmwpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB1cmwgPSBnZXRBZGp1c3RlZFVybCh1cmwpOw0KICAgICAgICB2YXIgdSA9IGdldFVybE1ldGEodXJsKTsNCiAgICAgICAgY29uc3QgdmlkZW9UeXBlID0gZ2V0VmlkZW9UeXBlQW5kVXBkYXRlU291cmNlVXJsKHUpOw0KICAgICAgICB2YXIgdXJsU3JjID0gdS5zb3VyY2VVcmw7DQogICAgICAgIHZhciBxdWVyeVBhcmFtcyA9IHUucGFyYW1zOw0KICAgICAgICAvLyBVcGRhdGUgc291cmNlcw0KICAgICAgICBmb3IgKHZhciB2dCBpbiB2aWRlb1R5cGUpIHsNCiAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc291cmNlJylbdnRdOw0KICAgICAgICAgICAgcy5zcmMgPSB1cmxTcmMgKyAnLicgKyB2aWRlb1R5cGVbdnRdLmV4dGVuc2lvbiArIHF1ZXJ5UGFyYW1zOw0KICAgICAgICB9DQogICAgICAgIHZhciBjdXJyZW50Vm9sdW1lID0gX3ZpZGVvLnZvbHVtZTsNCiAgICAgICAgX3ZpZGVvLmxvYWQoKTsNCiAgICAgICAgaWYgKF9zZXR0aW5ncy5hdXRvcGxheSkgew0KICAgICAgICAgICAgcGxheVZpZGVvKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBwYXVzZVZpZGVvKCk7DQogICAgICAgIH0NCiAgICAgICAgc2V0VmlkZW9TZXR0aW5ncyh7IHVybDogdXJsIH0pOw0KICAgICAgICBzZXRWb2x1bWUoY3VycmVudFZvbHVtZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpIHsNCiAgICAgICAgaWYgKF92aWRlby5wYXVzZWQpIHsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wYXVzZScpOw0KICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdzaG93LXBsYXknKTsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BhdXNlZCc7DQogICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93LXBsYXknKTsNCiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdy1wYXVzZScpOw0KICAgICAgICAgICAgcGxheWJhY2suY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5jbGFzc05hbWUgPSAnaXNQbGF5aW5nJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCB8fCBfdmlkZW8uZW5kZWQpIHsNCiAgICAgICAgICAgIHBsYXliYWNrLmNsYXNzTmFtZSA9ICdpc1BhdXNlZCc7DQogICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGxheWJhY2suY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7DQogICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5jbGFzc05hbWUgPSAnaXNQbGF5aW5nJzsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBnZXRVcmxNZXRhKHVybCkgew0KICAgICAgICB2YXIgbyA9IHt9Ow0KICAgICAgICAvLyBpZighdmFsaWRhdGVVcmwodXJsKSl7DQogICAgICAgIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpZCBub3QgcmVjZWl2ZSBhIHZhbGlkIFVSTC4nKTsNCiAgICAgICAgLy8gfQ0KICAgICAgICBpZiAodXJsICYmIHVybC5sZW5ndGgpIHsNCiAgICAgICAgICAgIG8udXJsID0gdXJsLnNwbGl0KCc/JylbMF07DQogICAgICAgICAgICBvLnNvdXJjZVVybCA9IHVybC5zcGxpdCgnPycpWzBdLnN1YnN0cmluZygwLCB1cmwubGFzdEluZGV4T2YoIi4iKSk7DQogICAgICAgICAgICBvLnBhcmFtcyA9IHVybC5pbmRleE9mKCc/JykgIT0gLTEgPyAnPycgKyB1cmwuc3BsaXQoJz8nKVsxXSA6ICcnOw0KICAgICAgICAgICAgby5leHQgPSB1cmwuc3BsaXQoJz8nKVswXS5zdWJzdHJpbmcodXJsLmxhc3RJbmRleE9mKCIuIikgKyAxKSB8fCAnJzsNCiAgICAgICAgICAgIG8uZmlsZW5hbWUgPSB1cmwubWF0Y2goLyhbXi9dKyQpLywgJycpWzBdLnNwbGl0KCc/JylbMF07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG87DQogICAgfQ0KICAgIC8qDQogICAgKiogRXZlbnQgaGFuZGxlcnMNCiAgICAqLw0KICAgIGZ1bmN0aW9uIG9uTWV0YUxvYWRlZCgpIHsNCiAgICAgICAgZWxCeUlkKCdpbnN0cnVjdGlvbnMnKS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgX3NldHRpbmdzLnN0YXJ0VGltZSA9IF9zZXR0aW5ncy5zdGFydFRpbWUgPD0gX3ZpZGVvLmR1cmF0aW9uID8gX3NldHRpbmdzLnN0YXJ0VGltZSA6IDA7DQogICAgICAgIHNldFZpZGVvU2V0dGluZ3MoX3NldHRpbmdzKTsNCiAgICAgICAgdGltZVVwZGF0ZSgpOw0KICAgICAgICBvblZvbHVtZUNoYW5nZSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNhblBsYXkoKSB7DQogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICAvLyBpZighaGFzUGxheWVkICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnKSB7DQogICAgICAgIC8vICAgICBUaW1lbGluZS5yZXN0YXJ0KCk7DQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKG9uTG9hZGVkUHJvbWlzZVJlc29sdmVyKSB7DQogICAgICAgICAgICBvbkxvYWRlZFByb21pc2VSZXNvbHZlcigpOw0KICAgICAgICB9DQogICAgICAgIHNldFJlYWR5U3RhdGUoKTsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBldmVudFF1ZXVlKSB7DQogICAgICAgICAgICBfdmlkZW9bZXZlbnRRdWV1ZVtpXV0oKTsNCiAgICAgICAgICAgIGhhc1BsYXllZCA9IHRydWU7DQogICAgICAgICAgICBpZiAoZXZlbnRRdWV1ZVtpXSA9PT0gJ3BsYXknICYmIGRldmljZUluZm8uY2FuUGxheUlubGluZSkgew0KICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0b2dnbGVQbGF5UGF1c2VCdXR0b24oKTsNCiAgICAgICAgaWYgKHJlYWR5U3RhdGUgPj0gMyB8fCAhX3ZpZGVvLnBhdXNlZCkgew0KICAgICAgICAgICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBvbkNhblBsYXkpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVGltZVVwZGF0ZWQoKSB7DQogICAgICAgIGlmICghX3ZpZGVvKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKCF0aW1lQmFyLnN0eWxlLndpZHRoKSB7DQogICAgICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gX3ZpZGVvLmR1cmF0aW9uICsgJyUnOw0KICAgICAgICB9DQogICAgICAgIHRpbWVCYXIuc3R5bGUud2lkdGggPSBNYXRoLnJvdW5kKChfdmlkZW8uY3VycmVudFRpbWUgLyBfdmlkZW8uZHVyYXRpb24pICogMTAwKSArICclJzsNCiAgICAgICAgaWYgKHZpZGVvRHVyYXRpb24uaW5uZXJIVE1MLnNwbGl0KCcvJylbMF0udHJpbSgpICE9PSBmb3JtYXRUaW1lKF92aWRlby5jdXJyZW50VGltZSkpIHsNCiAgICAgICAgICAgIHZpZGVvRHVyYXRpb24uaW5uZXJIVE1MID0gZm9ybWF0VGltZShfdmlkZW8uY3VycmVudFRpbWUpICsgJyAvICcgKyBmb3JtYXRUaW1lKF92aWRlby5kdXJhdGlvbik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC45NSAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjk1ICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgdmlkZW9UcmFja2luZy5jb21wbGV0ZWQoKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBDaGVjayBpZiByZWFjaGVkIHRoaXJkIHF1YXJ0aWxlICg3NSUpDQogICAgICAgIGVsc2UgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC43NSAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjc1ICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgdmlkZW9UcmFja2luZy50cSgpOw0KICAgICAgICB9DQogICAgICAgIC8vIENoZWNrIGlmIHJlYWNoZWQgbWlkcG9pbnQgKDUwJSkNCiAgICAgICAgZWxzZSBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49IHRvdGFsUGxheXRpbWUgKiAwLjUwIC0gMSAmJiBfdmlkZW8uY3VycmVudFRpbWUgPD0gdG90YWxQbGF5dGltZSAqIDAuNTAgKyAxICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7DQogICAgICAgICAgICB2aWRlb1RyYWNraW5nLm1wKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gQ2hlY2sgaWYgcmVhY2hlZCBmaXJzdCBxdWFydGlsZSAoMjUlKQ0KICAgICAgICBlbHNlIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuMjUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC4yNSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsNCiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuZnEoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49ICgoX3NldHRpbmdzLmVuZFRpbWUgJiYgX3NldHRpbmdzLmVuZFRpbWUgPCBfdmlkZW8uZHVyYXRpb24pID8gX3NldHRpbmdzLmVuZFRpbWUgOiBfdmlkZW8uZHVyYXRpb24pICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7DQogICAgICAgICAgICBvblZpZGVvRW5kZWQoKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvblZpZGVvRW5kZWQoKSB7DQogICAgICAgIGlmICghX3NldHRpbmdzLmxvb3ApIHsNCiAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHJlc3RhcnRWaWRlbygpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVmlkZW9QbGF5KCkgew0KICAgICAgICB2aWRlb1RyYWNraW5nLnN0YXJ0ZWQoKTsNCiAgICAgICAgdG9nZ2xlUGxheVBhdXNlQnV0dG9uKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVmlkZW9QYXVzZSgpIHsNCiAgICAgICAgdG9nZ2xlUGxheVBhdXNlQnV0dG9uKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lQ2hhbmdlKCkgew0KICAgICAgICB2b2x1bWVDb250cm9sVmFsdWUuc3R5bGUud2lkdGggPSAhX3ZpZGVvLm11dGVkID8gX3ZpZGVvLnZvbHVtZSAqIDEwMCArICclJyA6ICcwJzsNCiAgICAgICAgaWYgKF92aWRlby52b2x1bWUgPT09IDAgfHwgX3ZpZGVvLm11dGVkKSB7DQogICAgICAgICAgICB2b2x1bWVDb250cm9sVG9nZ2xlLmNsYXNzTmFtZSA9ICdtdXRlZCc7DQogICAgICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uY2xhc3NOYW1lID0gJ211dGVkJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHZvbHVtZUNvbnRyb2xUb2dnbGUuY2xhc3NOYW1lID0gJ3VubXV0ZWQnOw0KICAgICAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9ICd1bm11dGVkJzsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7DQogICAgICAgIHZhciBjbGlja09uUGxheVBhdXNlQnV0dG9uID0gZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0Ow0KICAgICAgICBpZiAoIV9zZXR0aW5ncy5jb250cm9scyAmJiAhX3NldHRpbmdzLmF1dG9wbGF5ICYmIGNsaWNrT25QbGF5UGF1c2VCdXR0b24pIHsNCiAgICAgICAgICAgIGlmIChfdmlkZW8ucGF1c2VkKSB7DQogICAgICAgICAgICAgICAgdG9nZ2xlTXV0ZShmYWxzZSk7DQogICAgICAgICAgICAgICAgcGxheVZpZGVvKHRydWUpOw0KICAgICAgICAgICAgICAgIHVzZXJJbml0aWF0ZWRQYXVzZSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcGF1c2VWaWRlbygpOw0KICAgICAgICAgICAgICAgIHVzZXJJbml0aWF0ZWRQYXVzZSA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBDcmVhdGl2ZS5vcGVuKGV2ZW50LCB1bmRlZmluZWQpOw0KICAgICAgICB9DQogICAgfQ0KICAgIC8qDQogICAgKiogVmlkZW8gY29udHJvbHMNCiAgICAqLw0KICAgIHZhciB2b2x1bWVEcmFnID0gZmFsc2U7DQogICAgdmFyIHRpbWVEcmFnID0gZmFsc2U7DQogICAgZnVuY3Rpb24gb25Ub2dnbGVQbGF5UGF1c2UoKSB7DQogICAgICAgIGlmIChfdmlkZW8ucGF1c2VkIHx8IF92aWRlby5lbmRlZCkgew0KICAgICAgICAgICAgcGxheVZpZGVvKCk7DQogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsNCiAgICAgICAgICAgIHVzZXJJbml0aWF0ZWRQYXVzZSA9IHRydWU7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gb25Wb2x1bWVEcmFnKGUpIHsNCiAgICAgICAgaWYgKGUuYnV0dG9uICE9IDApDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIHZvbHVtZURyYWcgPSB0cnVlOw0KICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7DQogICAgfQ0KICAgIDsNCiAgICBmdW5jdGlvbiB1cGRhdGVWb2x1bWUoeCkgew0KICAgICAgICB2YXIgbWF4Vm9sdW1lID0gMTsNCiAgICAgICAgdmFyIHBvc2l0aW9uID0geCAtIHZvbHVtZUNvbnRhaW5lci5vZmZzZXRMZWZ0IC0gdm9sdW1lQ29udHJvbC5vZmZzZXRMZWZ0IC0gMjsNCiAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSAxMDAgKiBwb3NpdGlvbiAvIHZvbHVtZUNvbnRyb2wub2Zmc2V0V2lkdGg7DQogICAgICAgIGlmIChwZXJjZW50YWdlID4gMTAwKSB7DQogICAgICAgICAgICBwZXJjZW50YWdlID0gMTAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChwZXJjZW50YWdlIDwgMCkgew0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IDA7DQogICAgICAgIH0NCiAgICAgICAgc2V0Vm9sdW1lKG1heFZvbHVtZSAqIHBlcmNlbnRhZ2UgLyAxMDApOw0KICAgICAgICB2b2x1bWUgPSBfdmlkZW8udm9sdW1lOw0KICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsNCiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gb25Wb2x1bWVUb2dnbGUoKSB7DQogICAgICAgIF92aWRlby5tdXRlZCA9ICFfdmlkZW8ubXV0ZWQ7DQogICAgICAgIG9uVm9sdW1lQ2hhbmdlKCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uVGltZVNlZWtEcmFnKGUpIHsNCiAgICAgICAgaWYgKGUuYnV0dG9uICE9IDApDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIHRpbWVEcmFnID0gdHJ1ZTsNCiAgICAgICAgdXBkYXRlUHJvZ3Jlc3NiYXIoZS5wYWdlWCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG9uQ29udHJvbHNNb3VzZVVwKGUpIHsNCiAgICAgICAgaWYgKHZvbHVtZURyYWcpIHsNCiAgICAgICAgICAgIHZvbHVtZURyYWcgPSBmYWxzZTsNCiAgICAgICAgICAgIHVwZGF0ZVZvbHVtZShlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGltZURyYWcpIHsNCiAgICAgICAgICAgIHRpbWVEcmFnID0gZmFsc2U7DQogICAgICAgICAgICB1cGRhdGVQcm9ncmVzc2JhcihlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBvbkNvbnRyb2xzTW91c2VEb3duKGUpIHsNCiAgICAgICAgaWYgKHZvbHVtZURyYWcpIHsNCiAgICAgICAgICAgIHVwZGF0ZVZvbHVtZShlLnBhZ2VYKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGltZURyYWcpIHsNCiAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzYmFyKHgpIHsNCiAgICAgICAgdmFyIG1heGR1cmF0aW9uID0gX3ZpZGVvLmR1cmF0aW9uOw0KICAgICAgICB2YXIgcG9zaXRpb24gPSB4IC0gcHJvZ3Jlc3Mub2Zmc2V0TGVmdDsNCiAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSAxMDAgKiBwb3NpdGlvbiAvIHByb2dyZXNzLm9mZnNldFdpZHRoOw0KICAgICAgICBpZiAocGVyY2VudGFnZSA+IDEwMCkgew0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IDEwMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocGVyY2VudGFnZSA8IDApIHsNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAwOw0KICAgICAgICB9DQogICAgICAgIHRpbWVCYXIuc3R5bGUud2lkdGggPSBwZXJjZW50YWdlICsgJyUnOw0KICAgICAgICBfdmlkZW8uY3VycmVudFRpbWUgPSBtYXhkdXJhdGlvbiAqIHBlcmNlbnRhZ2UgLyAxMDA7DQogICAgfQ0KICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50Ow0KICAgIC8vIEZ1bGxzY3JlZW4NCiAgICB2YXIgZnVsbFNjcmVlbkVuYWJsZWQgPSAhIShkb2MuZnVsbHNjcmVlbkVuYWJsZWQNCiAgICAgICAgfHwgZG9jLm1vekZ1bGxTY3JlZW5FbmFibGVkDQogICAgICAgIHx8IGRvYy5tc0Z1bGxzY3JlZW5FbmFibGVkDQogICAgICAgIHx8IGRvYy53ZWJraXRTdXBwb3J0c0Z1bGxzY3JlZW4NCiAgICAgICAgfHwgZG9jLndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkKTsNCiAgICBpZiAoIWZ1bGxTY3JlZW5FbmFibGVkKSB7DQogICAgICAgIGZ1bGxzY3JlZW4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9DQogICAgZnVuY3Rpb24gaGFuZGxlRnVsbHNjcmVlbigpIHsNCiAgICAgICAgaWYgKGlzRnVsbFNjcmVlbigpKSB7DQogICAgICAgICAgICBpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGRvYy5tb3pDYW5jZWxGdWxsU2NyZWVuKQ0KICAgICAgICAgICAgICAgIGRvYy5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmIChkb2Mud2Via2l0Q2FuY2VsRnVsbFNjcmVlbikNCiAgICAgICAgICAgICAgICBkb2Mud2Via2l0Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9jLm1zRXhpdEZ1bGxzY3JlZW4pDQogICAgICAgICAgICAgICAgZG9jLm1zRXhpdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKGZhbHNlKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGlmICh2aWRlb0NvbnRhaW5lci5yZXF1ZXN0RnVsbHNjcmVlbikNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5yZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmlkZW9Db250YWluZXIubW96UmVxdWVzdEZ1bGxTY3JlZW4pDQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHZpZGVvQ29udGFpbmVyLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKQ0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKCk7DQogICAgICAgICAgICBlbHNlIGlmICh2aWRlb0NvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKQ0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKHRydWUpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIGlzRnVsbFNjcmVlbigpIHsNCiAgICAgICAgcmV0dXJuICEhKGRvYy5mdWxsU2NyZWVuIHx8IGRvYy53ZWJraXRJc0Z1bGxTY3JlZW4gfHwgZG9jLm1vekZ1bGxTY3JlZW4gfHwgZG9jLm1zRnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jLmZ1bGxzY3JlZW5FbGVtZW50KTsNCiAgICB9DQogICAgZnVuY3Rpb24gc2V0RnVsbHNjcmVlbkRhdGEoc3RhdGUpIHsNCiAgICAgICAgdmlkZW9Db250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLWZ1bGxzY3JlZW4nLCAnJyArICEhc3RhdGUpOw0KICAgICAgICBzdGF0ZSA/IHZpZGVvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Z1bGxzY3JlZW4nKSA6IHZpZGVvQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bGxzY3JlZW4nKTsNCiAgICB9DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISEoZG9jLmZ1bGxTY3JlZW4gfHwgZG9jLmZ1bGxzY3JlZW5FbGVtZW50KSk7DQogICAgfSk7DQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISFkb2Mud2Via2l0SXNGdWxsU2NyZWVuKTsNCiAgICB9KTsNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSghIWRvYy5tb3pGdWxsU2NyZWVuKTsNCiAgICB9KTsNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtc2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhZG9jLm1zRnVsbHNjcmVlbkVsZW1lbnQpOw0KICAgIH0pOw0KICAgIC8qDQogICAgKiogVXRpbHMNCiAgICAqLw0KICAgIGZ1bmN0aW9uIGdldERldmljZUluZm8oKSB7DQogICAgICAgIHZhciBpc01vYmlsZSA9IC9BbmRyb2lkfHdlYk9TfFNhbXN1bmdCcm93c2VyfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsNCiAgICAgICAgdmFyIGlzQW5kcm9pZCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiYW5kcm9pZCIpID4gLTE7DQogICAgICAgIHZhciBpc1NhbXN1bmdCcm93c2VyID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvU2Ftc3VuZ0Jyb3dzZXIvaSkgfHwgZmFsc2U7DQogICAgICAgIHZhciBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgICAgIHZhciBpc0lvcyA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAod2luZG93Lk1TU3RyZWFtKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbWF0Y2ggPSAobmF2aWdhdG9yLmFwcFZlcnNpb24pLm1hdGNoKC9PUyAoXGQrKV8oXGQrKV8/KFxkKyk/LyksIHZlcnNpb247DQogICAgICAgICAgICBpZiAobWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBtYXRjaCAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZlcnNpb24gPSBbDQogICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1hdGNoWzFdLCAxMCksDQogICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1hdGNoWzJdLCAxMCksDQogICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1hdGNoWzNdIHx8IDAsIDEwKQ0KICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmVyc2lvbi5qb2luKCcuJykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0pKCk7DQogICAgICAgIHZhciBjYW5QbGF5SW5saW5lID0gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciB2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsNCiAgICAgICAgICAgIHYubXV0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgdi5wbGF5KCk7DQogICAgICAgICAgICByZXR1cm4gIXYucGF1c2VkIHx8ICgncGxheXNJbmxpbmUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJykpOw0KICAgICAgICB9KSgpOw0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaXNNb2JpbGU6IGlzTW9iaWxlLA0KICAgICAgICAgICAgaXNBbmRyb2lkOiBpc0FuZHJvaWQsDQogICAgICAgICAgICBpc1NhbXN1bmdCcm93c2VyOiBpc1NhbXN1bmdCcm93c2VyLA0KICAgICAgICAgICAgaXNTYWZhcmk6IGlzU2FmYXJpLA0KICAgICAgICAgICAgaXNJb3M6IGlzSW9zLA0KICAgICAgICAgICAgY2FuUGxheUlubGluZTogY2FuUGxheUlubGluZQ0KICAgICAgICB9Ow0KICAgIH0NCiAgICBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNldHRpbmdzKHNldHRpbmdzKSB7DQogICAgICAgIHZhciBzID0ge307DQogICAgICAgIC8vIFZpZGVvIHNldHRpbmdzL3Byb3BlcnRpZXMNCiAgICAgICAgcy51cmwgPSBzZXR0aW5ncy51cmw7DQogICAgICAgIHMuYXV0b3BsYXkgPSBzZXR0aW5ncy5hdXRvcGxheTsNCiAgICAgICAgcy5sb29wID0gc2V0dGluZ3MubG9vcDsNCiAgICAgICAgcy5jb250cm9scyA9IHNldHRpbmdzLmNvbnRyb2xzOw0KICAgICAgICBzLnZvbHVtZSA9IHNldHRpbmdzLnZvbHVtZSB8fCAwOw0KICAgICAgICBzLnN0YXJ0VGltZSA9IHNldHRpbmdzLnN0YXJ0VGltZSB8fCAwOw0KICAgICAgICBzLmVuZFRpbWUgPSBzZXR0aW5ncy5lbmRUaW1lOw0KICAgICAgICBzLnBsYXliYWNrUmF0ZSA9IChwYXJzZUZsb2F0KHNldHRpbmdzLnBsYXliYWNrUmF0ZSkgfHwgMSk7DQogICAgICAgIHMucG9zdGVyID0gZ2V0QWRqdXN0ZWRVcmwoc2V0dGluZ3MucG9zdGVyIHx8ICcnKTsNCiAgICAgICAgLy8gU3BlY2lhbCBzZXR0aW5ncw0KICAgICAgICBzLnBsYXllckJhY2tncm91bmQgPSBzZXR0aW5ncy5wbGF5ZXJCYWNrZ3JvdW5kOw0KICAgICAgICBzLmdyYXlTY2FsZSA9IHNldHRpbmdzLmdyYXlTY2FsZTsNCiAgICAgICAgcy5sb29wV2l0aEJhbm5lciA9IHNldHRpbmdzLmxvb3BXaXRoQmFubmVyOw0KICAgICAgICBzLnN0b3BXaXRoQ3JlYXRpdmUgPSBzZXR0aW5ncy5zdG9wV2l0aENyZWF0aXZlOw0KICAgICAgICBzLmJhY2tncm91bmRGaWxsID0gc2V0dGluZ3MuYmFja2dyb3VuZEZpbGw7DQogICAgICAgIHMuZmFsbGJhY2tJbWFnZSA9IGdldEFkanVzdGVkVXJsKHNldHRpbmdzLmZhbGxiYWNrSW1hZ2UgfHwgJycpOw0KICAgICAgICBzLnBsYXlQYXVzZUJ1dHRvblNpemUgPSBzZXR0aW5ncy5wbGF5UGF1c2VCdXR0b25TaXplIHx8IDQwOw0KICAgICAgICBzLnZvbHVtZVRvZ2dsZUJ1dHRvbiA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbjsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25TaXplID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZTsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25Db2xvciA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbkNvbG9yOw0KICAgICAgICBzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uVG9wID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25Ub3AgfHwgMDsNCiAgICAgICAgcy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvbkxlZnQgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvbkxlZnQgfHwgMDsNCiAgICAgICAgcmV0dXJuIHM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGlzSW5Mb2NhbEVudmlyb25tZW50KCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgaWYgKCF3aW5kb3cpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAod2luZG93LnRvcC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2ZpbGU6Jykgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gdmFsaWRhdGVVcmwocykgew0KICAgICAgICBpZiAoIWluQmYoKSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIC9eKD86KD86aHR0cHM/fGZ0cCk6XC9cLyk/KD86KD8hKD86MTB8MTI3KSg/OlwuXGR7MSwzfSl7M30pKD8hKD86MTY5XC4yNTR8MTkyXC4xNjgpKD86XC5cZHsxLDN9KXsyfSkoPyExNzJcLig/OjFbNi05XXwyXGR8M1swLTFdKSg/OlwuXGR7MSwzfSl7Mn0pKD86WzEtOV1cZD98MVxkXGR8MlswMV1cZHwyMlswLTNdKSg/OlwuKD86MT9cZHsxLDJ9fDJbMC00XVxkfDI1WzAtNV0pKXsyfSg/OlwuKD86WzEtOV1cZD98MVxkXGR8MlswLTRdXGR8MjVbMC00XSkpfCg/Oig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSg/OlwuKD86W2Etelx1MDBhMS1cdWZmZmYwLTldLSopKlthLXpcdTAwYTEtXHVmZmZmMC05XSspKig/OlwuKD86W2Etelx1MDBhMS1cdWZmZmZdezIsfSkpKSg/OjpcZHsyLDV9KT8oPzpcL1xTKik/JC8udGVzdChzKTsNCiAgICB9DQogICAgZnVuY3Rpb24gaW5CZigpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGxldCB3ID0gd2luZG93Ow0KICAgICAgICAgICAgLy8gQXMgbG9uZyBhcyBhIHBhcmVudCBleGlzdHMNCiAgICAgICAgICAgIHdoaWxlICh3LnBhcmVudCAmJiB3ICE9PSB3LnBhcmVudCkgew0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHcucGFyZW50LmxvY2F0aW9uLmhyZWY7DQogICAgICAgICAgICAgICAgICAgIGlmICghdy5wYXJlbnQuZG9jdW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHcgPSB3LnBhcmVudDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICEhdy5sb2NhdGlvbi5vcmlnaW4ubWF0Y2goL2Jhbm5lcmZsb3d8bG9jYWxob3N0LykgfHwgISF3aW5kb3cudG9wLmxvY2F0aW9uLm9yaWdpbi5tYXRjaCgvYmFubmVyZmxvd3xsb2NhbGhvc3QvKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoX2EpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB0b0ZyYWN0aW9ucyhuKSB7DQogICAgICAgIHJldHVybiBuIDwgMSA/IG4NCiAgICAgICAgICAgIDogbiA+IDEwMCA/IDENCiAgICAgICAgICAgICAgICA6ICFuID8gMA0KICAgICAgICAgICAgICAgICAgICA6IG4gLyAxMDA7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGZvcm1hdFRpbWUodCkgew0KICAgICAgICByZXR1cm4gdCA/ICh0IC0gKHQgJT0gNjApKSAvIDYwICsgKDkuNSA8IHQgPyAnOicgOiAnOjAnKSArIE1hdGgucm91bmQodCkgOiAnMDowMCc7DQogICAgfQ0KICAgIC8qDQogICAgKiogRXhwb3NlDQogICAgKi8NCiAgICB0aGlzLnNldFZpZGVvU2V0dGluZ3MgPSBzZXRWaWRlb1NldHRpbmdzOw0KICAgIHRoaXMuZ2V0VmlkZW9TZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9zZXR0aW5nczsgfTsNCiAgICB0aGlzLnNldEZpbGxPcHRpb24gPSBzZXRGaWxsT3B0aW9uOw0KICAgIHRoaXMucGxheSA9IHBsYXlWaWRlbzsNCiAgICB0aGlzLnJlc3RhcnQgPSByZXN0YXJ0VmlkZW87DQogICAgdGhpcy5wYXVzZSA9IHBhdXNlVmlkZW87DQogICAgdGhpcy5zdG9wID0gc3RvcFZpZGVvOw0KICAgIHRoaXMubG9hZFZpZGVvID0gbG9hZFZpZGVvOw0KICAgIHRoaXMuc2V0Vm9sdW1lID0gc2V0Vm9sdW1lOw0KICAgIHRoaXMudG9nZ2xlTXV0ZSA9IHRvZ2dsZU11dGU7DQogICAgdGhpcy5zZWVrVG8gPSBzZWVrVG87DQogICAgdGhpcy52aWRlbyA9IF92aWRlbzsNCiAgICB0aGlzLnBvc3RlciA9IHBvc3RlcjsNCn0NCmZ1bmN0aW9uIGdldEFkanVzdGVkVXJsKHRleHQpIHsNCiAgICBsZXQgdXJsID0gdGV4dA0KICAgICAgICAucmVwbGFjZSgvdmlkZW8uYmFubmVyZmxvdy5jb20vZywgJ2MuYmFubmVyZmxvdy5uZXQvYmYtdmlkZW9zJykNCiAgICAgICAgLnJlcGxhY2UoLyhcclxufFxufFxyfFxzKS9nbSwgJycpOw0KICAgIGlmIChBZC5jdXN0b21Eb21haW4pIHsNCiAgICAgICAgLy8gUmVtb3ZlIGh0dHB8cyByZXBsYWNlbWVudCB3aGVuIEFkLmN1c3RvbURvbWFpbiBvbmx5IGdpdmVzIHRoZSBkb21haW4NCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ2MuYmFubmVyZmxvdy5uZXQnLCBBZC5jdXN0b21Eb21haW4ucmVwbGFjZSgvKGh0dHB8aHR0cHMpOlwvXC8vLCAnJykpOw0KICAgIH0NCiAgICByZXR1cm4gdXJsOw0KfQ0KZnVuY3Rpb24gVmlkZW9UcmFja2luZyhvcHRpb25zKSB7DQogICAgLyoNCiAgICAqKiAgVGhpcyBtZXRob2QgYnViYmxlcyB1cCBldmVudHMgdG8gdGhlIEJhbm5lci9DdXN0b20gc2NyaXB0DQogICAgKiogIGFuZCBpcyB1c2VkIHRvIHNlbmQgdmlkZW8gdHJhY2tpbmcgZXZlbnRzDQogICAgKi8NCiAgICB2YXIgdXJsID0gb3B0aW9ucy51cmw7DQogICAgdmFyIGZpbGVuYW1lID0gb3B0aW9ucy5maWxlbmFtZTsNCiAgICAvLyBPbmNlIHBlciB2aWV3ID0gT1BWDQogICAgdmFyIGhhc0NvbXBsZXRlZCA9IGZhbHNlLCAvLyBPUFYNCiAgICBpc0luaXQgPSBmYWxzZSwgLy8gT1BWDQogICAgc3RhcnRlZCA9IGZhbHNlLCAvLyBPUFYNCiAgICByZWFjaGVkRlEgPSBmYWxzZSwgLy8gT1BWDQogICAgcmVhY2hlZE1QID0gZmFsc2UsIC8vIE9QVg0KICAgIHJlYWNoZWRUUSA9IGZhbHNlOyAvLyBPUFYNCiAgICAvLyBWaWRlbyBpbml0aWFsaXplZCANCiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChpc0luaXQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIGlzSW5pdCA9IHRydWU7DQogICAgfTsNCiAgICAvLyBWaWRlbyBzdGFydGVkIG9yIHBsYXlpbmcgZnJvbSBiZWdpbm5pbmcgYWdhaW4NCiAgICB0aGlzLnN0YXJ0ZWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgew0KICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwIH0pOw0KICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIEZpcnN0IFF1YXJ0aWxlDQogICAgdGhpcy5mcSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHJlYWNoZWRGUSB8fCAhc3RhcnRlZCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjI1IH0pOw0KICAgICAgICByZWFjaGVkRlEgPSB0cnVlOw0KICAgIH07DQogICAgLy8gVmlkZW8gcmVhY2hlZCB0aGUgTWlkcG9pbnQNCiAgICB0aGlzLm1wID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAocmVhY2hlZE1QKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBBZC50cmFja0N1c3RvbVByb2dyZXNzRXZlbnQoeyBuYW1lOiAnVmlkZW8gY29tcGxldGlvbicsIGlkOiB1cmwsIGxhYmVsOiBmaWxlbmFtZSwgdmFsdWU6IDAuNSB9KTsNCiAgICAgICAgcmVhY2hlZE1QID0gdHJ1ZTsNCiAgICB9Ow0KICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIFRoaXJkIHF1YXJ0aWxlDQogICAgdGhpcy50cSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHJlYWNoZWRUUSkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjc1IH0pOw0KICAgICAgICByZWFjaGVkVFEgPSB0cnVlOw0KICAgIH07DQogICAgLy8gVmlkZW8gaGFzIGNvbXBsZXRlZA0KICAgIHRoaXMuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoaGFzQ29tcGxldGVkKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBBZC50cmFja0N1c3RvbVByb2dyZXNzRXZlbnQoeyBuYW1lOiAnVmlkZW8gY29tcGxldGlvbicsIGlkOiB1cmwsIGxhYmVsOiBmaWxlbmFtZSwgdmFsdWU6IDEgfSk7DQogICAgICAgIGhhc0NvbXBsZXRlZCA9IHRydWU7DQogICAgfTsNCn0NCmlmICghQXJyYXkucHJvdG90eXBlLmZpbmQpIHsNCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnZmluZCcsIHsNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHsNCiAgICAgICAgICAgIC8vIDEuIExldCBPIGJlID8gVG9PYmplY3QodGhpcyB2YWx1ZSkuDQogICAgICAgICAgICBpZiAodGhpcyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignInRoaXMiIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpOw0KICAgICAgICAgICAgLy8gMi4gTGV0IGxlbiBiZSA/IFRvTGVuZ3RoKD8gR2V0KE8sICJsZW5ndGgiKSkuDQogICAgICAgICAgICB2YXIgbGVuID0gby5sZW5ndGggPj4+IDA7DQogICAgICAgICAgICAvLyAzLiBJZiBJc0NhbGxhYmxlKHByZWRpY2F0ZSkgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi4NCiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncHJlZGljYXRlIG11c3QgYmUgYSBmdW5jdGlvbicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gNC4gSWYgdGhpc0FyZyB3YXMgc3VwcGxpZWQsIGxldCBUIGJlIHRoaXNBcmc7IGVsc2UgbGV0IFQgYmUgdW5kZWZpbmVkLg0KICAgICAgICAgICAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHNbMV07DQogICAgICAgICAgICAvLyA1LiBMZXQgayBiZSAwLg0KICAgICAgICAgICAgdmFyIGsgPSAwOw0KICAgICAgICAgICAgLy8gNi4gUmVwZWF0LCB3aGlsZSBrIDwgbGVuDQogICAgICAgICAgICB3aGlsZSAoayA8IGxlbikgew0KICAgICAgICAgICAgICAgIC8vIGEuIExldCBQayBiZSAhIFRvU3RyaW5nKGspLg0KICAgICAgICAgICAgICAgIC8vIGIuIExldCBrVmFsdWUgYmUgPyBHZXQoTywgUGspLg0KICAgICAgICAgICAgICAgIC8vIGMuIExldCB0ZXN0UmVzdWx0IGJlIFRvQm9vbGVhbig/IENhbGwocHJlZGljYXRlLCBULCDCqyBrVmFsdWUsIGssIE8gwrspKS4NCiAgICAgICAgICAgICAgICAvLyBkLiBJZiB0ZXN0UmVzdWx0IGlzIHRydWUsIHJldHVybiBrVmFsdWUuDQogICAgICAgICAgICAgICAgdmFyIGtWYWx1ZSA9IG9ba107DQogICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZS5jYWxsKHRoaXNBcmcsIGtWYWx1ZSwgaywgbykpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtWYWx1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gZS4gSW5jcmVhc2UgayBieSAxLg0KICAgICAgICAgICAgICAgIGsrKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIDcuIFJldHVybiB1bmRlZmluZWQuDQogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICB9DQogICAgfSk7DQp9DQo=",customProperties:[{label:"Url",name:"url",unit:"text",value:"{\"text\":\"https://productsup.melia.com/production/vertical_bf21.mp4\",\"styles\":[{\"type\":\"word\",\"length\":57,\"position\":0,\"styleIds\":[]}]}",versionPropertyId:"8cba3f4e-3961-4f38-98bd-88b4039ab42e"},{label:"Use feed",name:"useFeed",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Feed",name:"dynamicContent",unit:"feed",value:"  1 1 loop  text",versionPropertyId:undefined},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"3354d7f0-ab0a-48af-a692-e939e165e3cf"},{label:"Feed index",name:"feedIndex",unit:"number",value:1,versionPropertyId:undefined},{label:"Static index",name:"staticIndex",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Autoplay",name:"autoplay",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Controls",name:"controls",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Loop",name:"loop",unit:"boolean",value:"true",versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithBanner",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Volume toggle button",name:"volumeToggleButton",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Volume",name:"volume",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button color",name:"volumeToggleButtonColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Volume button size",name:"volumeToggleButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button left",name:"volumeToggleButtonPositionLeft",unit:"number",value:5,versionPropertyId:undefined},{label:"Volume button top",name:"volumeToggleButtonPositionTop",unit:"number",value:5,versionPropertyId:undefined},{label:"Play/Pause button size",name:"playPauseButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Start time",name:"startTime",unit:"number",value:0,versionPropertyId:undefined},{label:"End time",name:"endTime",unit:"number",value:0,versionPropertyId:undefined},{label:"Preload image",name:"fallbackImage",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Poster",name:"poster",unit:"image",value:"undefined undefined",versionPropertyId:undefined},{label:"Fill",name:"backgroundFill",unit:"select",value:"W3sidmFsdWUiOiJDb3ZlciIsInNlbGVjdGVkIjp0cnVlfSx7InZhbHVlIjoiQ29udGFpbiIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Playback rate",name:"playbackRate",unit:"select",value:"W3sidmFsdWUiOiIxIiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiIwLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMC41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjAuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIxLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMS41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjEuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIyIiwic2VsZWN0ZWQiOmZhbHNlfV0=",versionPropertyId:undefined},{label:"Gray Scale",name:"grayScale",unit:"number",value:0,versionPropertyId:undefined},{label:"Player background",name:"playerBackground",unit:"color",value:"rgba(0,0,0,0)",versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:"false",versionPropertyId:undefined},{label:"Round corners",name:"roundCorners",unit:"number",value:0,versionPropertyId:undefined}],},{kind:'image',id:'8a6347b6-a628-4f4d-b30b-39be5d4a5c2d',time:0,hidden:false,duration:6.93,animations:[],states:[],actions:[],x:0,y:45,width:160,height:50.8,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,fitOption:"contain",fitPositionX:0,fitPositionY:0,imageAsset:{id:"268109",url:"https://c.bannerflow.net/accounts/melia-hotels-international/5b1e7460bb093f129c2d2c03/images/7b51f064-cf80-42f5-8742-399b1e95fc65.png",width:400,height:127},quality:85},{kind:'text',id:'9c3abe02-8fea-414c-8b47-ec10136dbcbe',time:0,hidden:false,duration:6.93,animations:[],states:[],actions:[],x:16,y:58,width:124,height:26,radius:0,originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"center",maxRows:0,lineHeight:1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0.4,uppercase:false,underline:false,strikethrough:false,fontSize:19,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"top",maxRows:null,textOverflow:"expand",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"FRIDAY",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},font:3}]};return{env,creativeData,preloadAssets};});